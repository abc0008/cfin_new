<Initial_Streaming_Response>
Let me provide a comprehensive analysis of the loan performance based on the financial documents.
The loan portfolio shows consistent growth and generally healthy performance across multiple dimensions from 2024Q1 to 2025Q1, though there are some signs of modest credit quality deterioration that warrant monitoring.
Total loans have shown steady growth, increasing from $42 billion in 2024Q1 to $45 billion in 2025Q1, representing a 7.1% increase over the period. All major loan categories have contributed to this growth, with C&I loans being the largest segment and showing particularly strong performance.
The credit quality metrics show some modest deterioration:
Non-performing assets have gradually increased from $350M to $390M
Net charge-offs have increased from $25M to $32M
The allowance for loan losses has grown from $350M to $390M, suggesting the bank is building reserves in response to both loan growth and potentially increasing credit risk
Let me break this down with some detailed visualizations:
Let me provide a comprehensive analysis of the loan performance based on the financial documents. The loan portfolio shows consistent growth and generally healthy performance across multiple dimensions from 2024Q1 to 2025Q1, though there are some signs of modest credit quality deterioration that warrant monitoring. Total loans have shown steady growth, increasing from $42 billion in 2024Q1 to $45 billion in 2025Q1, representing a 7.1% increase over the period. All major loan categories have contributed to this growth, with C&I loans being the largest segment and showing particularly strong performance. The credit quality metrics show some modest deterioration: - Non-performing assets have gradually increased from $350M to $390M - Net charge-offs have increased from $25M to $32M - The allowance for loan losses has grown from $350M to $390M, suggesting the bank is building reserves in response to both loan growth and potentially increasing credit risk Let me break this down with some detailed visualizations:
</Initial_Streaming_Response>

<Post_Visualization_Streaming_Response>
Key observations from the data:
Portfolio Growth:
Total loans have grown consistently each quarter
C&I loans remain the largest segment, growing from $16.8B to $18B
All loan categories show steady growth with no significant concentration shifts
Credit Quality:
While still manageable, credit quality metrics show some deterioration
Non-performing assets ratio is at 0.87% as of 2025Q1
Net charge-offs have increased by 28% from 2024Q1 to 2025Q1
The bank has maintained consistent coverage by increasing loan loss reserves
Portfolio Composition:
C&I Loans: ~40% of portfolio
CRE Loans: ~30% of portfolio
Residential Mortgages: ~20% of portfolio
Consumer & Other: ~10% of portfolio
The overall loan performance can be characterized as showing healthy growth with some signs of mild credit quality deterioration that appears to be well-managed through appropriate provisioning and reserve building.
Key observations from the data: 1. Portfolio Growth: - Total loans have grown consistently each quarter - C&I loans remain the largest segment, growing from $16.8B to $18B - All loan categories show steady growth with no significant concentration shifts 2. Credit Quality: - While still manageable, credit quality metrics show some deterioration - Non-performing assets ratio is at 0.87% as of 2025Q1 - Net charge-offs have increased by 28% from 2024Q1 to 2025Q1 - The bank has maintained consistent coverage by increasing loan loss reserves 3. Portfolio Composition: - C&I Loans: ~40% of portfolio - CRE Loans: ~30% of portfolio - Residential Mortgages: ~20% of portfolio - Consumer & Other: ~10% of portfolio The overall loan performance can be characterized as showing healthy growth with some signs of mild credit quality deterioration that appears to be well-managed through appropriate provisioning and reserve building.
</Post_Visualization_Streaming_Response>

<JavaScript_Console_Output>
[Info] Successfully preconnected to https://fonts.gstatic.com/
[Info] Successfully preconnected to https://fonts.googleapis.com/
[Error] Failed to load resource: the server responded with a status of 400 () (font, line 0)
[Log] [Fast Refresh] rebuilding
[Log] [Fast Refresh] done in 1139ms
[Log] [Fast Refresh] done in 1148ms
[Log] üåê API Service Available
[Log] Use __apiService to access the API directly in the console
[Log] Sending POST request to http://localhost:8000/api/conversation
[Log] Sending POST request to http://localhost:8000/api/conversation
[Error] Failed to load resource: the server responded with a status of 400 () (font, line 0)
[Log] Created conversation session: f28bf0bf-2148-4f4c-8aea-b2d3a2a78404
[Log] Created conversation session: 0e205228-dd2a-4d5b-945d-5e53182fd87c
[Log] Created conversation session: ‚Äì "0e205228-dd2a-4d5b-945d-5e53182fd87c"
[Log] Validating conversation exists: ‚Äì "0e205228-dd2a-4d5b-945d-5e53182fd87c"
[Log] Sending GET request to http://localhost:8000/api/conversation/0e205228-dd2a-4d5b-945d-5e53182fd87c
[Log] Starting WebSocket connection to: ‚Äì "ws://localhost:8000/ws/conversation/0e205228-dd2a-4d5b-945d-5e53182fd87c"
[Log] Current isConnected state before connection: ‚Äì false
[Log] WebSocket onopen event fired for conversation: ‚Äì "0e205228-dd2a-4d5b-945d-5e53182fd87c"
[Log] WebSocket connected and isConnected set to true for conversation: ‚Äì "0e205228-dd2a-4d5b-945d-5e53182fd87c"
[Log] File selected: ‚Äì "Bank_5Q_Trend_Report.pdf"
[Log] Validating file: ‚Äì "Bank_5Q_Trend_Report.pdf"
[Log] File validation successful
[Log] Uploading document...
[Log] Upload progress: 0.00%, Stage: Starting upload
[Log] Uploading file to http://localhost:8000/api/documents/upload
[Log] Upload progress: 40.00%, Stage: Uploading file
[Log] Polling for document processing completion...
[Log] Upload progress: 40.00%, Stage: Processing document
[Log] Upload progress: 40.00%, Stage: Processing document
[Log] Sending GET request to http://localhost:8000/api/documents/359bac5e-4d6b-4af8-9484-8614081405b2
[Log] Document status after attempt 1: processing
[Log] Upload progress: 40.27%, Stage: Processing document
[Log] Sending GET request to http://localhost:8000/api/documents/359bac5e-4d6b-4af8-9484-8614081405b2
[Log] Document status after attempt 2: processing
[Log] Upload progress: 40.53%, Stage: Processing document
[Log] Sending GET request to http://localhost:8000/api/documents/359bac5e-4d6b-4af8-9484-8614081405b2
[Log] Document status after attempt 3: processing
[Log] Upload progress: 40.80%, Stage: Processing document
[Log] Sending GET request to http://localhost:8000/api/documents/359bac5e-4d6b-4af8-9484-8614081405b2
[Log] Document status after attempt 4: processing
[Log] Upload progress: 41.07%, Stage: Processing document
[Log] Sending GET request to http://localhost:8000/api/documents/359bac5e-4d6b-4af8-9484-8614081405b2
[Log] Document status after attempt 5: processing
[Log] Upload progress: 41.33%, Stage: Processing document
[Log] Sending GET request to http://localhost:8000/api/documents/359bac5e-4d6b-4af8-9484-8614081405b2
[Log] Document status after attempt 6: processing
[Log] Upload progress: 41.60%, Stage: Processing document
[Log] Sending GET request to http://localhost:8000/api/documents/359bac5e-4d6b-4af8-9484-8614081405b2
[Log] Document status after attempt 7: processing
[Log] Upload progress: 41.87%, Stage: Processing document
[Log] Sending GET request to http://localhost:8000/api/documents/359bac5e-4d6b-4af8-9484-8614081405b2
[Log] Document status after attempt 8: processing
[Log] Upload progress: 42.13%, Stage: Processing document
[Log] Sending GET request to http://localhost:8000/api/documents/359bac5e-4d6b-4af8-9484-8614081405b2
[Log] Document status after attempt 9: processing
[Log] Upload progress: 42.40%, Stage: Processing document
[Log] Sending GET request to http://localhost:8000/api/documents/359bac5e-4d6b-4af8-9484-8614081405b2
[Log] Document status after attempt 10: processing
[Log] Upload progress: 42.67%, Stage: Processing document
[Log] Sending GET request to http://localhost:8000/api/documents/359bac5e-4d6b-4af8-9484-8614081405b2
[Log] Document status after attempt 11: processing
[Log] Upload progress: 42.93%, Stage: Processing document
[Log] Sending GET request to http://localhost:8000/api/documents/359bac5e-4d6b-4af8-9484-8614081405b2
[Log] Document status after attempt 12: processing
[Log] Upload progress: 43.20%, Stage: Processing document
[Log] Sending GET request to http://localhost:8000/api/documents/359bac5e-4d6b-4af8-9484-8614081405b2
[Log] Document status after attempt 13: processing
[Log] Upload progress: 43.47%, Stage: Processing document
[Log] Sending GET request to http://localhost:8000/api/documents/359bac5e-4d6b-4af8-9484-8614081405b2
[Log] Document status after attempt 14: processing
[Log] Upload progress: 43.73%, Stage: Processing document
[Log] Sending GET request to http://localhost:8000/api/documents/359bac5e-4d6b-4af8-9484-8614081405b2
[Log] Document status after attempt 15: completed
[Log] Verifying financial data...
[Log] Upload progress: 80.00%, Stage: Verifying financial data
[Log] Sending GET request to http://localhost:8000/api/documents/359bac5e-4d6b-4af8-9484-8614081405b2/check-financial-data
[Log] Document needs financial data verification: ‚Äì "Document accepted for financial analysis"
[Log] Upload progress: 85.00%, Stage: Enhancing financial data
[Log] Sending GET request to http://localhost:8000/api/documents/359bac5e-4d6b-4af8-9484-8614081405b2/check-financial-data
[Log] Sending POST request to http://localhost:8000/api/documents/359bac5e-4d6b-4af8-9484-8614081405b2/verify-financial-data
[Log] Financial data verification result: ‚Äì {success: true, message: "Document content verified for analysis"}
[Log] Upload progress: 90.00%, Stage: Retrieving enhanced data
[Log] Sending GET request to http://localhost:8000/api/documents/359bac5e-4d6b-4af8-9484-8614081405b2
[Log] Upload progress: 100.00%, Stage: Document ready
[Log] Document verification completed: ‚Äì {metadata: Object, contentType: "income_statement", extractionTimestamp: "2025-06-24T02:57:36.591Z", ‚Ä¶}
{metadata: Object, contentType: "income_statement", extractionTimestamp: "2025-06-24T02:57:36.591Z", periods: ["2024Q1", "2024Q2", "2024Q3", "2024Q4", "2025Q1"], extractedData: Object, ‚Ä¶}Object
[Log] Associating document 359bac5e-4d6b-4af8-9484-8614081405b2 with conversation 0e205228-dd2a-4d5b-945d-5e53182fd87c
[Log] Sending POST request to http://localhost:8000/api/conversation/0e205228-dd2a-4d5b-945d-5e53182fd87c/document/359bac5e-4d6b-4af8-9484-8614081405b2
[Log] Document 359bac5e-4d6b-4af8-9484-8614081405b2 added to conversation 0e205228-dd2a-4d5b-945d-5e53182fd87c
[Log] Document successfully associated with conversation
[Log] [Fast Refresh] rebuilding
[Log] PDFViewer unmounting, cleaning up resources
[Log] Sending GET request to http://localhost:8000/api/documents/359bac5e-4d6b-4af8-9484-8614081405b2/citations
[Log] [Fast Refresh] done in 248ms
[Log] Deprecated API usage: The `enhanceTextSelection` functionality will be removed in the future. (x3)
[Error] Failed to load resource: the server responded with a status of 404 (Not Found) (types.js.map, line 0)
[Log] Submit conditions: useStreaming=true, conversationId=0e205228-dd2a-4d5b-945d-5e53182fd87c, isConnected=true
[Log] Using WebSocket streaming for message submission
[Log] üîç State check on message_start: ‚Äì {messagePhase: null, activeMessageId: null, streamingMessageId: null, ‚Ä¶}
{messagePhase: null, activeMessageId: null, streamingMessageId: null, phaseTransitions: 0}Object
[Log] üöÄ Starting new message: 05e56059-b3f3-410c-9b1d-2179c142e276
[Log] üìù Building initial streaming: 3 chars
[Log] üìù Initial streaming update: 3 chars
[Log] üìù Building initial streaming: 16 chars
[Log] üìù Initial streaming update: 16 chars
[Log] üìù Building initial streaming: 30 chars
[Log] üìù Initial streaming update: 30 chars
[Log] üìù Building initial streaming: 46 chars
[Log] üìù Initial streaming update: 46 chars
[Log] üìù Building initial streaming: 76 chars
[Log] üìù Initial streaming update: 76 chars
[Log] üìù Building initial streaming: 86 chars
[Log] üìù Initial streaming update: 86 chars
[Log] üìù Building initial streaming: 97 chars
[Log] üìù Initial streaming update: 97 chars
[Log] üìù Building initial streaming: 102 chars
[Log] üìù Initial streaming update: 102 chars
[Log] üìù Building initial streaming: 107 chars
[Log] üìù Initial streaming update: 107 chars
[Log] üìù Building initial streaming: 123 chars
[Log] üìù Initial streaming update: 123 chars
[Log] üìù Building initial streaming: 144 chars
[Log] üìù Initial streaming update: 144 chars
[Log] üìù Building initial streaming: 163 chars
[Log] üìù Initial streaming update: 163 chars
[Log] üìù Building initial streaming: 191 chars
[Log] üìù Initial streaming update: 191 chars
[Log] üìù Building initial streaming: 207 chars
[Log] üìù Initial streaming update: 207 chars
[Log] üìù Building initial streaming: 212 chars
[Log] üìù Initial streaming update: 212 chars
[Log] üìù Building initial streaming: 219 chars
[Log] üìù Initial streaming update: 219 chars
[Log] üìù Building initial streaming: 224 chars
[Log] üìù Initial streaming update: 224 chars
[Log] üìù Building initial streaming: 253 chars
[Log] üìù Initial streaming update: 253 chars
[Log] üìù Building initial streaming: 263 chars
[Log] üìù Initial streaming update: 263 chars
[Log] üìù Building initial streaming: 270 chars
[Log] üìù Initial streaming update: 270 chars
[Log] üìù Building initial streaming: 278 chars
[Log] üìù Initial streaming update: 278 chars
[Log] üìù Building initial streaming: 297 chars
[Log] üìù Initial streaming update: 297 chars
[Log] üìù Building initial streaming: 316 chars
[Log] üìù Initial streaming update: 316 chars
[Log] üìù Building initial streaming: 324 chars
[Log] üìù Initial streaming update: 324 chars
[Log] üìù Building initial streaming: 330 chars
[Log] üìù Initial streaming update: 330 chars
[Log] üìù Building initial streaming: 335 chars
[Log] üìù Initial streaming update: 335 chars
[Log] üìù Building initial streaming: 341 chars
[Log] üìù Initial streaming update: 341 chars
[Log] üìù Building initial streaming: 348 chars
[Log] üìù Initial streaming update: 348 chars
[Log] üìù Building initial streaming: 374 chars
[Log] üìù Initial streaming update: 374 chars
[Log] üìù Building initial streaming: 376 chars
[Log] üìù Initial streaming update: 376 chars
[Log] üìù Building initial streaming: 377 chars
[Log] üìù Initial streaming update: 377 chars
[Log] üìù Building initial streaming: 387 chars
[Log] üìù Initial streaming update: 387 chars
[Log] üìù Building initial streaming: 394 chars
[Log] üìù Initial streaming update: 394 chars
[Log] üìù Building initial streaming: 401 chars
[Log] üìù Initial streaming update: 401 chars
[Log] üìù Building initial streaming: 414 chars
[Log] üìù Initial streaming update: 414 chars
[Log] üìù Building initial streaming: 433 chars
[Log] üìù Initial streaming update: 433 chars
[Log] üìù Building initial streaming: 439 chars
[Log] üìù Initial streaming update: 439 chars
[Log] üìù Building initial streaming: 464 chars
[Log] üìù Initial streaming update: 464 chars
[Log] üìù Building initial streaming: 470 chars
[Log] üìù Initial streaming update: 470 chars
[Log] üìù Building initial streaming: 476 chars
[Log] üìù Initial streaming update: 476 chars
[Log] üìù Building initial streaming: 508 chars
[Log] üìù Initial streaming update: 508 chars
[Log] üìù Building initial streaming: 530 chars
[Log] üìù Initial streaming update: 530 chars
[Log] üìù Building initial streaming: 532 chars
[Log] üìù Initial streaming update: 532 chars
[Log] üìù Building initial streaming: 546 chars
[Log] üìù Initial streaming update: 546 chars
[Log] üìù Building initial streaming: 569 chars
[Log] üìù Initial streaming update: 569 chars
[Log] üìù Building initial streaming: 591 chars
[Log] üìù Initial streaming update: 591 chars
[Log] üìù Building initial streaming: 610 chars
[Log] üìù Initial streaming update: 610 chars
[Log] üìù Building initial streaming: 616 chars
[Log] üìù Initial streaming update: 616 chars
[Log] üìù Building initial streaming: 623 chars
[Log] üìù Initial streaming update: 623 chars
[Log] üìù Building initial streaming: 639 chars
[Log] üìù Initial streaming update: 639 chars
[Log] üìù Building initial streaming: 644 chars
[Log] üìù Initial streaming update: 644 chars
[Log] üìù Building initial streaming: 656 chars
[Log] üìù Initial streaming update: 656 chars
[Log] üìù Building initial streaming: 671 chars
[Log] üìù Initial streaming update: 671 chars
[Log] üìù Building initial streaming: 695 chars
[Log] üìù Initial streaming update: 695 chars
[Log] üìù Building initial streaming: 710 chars
[Log] üìù Initial streaming update: 710 chars
[Log] üìù Building initial streaming: 730 chars
[Log] üìù Initial streaming update: 730 chars
[Log] üìù Building initial streaming: 734 chars
[Log] üìù Initial streaming update: 734 chars
[Log] üìù Building initial streaming: 739 chars
[Log] üìù Initial streaming update: 739 chars
[Log] üìù Building initial streaming: 740 chars
[Log] üìù Initial streaming update: 740 chars
[Log] üìù Building initial streaming: 758 chars
[Log] üìù Initial streaming update: 758 chars
[Log] üìù Building initial streaming: 782 chars
[Log] üìù Initial streaming update: 782 chars
[Log] üìù Building initial streaming: 790 chars
[Log] üìù Initial streaming update: 790 chars
[Log] üìù Building initial streaming: 797 chars
[Log] üìù Initial streaming update: 797 chars
[Log] üìù Building initial streaming: 827 chars
[Log] üìù Initial streaming update: 827 chars
[Log] üìù Building initial streaming: 843 chars
[Log] üìù Initial streaming update: 843 chars
[Log] üìù Building initial streaming: 852 chars
[Log] üìù Initial streaming update: 852 chars
[Log] üìù Building initial streaming: 854 chars
[Log] üìù Initial streaming update: 854 chars
[Log] üìù Building initial streaming: 886 chars
[Log] üìù Initial streaming update: 886 chars
[Log] üìù Building initial streaming: 898 chars
[Log] üìù Initial streaming update: 898 chars
[Log] üìù Building initial streaming: 915 chars
[Log] üìù Initial streaming update: 915 chars
[Log] üìù Building initial streaming: 943 chars
[Log] üìù Initial streaming update: 943 chars
[Log] üìù Building initial streaming: 961 chars
[Log] üìù Initial streaming update: 961 chars
[Log] üìù Building initial streaming: 971 chars
[Log] üìù Initial streaming update: 971 chars
[Log] üìù Building initial streaming: 985 chars
[Log] üìù Initial streaming update: 985 chars
[Log] üìù Building initial streaming: 1000 chars
[Log] üìù Initial streaming update: 1000 chars
[Log] üìù Building initial streaming: 1025 chars
[Log] üìù Initial streaming update: 1025 chars
[Log] üîç State check on tool_start: ‚Äì {messagePhase: "initial", activeMessageId: "05e56059-b3f3-410c-9b1d-2179c142e276", streamingMessageId: "05e56059-b3f3-410c-9b1d-2179c142e276", ‚Ä¶}
{messagePhase: "initial", activeMessageId: "05e56059-b3f3-410c-9b1d-2179c142e276", streamingMessageId: "05e56059-b3f3-410c-9b1d-2179c142e276", phaseTransitions: 1}Object
[Log] üîß Tool started: generate_graph_data in phase initial
[Log] ‚úÖ Completing initial streaming message: 1025 chars
[Log] Streaming message update: ‚Äì {id: "05e56059-b3f3-410c-9b1d-2179c142e276", sessionId: "0e205228-dd2a-4d5b-945d-5e53182fd87c", timestamp: "2025-06-24T02:59:11.946Z", ‚Ä¶}
{id: "05e56059-b3f3-410c-9b1d-2179c142e276", sessionId: "0e205228-dd2a-4d5b-945d-5e53182fd87c", timestamp: "2025-06-24T02:59:11.946Z", role: "assistant", content: "Let me provide a comprehensive analysis of the loa‚Ä¶reak this down with some detailed visualizations:", ‚Ä¶}Object
[Log] üîß Tool generate_graph_data (toolu_01FTCSud6sf6my1ARJgA6DKG) in progress
[Log] Sending POST request to http://localhost:8000/api/conversation/0e205228-dd2a-4d5b-945d-5e53182fd87c/generate-followups?limit=3
[Log] Sending POST request to http://localhost:8000/api/conversation/0e205228-dd2a-4d5b-945d-5e53182fd87c/generate-followups?limit=3
[Log] Generated 3 follow-up questions for conversation 0e205228-dd2a-4d5b-945d-5e53182fd87c (x2)
[Log] üîç State check on tool_start: ‚Äì {messagePhase: "tools", activeMessageId: "05e56059-b3f3-410c-9b1d-2179c142e276", streamingMessageId: "05e56059-b3f3-410c-9b1d-2179c142e276", ‚Ä¶}
{messagePhase: "tools", activeMessageId: "05e56059-b3f3-410c-9b1d-2179c142e276", streamingMessageId: "05e56059-b3f3-410c-9b1d-2179c142e276", phaseTransitions: 2}Object
[Log] üîß Tool started: generate_table_data in phase tools
[Log] ‚ö†Ô∏è Tool started in phase tools - not completing initial message
[Log] üîß Tool generate_table_data (toolu_01KG5gnCvDyoZ8Kpmhc6H6vN) in progress
[Log] üîç State check on tool_start: ‚Äì {messagePhase: "tools", activeMessageId: "05e56059-b3f3-410c-9b1d-2179c142e276", streamingMessageId: "05e56059-b3f3-410c-9b1d-2179c142e276", ‚Ä¶}
{messagePhase: "tools", activeMessageId: "05e56059-b3f3-410c-9b1d-2179c142e276", streamingMessageId: "05e56059-b3f3-410c-9b1d-2179c142e276", phaseTransitions: 2}Object
[Log] üîß Tool started: generate_financial_metric in phase tools
[Log] ‚ö†Ô∏è Tool started in phase tools - not completing initial message
[Log] üîß Tool generate_financial_metric (toolu_019A8hUzaMEwabkGDajQTszP) in progress
[Log] üîç State check on tool_start: ‚Äì {messagePhase: "tools", activeMessageId: "05e56059-b3f3-410c-9b1d-2179c142e276", streamingMessageId: "05e56059-b3f3-410c-9b1d-2179c142e276", ‚Ä¶}
{messagePhase: "tools", activeMessageId: "05e56059-b3f3-410c-9b1d-2179c142e276", streamingMessageId: "05e56059-b3f3-410c-9b1d-2179c142e276", phaseTransitions: 2}Object
[Log] üîß Tool started: generate_financial_metric in phase tools
[Log] ‚ö†Ô∏è Tool started in phase tools - not completing initial message
[Log] üîß Tool generate_financial_metric (toolu_01SkDtdHxsTVABZYXDkxSvqF) in progress
[Log] üìä Transitioning to post-tools phase
[Log] üí¨ Building post-visualization content: 3 chars
[Log] üìä Post-visualization content update (fallback): 3 chars
[Log] üí¨ Building post-visualization content: 30 chars
[Log] üìä Post-visualization content update (fallback): 30 chars
[Log] üí¨ Building post-visualization content: 45 chars
[Log] üìä Post-visualization content update (fallback): 45 chars
[Log] üí¨ Building post-visualization content: 55 chars
[Log] üìä Post-visualization content update (fallback): 55 chars
[Log] üí¨ Building post-visualization content: 96 chars
[Log] üìä Post-visualization content update (fallback): 96 chars
[Log] üí¨ Building post-visualization content: 123 chars
[Log] üìä Post-visualization content update (fallback): 123 chars
[Log] üí¨ Building post-visualization content: 152 chars
[Log] üìä Post-visualization content update (fallback): 152 chars
[Log] üí¨ Building post-visualization content: 163 chars
[Log] üìä Post-visualization content update (fallback): 163 chars
[Log] üí¨ Building post-visualization content: 172 chars
[Log] üìä Post-visualization content update (fallback): 172 chars
[Log] üí¨ Building post-visualization content: 183 chars
[Log] üìä Post-visualization content update (fallback): 183 chars
[Log] üí¨ Building post-visualization content: 218 chars
[Log] üìä Post-visualization content update (fallback): 218 chars
[Log] üí¨ Building post-visualization content: 273 chars
[Log] üìä Post-visualization content update (fallback): 273 chars
[Log] üí¨ Building post-visualization content: 282 chars
[Log] üìä Post-visualization content update (fallback): 282 chars
[Log] üí¨ Building post-visualization content: 307 chars
[Log] üìä Post-visualization content update (fallback): 307 chars
[Log] üí¨ Building post-visualization content: 328 chars
[Log] üìä Post-visualization content update (fallback): 328 chars
[Log] üí¨ Building post-visualization content: 349 chars
[Log] üìä Post-visualization content update (fallback): 349 chars
[Log] üí¨ Building post-visualization content: 364 chars
[Log] üìä Post-visualization content update (fallback): 364 chars
[Log] üí¨ Building post-visualization content: 380 chars
[Log] üìä Post-visualization content update (fallback): 380 chars
[Log] üí¨ Building post-visualization content: 389 chars
[Log] üìä Post-visualization content update (fallback): 389 chars
[Log] üí¨ Building post-visualization content: 401 chars
[Log] üìä Post-visualization content update (fallback): 401 chars
[Log] üí¨ Building post-visualization content: 408 chars
[Log] üìä Post-visualization content update (fallback): 408 chars
[Log] üí¨ Building post-visualization content: 434 chars
[Log] üìä Post-visualization content update (fallback): 434 chars
[Log] üí¨ Building post-visualization content: 441 chars
[Log] üìä Post-visualization content update (fallback): 441 chars
[Log] üí¨ Building post-visualization content: 454 chars
[Log] üìä Post-visualization content update (fallback): 454 chars
[Log] üí¨ Building post-visualization content: 462 chars
[Log] üìä Post-visualization content update (fallback): 462 chars
[Log] üí¨ Building post-visualization content: 470 chars
[Log] üìä Post-visualization content update (fallback): 470 chars
[Log] üí¨ Building post-visualization content: 501 chars
[Log] üìä Post-visualization content update (fallback): 501 chars
[Log] üí¨ Building post-visualization content: 529 chars
[Log] üìä Post-visualization content update (fallback): 529 chars
[Log] üí¨ Building post-visualization content: 557 chars
[Log] üìä Post-visualization content update (fallback): 557 chars
[Log] üí¨ Building post-visualization content: 572 chars
[Log] üìä Post-visualization content update (fallback): 572 chars
[Log] üí¨ Building post-visualization content: 576 chars
[Log] üìä Post-visualization content update (fallback): 576 chars
[Log] üí¨ Building post-visualization content: 587 chars
[Log] üìä Post-visualization content update (fallback): 587 chars
[Log] üí¨ Building post-visualization content: 601 chars
[Log] üìä Post-visualization content update (fallback): 601 chars
[Log] üí¨ Building post-visualization content: 614 chars
[Log] üìä Post-visualization content update (fallback): 614 chars
[Log] üí¨ Building post-visualization content: 634 chars
[Log] üìä Post-visualization content update (fallback): 634 chars
[Log] üí¨ Building post-visualization content: 652 chars
[Log] üìä Post-visualization content update (fallback): 652 chars
[Log] üí¨ Building post-visualization content: 662 chars
[Log] üìä Post-visualization content update (fallback): 662 chars
[Log] üí¨ Building post-visualization content: 686 chars
[Log] üìä Post-visualization content update (fallback): 686 chars
[Log] üí¨ Building post-visualization content: 700 chars
[Log] üìä Post-visualization content update (fallback): 700 chars
[Log] üí¨ Building post-visualization content: 726 chars
[Log] üìä Post-visualization content update (fallback): 726 chars
[Log] üí¨ Building post-visualization content: 775 chars
[Log] üìä Post-visualization content update (fallback): 775 chars
[Log] üí¨ Building post-visualization content: 809 chars
[Log] üìä Post-visualization content update (fallback): 809 chars
[Log] üí¨ Building post-visualization content: 848 chars
[Log] üìä Post-visualization content update (fallback): 848 chars
[Log] üí¨ Building post-visualization content: 883 chars
[Log] üìä Post-visualization content update (fallback): 883 chars
[Log] üí¨ Building post-visualization content: 929 chars
[Log] üìä Post-visualization content update (fallback): 929 chars
[Log] üí¨ Building post-visualization content: 930 chars
[Log] üìä Post-visualization content update (fallback): 930 chars
[Log] üèÅ Message complete in phase: post-tools
[Log] Sending GET request to http://localhost:8000/api/conversation/message/05e56059-b3f3-410c-9b1d-2179c142e276
[Log] üìä DB Message: 0 visualizations
[Log] üí¨ Post-viz text: 930 chars
[Log] üìä Local visualizations: 0 charts, 0 tables, 0 metrics
[Log] üìç Current phase: post-tools, Tools started: true
[Log] ‚ö†Ô∏è Post-tools phase with text but no DB visualizations - creating messages anyway
[Log] üí¨ Creating standalone post-visualization message: 930 chars
[Log] Streaming message update: ‚Äì {id: "post_viz_1750733991484_ikz0v4qs9", sessionId: "0e205228-dd2a-4d5b-945d-5e53182fd87c", timestamp: "2025-06-24T02:59:51.484Z", ‚Ä¶}
{id: "post_viz_1750733991484_ikz0v4qs9", sessionId: "0e205228-dd2a-4d5b-945d-5e53182fd87c", timestamp: "2025-06-24T02:59:51.484Z", role: "assistant", content: "Key observations from the data:‚Üµ‚Üµ1. Portfolio Grow‚Ä¶gh appropriate provisioning and reserve building.", ‚Ä¶}Object
[Log] üßπ Cleaning up after phase transitions: initial ‚Üí tools ‚Üí post-tools
[Log] Sending POST request to http://localhost:8000/api/conversation/0e205228-dd2a-4d5b-945d-5e53182fd87c/generate-followups?limit=3
[Log] Sending POST request to http://localhost:8000/api/conversation/0e205228-dd2a-4d5b-945d-5e53182fd87c/generate-followups?limit=3
[Log] Generated 3 follow-up questions for conversation 0e205228-dd2a-4d5b-945d-5e53182fd87c (x2)
</JavaScript_Console_Output>

<Backend_Logs>
(venv) alexcardell@Alexs-MBP backend % cd /Users/alexcardell/AlexCoding_Local/cfin/backend && PYTHONPATH=$PYTHONPATH:/Users/alexcardell/AlexCoding_Local/cfin/backend python -m uvicorn app.main:app --reload --port 8000
INFO:     Will watch for changes in these directories: ['/Users/alexcardell/AlexCoding_Local/cfin/backend']
INFO:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [61400] using StatReload
INFO:root:Loaded environment variables from /Users/alexcardell/AlexCoding_Local/cfin/.env
INFO:root:ANTHROPIC_API_KEY loaded: sk-ant-a...TQAA
INFO:app.main:CORS: Allowing origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:3002', 'http://localhost:3003', 'http://127.0.0.1:3000', 'http://127.0.0.1:3001', 'http://127.0.0.1:3002', 'http://127.0.0.1:3003', 'http://127.0.0.1:49937', 'http://127\\.0\\.0\\.1:\\d+', 'http://127.0.0.1:64142']
INFO:     Started server process [61402]
INFO:     Waiting for application startup.
INFO:app.main:Initializing database...
INFO:utils.init_db:Creating database tables...
INFO:utils.init_db:Database tables created successfully.
INFO:utils.init_db:Default user already exists.
INFO:utils.init_db:Database initialization completed successfully.
INFO:app.main:Database initialization completed successfully
INFO:     Application startup complete.
INFO:     127.0.0.1:52448 - "OPTIONS /api/conversation HTTP/1.1" 200 OK
INFO:     127.0.0.1:52449 - "OPTIONS /api/conversation HTTP/1.1" 200 OK
INFO:services.conversation_service:Found ANTHROPIC_API_KEY in environment variables: sk-ant-a...TQAA
INFO:pdf_processing.api_service:ClaudeService initialized with model: claude-3-5-sonnet-20241022, PDF support, timeout=90s, max_retries=5, headers: {'anthropic-beta': 'token-efficient-tools-2025-02-19,files-api-2025-04-14,fine-grained-tool-streaming-2025-05-14'}
INFO:pdf_processing.langgraph_service:LangGraphService initialized with model: claude-3-5-sonnet-20241022
INFO:pdf_processing.api_service:LangGraph service successfully initialized
INFO:services.conversation_service:Found ANTHROPIC_API_KEY in environment variables: sk-ant-a...TQAA
INFO:pdf_processing.api_service:ClaudeService initialized with model: claude-3-5-sonnet-20241022, PDF support, timeout=90s, max_retries=5, headers: {'anthropic-beta': 'token-efficient-tools-2025-02-19,files-api-2025-04-14,fine-grained-tool-streaming-2025-05-14'}
INFO:pdf_processing.langgraph_service:LangGraphService initialized with model: claude-3-5-sonnet-20241022
INFO:pdf_processing.api_service:LangGraph service successfully initialized
INFO:app.routes.conversation:Created conversation: f28bf0bf-2148-4f4c-8aea-b2d3a2a78404 for user: default-user
INFO:app.routes.conversation:Created conversation: 0e205228-dd2a-4d5b-945d-5e53182fd87c for user: default-user
INFO:     127.0.0.1:52448 - "POST /api/conversation HTTP/1.1" 201 Created
INFO:     127.0.0.1:52449 - "POST /api/conversation HTTP/1.1" 201 Created
INFO:services.conversation_service:Found ANTHROPIC_API_KEY in environment variables: sk-ant-a...TQAA
INFO:pdf_processing.api_service:ClaudeService initialized with model: claude-3-5-sonnet-20241022, PDF support, timeout=90s, max_retries=5, headers: {'anthropic-beta': 'token-efficient-tools-2025-02-19,files-api-2025-04-14,fine-grained-tool-streaming-2025-05-14'}
INFO:pdf_processing.langgraph_service:LangGraphService initialized with model: claude-3-5-sonnet-20241022
INFO:pdf_processing.api_service:LangGraph service successfully initialized
INFO:     127.0.0.1:52448 - "GET /api/conversation/0e205228-dd2a-4d5b-945d-5e53182fd87c HTTP/1.1" 200 OK
INFO:app.routes.websocket:WebSocket endpoint called for conversation: 0e205228-dd2a-4d5b-945d-5e53182fd87c, user: default-user
INFO:services.conversation_service:Found ANTHROPIC_API_KEY in environment variables: sk-ant-a...TQAA
INFO:pdf_processing.api_service:ClaudeService initialized with model: claude-3-5-sonnet-20241022, PDF support, timeout=90s, max_retries=5, headers: {'anthropic-beta': 'token-efficient-tools-2025-02-19,files-api-2025-04-14,fine-grained-tool-streaming-2025-05-14'}
INFO:pdf_processing.langgraph_service:LangGraphService initialized with model: claude-3-5-sonnet-20241022
INFO:pdf_processing.api_service:LangGraph service successfully initialized
INFO:     ('127.0.0.1', 52449) - "WebSocket /ws/conversation/0e205228-dd2a-4d5b-945d-5e53182fd87c" [accepted]
INFO:app.routes.websocket:WebSocket connected: default-user_0e205228-dd2a-4d5b-945d-5e53182fd87c_1750733825888
INFO:app.routes.websocket:WebSocket connection established for conversation: 0e205228-dd2a-4d5b-945d-5e53182fd87c
INFO:     connection open
INFO:app.routes.websocket:Found conversation: 0e205228-dd2a-4d5b-945d-5e53182fd87c
INFO:     127.0.0.1:52476 - "OPTIONS /api/documents/upload HTTP/1.1" 200 OK
INFO:pdf_processing.api_service:ClaudeService initialized with model: claude-3-5-sonnet-20241022, PDF support, timeout=90s, max_retries=5, headers: {'anthropic-beta': 'token-efficient-tools-2025-02-19,files-api-2025-04-14,fine-grained-tool-streaming-2025-05-14'}
INFO:pdf_processing.langgraph_service:LangGraphService initialized with model: claude-3-5-sonnet-20241022
INFO:pdf_processing.api_service:LangGraph service successfully initialized
INFO:utils.storage:File 359bac5e-4d6b-4af8-9484-8614081405b2.pdf saved to ./uploads/359bac5e-4d6b-4af8-9484-8614081405b2.pdf
INFO:     127.0.0.1:52476 - "POST /api/documents/upload HTTP/1.1" 200 OK
INFO:pdf_processing.document_service:Starting optimized processing of document 359bac5e-4d6b-4af8-9484-8614081405b2 (Bank_5Q_Trend_Report.pdf) with Claude Files API
INFO:pdf_processing.document_service:No cached file_id for document 359bac5e-4d6b-4af8-9484-8614081405b2, performing full processing
INFO:pdf_processing.api_service:Processing PDF: Bank_5Q_Trend_Report.pdf with Claude API using native PDF support.
INFO:httpx:HTTP Request: POST https://api.anthropic.com/v1/files "HTTP/1.1 200 OK"
INFO:utils.file_cache:Cached file_id=file_011CQSJ6pK8AXCjNBeRANnCs for content hash=9c15100a12f1a9ad... (expires: 2025-09-21 21:57:37, cache size: 1)
INFO:audit.pdf_access:PDF_ACCESS: {'timestamp': 'AUTO', 'operation': 'upload', 'file_id': 'file_011CQSJ6pK8AXCjNBeRANnCs', 'user_context': 'system', 'file_size_bytes': 29802, 'privacy_note': 'PDF content not logged for compliance'}
INFO:pdf_processing.claude_file_client:Uploaded Bank_5Q_Trend_Report.pdf (0.0 MB) ‚Üí file_011CQSJ6pK8AXCjNBeRANnCs
INFO:pdf_processing.api_service:Generated Claude file_id file_011CQSJ6pK8AXCjNBeRANnCs for Bank_5Q_Trend_Report.pdf
INFO:pdf_processing.api_service:Analyzing document type for Bank_5Q_Trend_Report.pdf
INFO:pdf_processing.api_service:Analyzing document type for Bank_5Q_Trend_Report.pdf using file_id=file_011CQSJ6pK8AXCjNBeRANnCs
INFO:pdf_processing.model_router:Using Haiku for light tools set() with 1000 tokens (haiku_calls=1, sonnet_calls=0)
INFO:pdf_processing.api_service:Model router selected claude-3-5-haiku-20241022 for document type analysis
INFO:httpx:HTTP Request: POST https://api.anthropic.com/v1/messages/count_tokens "HTTP/1.1 200 OK"
INFO:pdf_processing.api_service:Anthropic SDK estimated input tokens (non-streaming): 117 (Custom estimate: 117)
INFO:pdf_processing.api_service:Throttling based on token count: 117 (SDK count: 117, Custom estimate: 117)
INFO:     127.0.0.1:52476 - "GET /api/documents/359bac5e-4d6b-4af8-9484-8614081405b2 HTTP/1.1" 200 OK
INFO:httpx:HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
INFO:pdf_processing.api_service:Document Bank_5Q_Trend_Report.pdf classified as income_statement with periods: ['2024Q1', '2024Q2', '2024Q3', '2024Q4', '2025Q1']
INFO:pdf_processing.api_service:Document Bank_5Q_Trend_Report.pdf classified as: income_statement with periods: ['2024Q1', '2024Q2', '2024Q3', '2024Q4', '2025Q1']
INFO:pdf_processing.api_service:Extracting structured financial data and citations for Bank_5Q_Trend_Report.pdf
INFO:pdf_processing.api_service:Extracting structured financial data with citations from: Bank_5Q_Trend_Report.pdf using file_id file_011CQSJ6pK8AXCjNBeRANnCs
INFO:httpx:HTTP Request: POST https://api.anthropic.com/v1/messages/count_tokens "HTTP/1.1 200 OK"
INFO:pdf_processing.api_service:Anthropic SDK estimated input tokens (non-streaming): 179 (Custom estimate: 104)
INFO:pdf_processing.api_service:Throttling based on token count: 179 (SDK count: 179, Custom estimate: 104)
INFO:     127.0.0.1:52476 - "GET /api/documents/359bac5e-4d6b-4af8-9484-8614081405b2 HTTP/1.1" 200 OK
INFO:     127.0.0.1:52476 - "GET /api/documents/359bac5e-4d6b-4af8-9484-8614081405b2 HTTP/1.1" 200 OK
INFO:     127.0.0.1:52476 - "GET /api/documents/359bac5e-4d6b-4af8-9484-8614081405b2 HTTP/1.1" 200 OK
INFO:     127.0.0.1:52476 - "GET /api/documents/359bac5e-4d6b-4af8-9484-8614081405b2 HTTP/1.1" 200 OK
INFO:     127.0.0.1:52476 - "GET /api/documents/359bac5e-4d6b-4af8-9484-8614081405b2 HTTP/1.1" 200 OK
INFO:     127.0.0.1:52476 - "GET /api/documents/359bac5e-4d6b-4af8-9484-8614081405b2 HTTP/1.1" 200 OK
INFO:     127.0.0.1:52476 - "GET /api/documents/359bac5e-4d6b-4af8-9484-8614081405b2 HTTP/1.1" 200 OK
INFO:     127.0.0.1:52476 - "GET /api/documents/359bac5e-4d6b-4af8-9484-8614081405b2 HTTP/1.1" 200 OK
INFO:     127.0.0.1:52476 - "GET /api/documents/359bac5e-4d6b-4af8-9484-8614081405b2 HTTP/1.1" 200 OK
INFO:     127.0.0.1:52476 - "GET /api/documents/359bac5e-4d6b-4af8-9484-8614081405b2 HTTP/1.1" 200 OK
INFO:     127.0.0.1:52476 - "GET /api/documents/359bac5e-4d6b-4af8-9484-8614081405b2 HTTP/1.1" 200 OK
INFO:     127.0.0.1:52476 - "GET /api/documents/359bac5e-4d6b-4af8-9484-8614081405b2 HTTP/1.1" 200 OK
INFO:     127.0.0.1:52476 - "GET /api/documents/359bac5e-4d6b-4af8-9484-8614081405b2 HTTP/1.1" 200 OK
INFO:httpx:HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
INFO:pdf_processing.api_service:Successfully parsed financial JSON from Claude's response.
INFO:pdf_processing.api_service:Captured Claude's preamble text, length: 160
INFO:pdf_processing.api_service:Extracted 0 citations for Bank_5Q_Trend_Report.pdf
INFO:pdf_processing.api_service:Structured financial data keys for Bank_5Q_Trend_Report.pdf: ['time_periods', 'balance_sheet', 'income_statement', 'credit_quality', 'claude_textual_output_accompanying_json']
INFO:pdf_processing.api_service:Added claude_file_id file_011CQSJ6pK8AXCjNBeRANnCs to extracted_data for Bank_5Q_Trend_Report.pdf
INFO:pdf_processing.document_service:Processed document using Files API: PDF Bank_5Q_Trend_Report.pdf processed using Claude's native PDF support via Files API
INFO:pdf_processing.document_service:Extracted claude_file_id file_011CQSJ6pK8AXCjNBeRANnCs from processed document data
INFO:pdf_processing.document_service:Stored claude_file_id file_011CQSJ6pK8AXCjNBeRANnCs in database for document 359bac5e-4d6b-4af8-9484-8614081405b2
INFO:pdf_processing.document_service:Updating document 359bac5e-4d6b-4af8-9484-8614081405b2 content with Claude optimizations using Files API
INFO:pdf_processing.document_service:Document 359bac5e-4d6b-4af8-9484-8614081405b2 processed with Claude optimizations. File ID: file_011CQSJ6pK8AXCjNBeRANnCs
INFO:pdf_processing.document_service:Storing 0 citations for document 359bac5e-4d6b-4af8-9484-8614081405b2
INFO:pdf_processing.document_service:Successfully completed optimized processing for document 359bac5e-4d6b-4af8-9484-8614081405b2
INFO:     127.0.0.1:52476 - "GET /api/documents/359bac5e-4d6b-4af8-9484-8614081405b2 HTTP/1.1" 200 OK
INFO:pdf_processing.api_service:ClaudeService initialized with model: claude-3-5-sonnet-20241022, PDF support, timeout=90s, max_retries=5, headers: {'anthropic-beta': 'token-efficient-tools-2025-02-19,files-api-2025-04-14,fine-grained-tool-streaming-2025-05-14'}
INFO:pdf_processing.langgraph_service:LangGraphService initialized with model: claude-3-5-sonnet-20241022
INFO:pdf_processing.api_service:LangGraph service successfully initialized
INFO:app.routes.document:Document 359bac5e-4d6b-4af8-9484-8614081405b2 accepted for financial analysis
INFO:     127.0.0.1:52476 - "GET /api/documents/359bac5e-4d6b-4af8-9484-8614081405b2/check-financial-data HTTP/1.1" 200 OK
INFO:pdf_processing.api_service:ClaudeService initialized with model: claude-3-5-sonnet-20241022, PDF support, timeout=90s, max_retries=5, headers: {'anthropic-beta': 'token-efficient-tools-2025-02-19,files-api-2025-04-14,fine-grained-tool-streaming-2025-05-14'}
INFO:pdf_processing.langgraph_service:LangGraphService initialized with model: claude-3-5-sonnet-20241022
INFO:pdf_processing.api_service:LangGraph service successfully initialized
INFO:app.routes.document:Document 359bac5e-4d6b-4af8-9484-8614081405b2 accepted for financial analysis
INFO:     127.0.0.1:52476 - "GET /api/documents/359bac5e-4d6b-4af8-9484-8614081405b2/check-financial-data HTTP/1.1" 200 OK
INFO:     127.0.0.1:52476 - "OPTIONS /api/documents/359bac5e-4d6b-4af8-9484-8614081405b2/verify-financial-data HTTP/1.1" 200 OK
INFO:pdf_processing.api_service:ClaudeService initialized with model: claude-3-5-sonnet-20241022, PDF support, timeout=90s, max_retries=5, headers: {'anthropic-beta': 'token-efficient-tools-2025-02-19,files-api-2025-04-14,fine-grained-tool-streaming-2025-05-14'}
INFO:pdf_processing.langgraph_service:LangGraphService initialized with model: claude-3-5-sonnet-20241022
INFO:pdf_processing.api_service:LangGraph service successfully initialized
INFO:app.routes.document:Document 359bac5e-4d6b-4af8-9484-8614081405b2 has extracted_data with keys: ['time_periods', 'balance_sheet', 'income_statement', 'credit_quality', 'claude_textual_output_accompanying_json', 'claude_file_id']
INFO:     127.0.0.1:52476 - "POST /api/documents/359bac5e-4d6b-4af8-9484-8614081405b2/verify-financial-data HTTP/1.1" 200 OK
INFO:     127.0.0.1:52476 - "GET /api/documents/359bac5e-4d6b-4af8-9484-8614081405b2 HTTP/1.1" 200 OK
INFO:     127.0.0.1:52476 - "OPTIONS /api/conversation/0e205228-dd2a-4d5b-945d-5e53182fd87c/document/359bac5e-4d6b-4af8-9484-8614081405b2 HTTP/1.1" 200 OK
INFO:services.conversation_service:Found ANTHROPIC_API_KEY in environment variables: sk-ant-a...TQAA
INFO:pdf_processing.api_service:ClaudeService initialized with model: claude-3-5-sonnet-20241022, PDF support, timeout=90s, max_retries=5, headers: {'anthropic-beta': 'token-efficient-tools-2025-02-19,files-api-2025-04-14,fine-grained-tool-streaming-2025-05-14'}
INFO:pdf_processing.langgraph_service:LangGraphService initialized with model: claude-3-5-sonnet-20241022
INFO:pdf_processing.api_service:LangGraph service successfully initialized
INFO:pdf_processing.api_service:ClaudeService initialized with model: claude-3-5-sonnet-20241022, PDF support, timeout=90s, max_retries=5, headers: {'anthropic-beta': 'token-efficient-tools-2025-02-19,files-api-2025-04-14,fine-grained-tool-streaming-2025-05-14'}
INFO:pdf_processing.langgraph_service:LangGraphService initialized with model: claude-3-5-sonnet-20241022
INFO:pdf_processing.api_service:LangGraph service successfully initialized
INFO:     127.0.0.1:52476 - "POST /api/conversation/0e205228-dd2a-4d5b-945d-5e53182fd87c/document/359bac5e-4d6b-4af8-9484-8614081405b2 HTTP/1.1" 200 OK
INFO:pdf_processing.api_service:ClaudeService initialized with model: claude-3-5-sonnet-20241022, PDF support, timeout=90s, max_retries=5, headers: {'anthropic-beta': 'token-efficient-tools-2025-02-19,files-api-2025-04-14,fine-grained-tool-streaming-2025-05-14'}
INFO:pdf_processing.langgraph_service:LangGraphService initialized with model: claude-3-5-sonnet-20241022
INFO:pdf_processing.api_service:LangGraph service successfully initialized
INFO:app.routes.document:Retrieving file for document: 359bac5e-4d6b-4af8-9484-8614081405b2
INFO:app.routes.document:Returning binary PDF data for document 359bac5e-4d6b-4af8-9484-8614081405b2, size: 29802 bytes
INFO:     127.0.0.1:52495 - "GET /api/documents/359bac5e-4d6b-4af8-9484-8614081405b2/citations HTTP/1.1" 200 OK
INFO:     127.0.0.1:52476 - "GET /api/documents/359bac5e-4d6b-4af8-9484-8614081405b2/file HTTP/1.1" 200 OK
INFO:app.routes.websocket:WEBSOCKET_FLOW: Created streaming session default-user_0e205228-dd2a-4d5b-945d-5e53182fd87c_1750733825888_0e205228-dd2a-4d5b-945d-5e53182fd87c with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: Sent initial message_start event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: Starting conversation processing for conversation: 0e205228-dd2a-4d5b-945d-5e53182fd87c
INFO:repositories.document_repository:Retrieving document content using file path: 359bac5e-4d6b-4af8-9484-8614081405b2.pdf
INFO:repositories.document_repository:Requesting file from storage service for document 359bac5e-4d6b-4af8-9484-8614081405b2
INFO:repositories.document_repository:Retrieved PDF content for document 359bac5e-4d6b-4af8-9484-8614081405b2: 29802 bytes
INFO:repositories.document_repository:Document 359bac5e-4d6b-4af8-9484-8614081405b2 has claude_file_id: file_011CQSJ6pK8AXCjNBeRANnCs (native PDF support available)
INFO:repositories.document_repository:PDF document 359bac5e-4d6b-4af8-9484-8614081405b2 uses claude_file_id for native support - raw_text not required
INFO:repositories.document_repository:Extracted data available for document 359bac5e-4d6b-4af8-9484-8614081405b2: ['time_periods', 'balance_sheet', 'income_statement', 'credit_quality', 'claude_textual_output_accompanying_json', 'claude_file_id']
INFO:repositories.document_repository:Successfully retrieved content for document 359bac5e-4d6b-4af8-9484-8614081405b2
INFO:services.conversation_service:Retrieved content for document 359bac5e-4d6b-4af8-9484-8614081405b2: content size=29802, raw_text size=0
INFO:services.conversation_service:Document 359bac5e-4d6b-4af8-9484-8614081405b2 available content types: content, extracted_data
INFO:services.conversation_service:Added document 359bac5e-4d6b-4af8-9484-8614081405b2 to context for conversation 0e205228-dd2a-4d5b-945d-5e53182fd87c
INFO:repositories.document_repository:Retrieving document content using file path: 359bac5e-4d6b-4af8-9484-8614081405b2.pdf
INFO:repositories.document_repository:Requesting file from storage service for document 359bac5e-4d6b-4af8-9484-8614081405b2
INFO:repositories.document_repository:Retrieved PDF content for document 359bac5e-4d6b-4af8-9484-8614081405b2: 29802 bytes
INFO:repositories.document_repository:Document 359bac5e-4d6b-4af8-9484-8614081405b2 has claude_file_id: file_011CQSJ6pK8AXCjNBeRANnCs (native PDF support available)
INFO:repositories.document_repository:PDF document 359bac5e-4d6b-4af8-9484-8614081405b2 uses claude_file_id for native support - raw_text not required
INFO:repositories.document_repository:Extracted data available for document 359bac5e-4d6b-4af8-9484-8614081405b2: ['time_periods', 'balance_sheet', 'income_statement', 'credit_quality', 'claude_textual_output_accompanying_json', 'claude_file_id']
INFO:repositories.document_repository:Successfully retrieved content for document 359bac5e-4d6b-4af8-9484-8614081405b2
INFO:services.conversation_service:Added document 359bac5e-4d6b-4af8-9484-8614081405b2 with Files API file_id: file_011CQSJ6pK8AXCjNBeRANnCs
INFO:services.conversation_service:Using unified streaming approach with tools available for conversation 0e205228-dd2a-4d5b-945d-5e53182fd87c
INFO:services.conversation_service:Using Files API claude_file_id file_011CQSJ6pK8AXCjNBeRANnCs for unified streaming analysis
INFO:pdf_processing.api_service:Starting streaming analyze_with_visualization_tools for query: 'How have loans performed?...'
INFO:pdf_processing.api_service:Streaming visualization analysis turn 1/5
INFO:pdf_processing.model_router:Using Sonnet for tools {'generate_table_data', 'generate_graph_data', 'generate_comparative_period', 'generate_financial_metric'} with 46 tokens (haiku_calls=1, sonnet_calls=1)
INFO:pdf_processing.api_service:Executing tool interaction turn with model_router selected model: claude-3-5-sonnet-20241022, 4 tools available, streaming: True
INFO:httpx:HTTP Request: POST https://api.anthropic.com/v1/messages/count_tokens "HTTP/1.1 200 OK"
INFO:pdf_processing.api_service:Anthropic SDK estimated input tokens (streaming): 4321 (Custom estimate: 39)
INFO:pdf_processing.api_service:Throttling based on token count: 4321 (SDK count: 4321, Custom estimate: 39)
INFO:httpx:HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
ERROR:sqlalchemy.pool.impl.NullPool:The garbage collector is trying to clean up non-checked-in connection <AdaptedConnection <Connection(Thread-33, started daemon 6222000128)>>, which will be dropped, as it cannot be safely terminated.  Please ensure that SQLAlchemy pooled connections are returned to the pool explicitly, either by calling ``close()`` or by using appropriate context managers to manage their lifecycle.
/Users/alexcardell/AlexCoding_Local/venv/lib/python3.9/site-packages/pydantic/_internal/_core_utils.py:301: SAWarning: The garbage collector is trying to clean up non-checked-in connection <AdaptedConnection <Connection(Thread-33, started daemon 6222000128)>>, which will be dropped, as it cannot be safely terminated.  Please ensure that SQLAlchemy pooled connections are returned to the pool explicitly, either by calling ``close()`` or by using appropriate context managers to manage their lifecycle.
  for v in schema['choices']:
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for message_start event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Filtering out duplicate message_start event for session default-user_0e205228-dd2a-4d5b-945d-5e53182fd87c_1750733825888_0e205228-dd2a-4d5b-945d-5e53182fd87c
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_start event
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 3 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 3
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 3 chars
INFO:services.conversation_service:üìù Content updated: 3 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 3 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 16 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 16
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 16 chars
INFO:services.conversation_service:üìù Content updated: 16 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 16 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 30 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 30
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 30 chars
INFO:services.conversation_service:üìù Content updated: 30 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 30 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 46 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 46
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 46 chars
INFO:services.conversation_service:üìù Content updated: 46 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 46 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 76 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 76
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 76 chars
INFO:services.conversation_service:üìù Content updated: 76 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 76 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 86 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 86
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 86 chars
INFO:services.conversation_service:üìù Content updated: 86 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 86 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 97 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 97
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 97 chars
INFO:services.conversation_service:üìù Content updated: 97 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 97 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 102 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 102
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 102 chars
INFO:services.conversation_service:üìù Content updated: 102 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 102 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 107 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 107
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 107 chars
INFO:services.conversation_service:üìù Content updated: 107 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 107 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 123 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 123
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 123 chars
INFO:services.conversation_service:üìù Content updated: 123 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 123 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 144 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 144
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 144 chars
INFO:services.conversation_service:üìù Content updated: 144 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 144 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 163 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 163
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 163 chars
INFO:services.conversation_service:üìù Content updated: 163 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 163 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 191 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 191
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 191 chars
INFO:services.conversation_service:üìù Content updated: 191 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 191 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 207 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 207
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 207 chars
INFO:services.conversation_service:üìù Content updated: 207 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 207 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 212 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 212
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 212 chars
INFO:services.conversation_service:üìù Content updated: 212 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 212 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 219 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 219
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 219 chars
INFO:services.conversation_service:üìù Content updated: 219 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 219 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 224 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 224
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 224 chars
INFO:services.conversation_service:üìù Content updated: 224 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 224 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 253 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 253
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 253 chars
INFO:services.conversation_service:üìù Content updated: 253 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 253 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 263 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 263
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 263 chars
INFO:services.conversation_service:üìù Content updated: 263 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 263 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 270 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 270
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 270 chars
INFO:services.conversation_service:üìù Content updated: 270 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 270 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 278 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 278
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 278 chars
INFO:services.conversation_service:üìù Content updated: 278 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 278 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 297 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 297
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 297 chars
INFO:services.conversation_service:üìù Content updated: 297 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 297 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 316 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 316
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 316 chars
INFO:services.conversation_service:üìù Content updated: 316 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 316 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 324 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 324
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 324 chars
INFO:services.conversation_service:üìù Content updated: 324 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 324 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 330 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 330
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 330 chars
INFO:services.conversation_service:üìù Content updated: 330 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 330 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 335 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 335
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 335 chars
INFO:services.conversation_service:üìù Content updated: 335 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 335 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 341 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 341
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 341 chars
INFO:services.conversation_service:üìù Content updated: 341 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 341 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 348 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 348
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 348 chars
INFO:services.conversation_service:üìù Content updated: 348 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 348 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 374 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 374
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 374 chars
INFO:services.conversation_service:üìù Content updated: 374 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 374 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 376 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 376
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 376 chars
INFO:services.conversation_service:üìù Content updated: 376 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 376 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 377 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 377
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 377 chars
INFO:services.conversation_service:üìù Content updated: 377 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 377 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 387 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 387
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 387 chars
INFO:services.conversation_service:üìù Content updated: 387 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 387 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 394 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 394
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 394 chars
INFO:services.conversation_service:üìù Content updated: 394 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 394 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 401 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 401
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 401 chars
INFO:services.conversation_service:üìù Content updated: 401 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 401 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 414 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 414
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 414 chars
INFO:services.conversation_service:üìù Content updated: 414 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 414 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 433 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 433
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 433 chars
INFO:services.conversation_service:üìù Content updated: 433 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 433 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 439 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 439
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 439 chars
INFO:services.conversation_service:üìù Content updated: 439 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 439 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 464 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 464
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 464 chars
INFO:services.conversation_service:üìù Content updated: 464 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 464 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 470 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 470
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 470 chars
INFO:services.conversation_service:üìù Content updated: 470 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 470 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 476 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 476
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 476 chars
INFO:services.conversation_service:üìù Content updated: 476 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 476 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 508 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 508
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 508 chars
INFO:services.conversation_service:üìù Content updated: 508 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 508 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 530 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 530
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 530 chars
INFO:services.conversation_service:üìù Content updated: 530 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 530 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 532 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 532
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 532 chars
INFO:services.conversation_service:üìù Content updated: 532 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 532 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 546 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 546
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 546 chars
INFO:services.conversation_service:üìù Content updated: 546 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 546 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 569 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 569
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 569 chars
INFO:services.conversation_service:üìù Content updated: 569 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 569 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 591 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 591
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 591 chars
INFO:services.conversation_service:üìù Content updated: 591 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 591 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 610 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 610
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 610 chars
INFO:services.conversation_service:üìù Content updated: 610 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 610 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 616 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 616
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 616 chars
INFO:services.conversation_service:üìù Content updated: 616 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 616 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 623 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 623
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 623 chars
INFO:services.conversation_service:üìù Content updated: 623 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 623 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 639 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 639
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 639 chars
INFO:services.conversation_service:üìù Content updated: 639 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 639 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 644 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 644
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 644 chars
INFO:services.conversation_service:üìù Content updated: 644 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 644 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 656 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 656
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 656 chars
INFO:services.conversation_service:üìù Content updated: 656 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 656 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 671 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 671
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 671 chars
INFO:services.conversation_service:üìù Content updated: 671 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 671 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 695 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 695
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 695 chars
INFO:services.conversation_service:üìù Content updated: 695 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 695 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 710 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 710
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 710 chars
INFO:services.conversation_service:üìù Content updated: 710 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 710 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 730 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 730
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 730 chars
INFO:services.conversation_service:üìù Content updated: 730 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 730 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 734 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 734
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 734 chars
INFO:services.conversation_service:üìù Content updated: 734 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 734 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 739 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 739
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 739 chars
INFO:services.conversation_service:üìù Content updated: 739 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 739 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 740 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 740
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 740 chars
INFO:services.conversation_service:üìù Content updated: 740 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 740 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 758 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 758
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 758 chars
INFO:services.conversation_service:üìù Content updated: 758 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 758 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 782 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 782
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 782 chars
INFO:services.conversation_service:üìù Content updated: 782 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 782 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 790 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 790
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 790 chars
INFO:services.conversation_service:üìù Content updated: 790 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 790 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 797 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 797
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 797 chars
INFO:services.conversation_service:üìù Content updated: 797 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 797 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 827 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 827
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 827 chars
INFO:services.conversation_service:üìù Content updated: 827 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 827 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 843 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 843
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 843 chars
INFO:services.conversation_service:üìù Content updated: 843 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 843 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 852 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 852
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 852 chars
INFO:services.conversation_service:üìù Content updated: 852 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 852 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 854 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 854
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 854 chars
INFO:services.conversation_service:üìù Content updated: 854 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 854 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 886 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 886
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 886 chars
INFO:services.conversation_service:üìù Content updated: 886 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 886 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 898 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 898
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 898 chars
INFO:services.conversation_service:üìù Content updated: 898 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 898 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 915 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 915
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 915 chars
INFO:services.conversation_service:üìù Content updated: 915 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 915 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 943 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 943
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 943 chars
INFO:services.conversation_service:üìù Content updated: 943 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 943 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 961 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 961
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 961 chars
INFO:services.conversation_service:üìù Content updated: 961 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 961 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 971 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 971
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 971 chars
INFO:services.conversation_service:üìù Content updated: 971 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 971 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 985 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 985
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 985 chars
INFO:services.conversation_service:üìù Content updated: 985 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 985 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 1000 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 1000
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 1000 chars
INFO:services.conversation_service:üìù Content updated: 1000 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 1000 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 1025 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 1025
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 1025 chars
INFO:services.conversation_service:üìù Content updated: 1025 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 1025 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for content_block_stop event
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for tool_start event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting tool_start event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: tool_start - tool_id=toolu_01FTCSud6sf6my1ARJgA6DKG, tool_name=generate_graph_data
INFO:services.conversation_service:Found ANTHROPIC_API_KEY in environment variables: sk-ant-a...TQAA
INFO:pdf_processing.api_service:ClaudeService initialized with model: claude-3-5-sonnet-20241022, PDF support, timeout=90s, max_retries=5, headers: {'anthropic-beta': 'token-efficient-tools-2025-02-19,files-api-2025-04-14,fine-grained-tool-streaming-2025-05-14'}
INFO:pdf_processing.langgraph_service:LangGraphService initialized with model: claude-3-5-sonnet-20241022
INFO:pdf_processing.api_service:LangGraph service successfully initialized
INFO:services.conversation_service:Found ANTHROPIC_API_KEY in environment variables: sk-ant-a...TQAA
INFO:pdf_processing.api_service:ClaudeService initialized with model: claude-3-5-sonnet-20241022, PDF support, timeout=90s, max_retries=5, headers: {'anthropic-beta': 'token-efficient-tools-2025-02-19,files-api-2025-04-14,fine-grained-tool-streaming-2025-05-14'}
INFO:pdf_processing.langgraph_service:LangGraphService initialized with model: claude-3-5-sonnet-20241022
INFO:pdf_processing.api_service:LangGraph service successfully initialized
INFO:pdf_processing.api_service:Sending request to Claude API with 1 messages, streaming: False
INFO:pdf_processing.api_service:Sending request to Claude API with 1 messages, streaming: False
INFO:httpx:HTTP Request: POST https://api.anthropic.com/v1/messages/count_tokens "HTTP/1.1 200 OK"
INFO:pdf_processing.api_service:Anthropic SDK estimated input tokens (generate_response non-streaming): 457
INFO:httpx:HTTP Request: POST https://api.anthropic.com/v1/messages/count_tokens "HTTP/1.1 200 OK"
INFO:pdf_processing.api_service:Anthropic SDK estimated input tokens (generate_response non-streaming): 457
INFO:httpx:HTTP Request: POST https://api.anthropic.com/v1/messages/count_tokens "HTTP/1.1 200 OK"
INFO:pdf_processing.api_service:Anthropic SDK estimated input tokens (non-streaming): 457 (Custom estimate: 489)
INFO:pdf_processing.api_service:Throttling based on token count: 457 (SDK count: 457, Custom estimate: 489)
INFO:httpx:HTTP Request: POST https://api.anthropic.com/v1/messages/count_tokens "HTTP/1.1 200 OK"
INFO:pdf_processing.api_service:Anthropic SDK estimated input tokens (non-streaming): 457 (Custom estimate: 489)
INFO:pdf_processing.api_service:Throttling based on token count: 457 (SDK count: 457, Custom estimate: 489)
INFO:httpx:HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
INFO:     127.0.0.1:52540 - "POST /api/conversation/0e205228-dd2a-4d5b-945d-5e53182fd87c/generate-followups?limit=3 HTTP/1.1" 200 OK
INFO:httpx:HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
INFO:     127.0.0.1:52539 - "POST /api/conversation/0e205228-dd2a-4d5b-945d-5e53182fd87c/generate-followups?limit=3 HTTP/1.1" 200 OK
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for content_block_stop event
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for message_delta event
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for message_stop event
INFO:pdf_processing.api_service:Raw tool input from Claude for generate_graph_data: type=<class 'dict'>
WARNING:app.routes.websocket:Correcting message_id from msg_018HoYGFntcH95MEGuC23cy6 to 05e56059-b3f3-410c-9b1d-2179c142e276 for tool_complete event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting tool_complete event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: tool_complete - tool_id=toolu_01FTCSud6sf6my1ARJgA6DKG, tool_name=generate_graph_data
INFO:pdf_processing.api_service:Turn 1: Initial streaming text preserved (1025 chars)
INFO:pdf_processing.api_service:Received 1 tool calls from streaming response
INFO:pdf_processing.api_service:Tool call: generate_graph_data (ID: toolu_01FTCSud6sf6my1ARJgA6DKG)
INFO:pdf_processing.api_service:Processing streaming tool generate_graph_data (ID: toolu_01FTCSud6sf6my1ARJgA6DKG)
INFO:pdf_processing.api_service:Tool generate_graph_data (ID: toolu_01FTCSud6sf6my1ARJgA6DKG) - input type: <class 'dict'>
INFO:pdf_processing.api_service:Tool generate_graph_data (ID: toolu_01FTCSud6sf6my1ARJgA6DKG) - dict input keys: ['chartType', 'config', 'data', 'chartConfig']
INFO:utils.tool_processing:Processing generate_graph_data (ID: toolu_01FTCSud6sf6my1ARJgA6DKG) - input type: <class 'dict'>
INFO:utils.tool_processing:Starting process_chart_input with input type: <class 'dict'>
INFO:utils.tool_processing:Chart input keys: ['chartType', 'config', 'data', 'chartConfig']
INFO:utils.tool_processing:Chart config type: <class 'str'>
INFO:utils.tool_processing:Chart data type: <class 'list'>, length: 5
INFO:utils.tool_processing:Chart chartConfig type: <class 'dict'>
WARNING:utils.tool_processing:Chart config is a JSON string, parsing it
INFO:utils.tool_processing:Successfully parsed config JSON string
INFO:utils.tool_processing:Chart config keys: ['title', 'xAxisKey', 'xAxisLabel', 'yAxisLabel', 'description']
INFO:utils.tool_processing:Successfully got original_data: type=<class 'list'>
INFO:utils.tool_processing:Chart type: line
INFO:utils.tool_processing:Chart config settings type: <class 'dict'>
INFO:utils.tool_processing:x_axis_key: period
INFO:utils.tool_processing:Transforming chart data to {x, y} format required by ChartDataItem model
INFO:utils.tool_processing:Line chart with multiple series (['ci_loans', 'cre_loans', 'residential', 'consumer']) - keeping flat format
INFO:utils.tool_processing:Successfully processed chart: Loan Portfolio Composition Trends
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting tool_complete event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: tool_complete - tool_id=toolu_01FTCSud6sf6my1ARJgA6DKG, tool_name=generate_graph_data
INFO:pdf_processing.api_service:Streaming visualization analysis turn 2/5
INFO:pdf_processing.model_router:Using Sonnet for tools {'generate_table_data', 'generate_graph_data', 'generate_comparative_period', 'generate_financial_metric'} with 955 tokens (haiku_calls=1, sonnet_calls=2)
INFO:pdf_processing.api_service:Executing tool interaction turn with model_router selected model: claude-3-5-sonnet-20241022, 4 tools available, streaming: True
INFO:httpx:HTTP Request: POST https://api.anthropic.com/v1/messages/count_tokens "HTTP/1.1 200 OK"
INFO:pdf_processing.api_service:Anthropic SDK estimated input tokens (streaming): 5481 (Custom estimate: 296)
INFO:pdf_processing.api_service:Throttling based on token count: 5481 (SDK count: 5481, Custom estimate: 296)
INFO:httpx:HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
WARNING:app.routes.websocket:Correcting message_id from msg_01SRU5nnx1jPdR2eJoHibkuR to 05e56059-b3f3-410c-9b1d-2179c142e276 for message_start event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Filtering out duplicate message_start event for session default-user_0e205228-dd2a-4d5b-945d-5e53182fd87c_1750733825888_0e205228-dd2a-4d5b-945d-5e53182fd87c
WARNING:app.routes.websocket:Correcting message_id from msg_01SRU5nnx1jPdR2eJoHibkuR to 05e56059-b3f3-410c-9b1d-2179c142e276 for tool_start event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting tool_start event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: tool_start - tool_id=toolu_01KG5gnCvDyoZ8Kpmhc6H6vN, tool_name=generate_table_data
WARNING:app.routes.websocket:Correcting message_id from msg_01SRU5nnx1jPdR2eJoHibkuR to 05e56059-b3f3-410c-9b1d-2179c142e276 for content_block_stop event
WARNING:app.routes.websocket:Correcting message_id from msg_01SRU5nnx1jPdR2eJoHibkuR to 05e56059-b3f3-410c-9b1d-2179c142e276 for message_delta event
WARNING:app.routes.websocket:Correcting message_id from msg_01SRU5nnx1jPdR2eJoHibkuR to 05e56059-b3f3-410c-9b1d-2179c142e276 for message_stop event
INFO:pdf_processing.api_service:Raw tool input from Claude for generate_table_data: type=<class 'dict'>
WARNING:app.routes.websocket:Correcting message_id from msg_01SRU5nnx1jPdR2eJoHibkuR to 05e56059-b3f3-410c-9b1d-2179c142e276 for tool_complete event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting tool_complete event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: tool_complete - tool_id=toolu_01KG5gnCvDyoZ8Kpmhc6H6vN, tool_name=generate_table_data
INFO:pdf_processing.api_service:Received 1 tool calls from streaming response
INFO:pdf_processing.api_service:Tool call: generate_table_data (ID: toolu_01KG5gnCvDyoZ8Kpmhc6H6vN)
INFO:pdf_processing.api_service:Processing streaming tool generate_table_data (ID: toolu_01KG5gnCvDyoZ8Kpmhc6H6vN)
INFO:pdf_processing.api_service:Tool generate_table_data (ID: toolu_01KG5gnCvDyoZ8Kpmhc6H6vN) - input type: <class 'dict'>
INFO:pdf_processing.api_service:Tool generate_table_data (ID: toolu_01KG5gnCvDyoZ8Kpmhc6H6vN) - dict input keys: ['tableType', 'config', 'data']
INFO:utils.tool_processing:Processing generate_table_data (ID: toolu_01KG5gnCvDyoZ8Kpmhc6H6vN) - input type: <class 'dict'>
INFO:utils.tool_processing:Starting process_table_input with input type: <class 'dict'>
INFO:utils.tool_processing:Table input keys: ['tableType', 'config', 'data']
INFO:utils.tool_processing:Table config type: <class 'str'>
INFO:utils.tool_processing:Table data type: <class 'list'>, length: 5
WARNING:utils.tool_processing:Table config is a JSON string, parsing it
INFO:utils.tool_processing:Successfully parsed table config JSON string
INFO:utils.tool_processing:Successfully processed table: Credit Quality Metrics
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting tool_complete event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: tool_complete - tool_id=toolu_01KG5gnCvDyoZ8Kpmhc6H6vN, tool_name=generate_table_data
INFO:pdf_processing.api_service:Streaming visualization analysis turn 3/5
INFO:pdf_processing.model_router:Using Sonnet for tools {'generate_table_data', 'generate_graph_data', 'generate_comparative_period', 'generate_financial_metric'} with 1620 tokens (haiku_calls=1, sonnet_calls=3)
INFO:pdf_processing.api_service:Executing tool interaction turn with model_router selected model: claude-3-5-sonnet-20241022, 4 tools available, streaming: True
INFO:httpx:HTTP Request: POST https://api.anthropic.com/v1/messages/count_tokens "HTTP/1.1 200 OK"
INFO:pdf_processing.api_service:Anthropic SDK estimated input tokens (streaming): 6467 (Custom estimate: 296)
INFO:pdf_processing.api_service:Throttling based on token count: 6467 (SDK count: 6467, Custom estimate: 296)
INFO:httpx:HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
WARNING:app.routes.websocket:Correcting message_id from msg_011QKXYRhuzdwb3SWuexagGp to 05e56059-b3f3-410c-9b1d-2179c142e276 for message_start event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Filtering out duplicate message_start event for session default-user_0e205228-dd2a-4d5b-945d-5e53182fd87c_1750733825888_0e205228-dd2a-4d5b-945d-5e53182fd87c
WARNING:app.routes.websocket:Correcting message_id from msg_011QKXYRhuzdwb3SWuexagGp to 05e56059-b3f3-410c-9b1d-2179c142e276 for tool_start event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting tool_start event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: tool_start - tool_id=toolu_019A8hUzaMEwabkGDajQTszP, tool_name=generate_financial_metric
WARNING:app.routes.websocket:Correcting message_id from msg_011QKXYRhuzdwb3SWuexagGp to 05e56059-b3f3-410c-9b1d-2179c142e276 for content_block_stop event
WARNING:app.routes.websocket:Correcting message_id from msg_011QKXYRhuzdwb3SWuexagGp to 05e56059-b3f3-410c-9b1d-2179c142e276 for message_delta event
WARNING:app.routes.websocket:Correcting message_id from msg_011QKXYRhuzdwb3SWuexagGp to 05e56059-b3f3-410c-9b1d-2179c142e276 for message_stop event
INFO:pdf_processing.api_service:Raw tool input from Claude for generate_financial_metric: type=<class 'dict'>
WARNING:app.routes.websocket:Correcting message_id from msg_011QKXYRhuzdwb3SWuexagGp to 05e56059-b3f3-410c-9b1d-2179c142e276 for tool_complete event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting tool_complete event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: tool_complete - tool_id=toolu_019A8hUzaMEwabkGDajQTszP, tool_name=generate_financial_metric
INFO:pdf_processing.api_service:Received 1 tool calls from streaming response
INFO:pdf_processing.api_service:Tool call: generate_financial_metric (ID: toolu_019A8hUzaMEwabkGDajQTszP)
INFO:pdf_processing.api_service:Processing streaming tool generate_financial_metric (ID: toolu_019A8hUzaMEwabkGDajQTszP)
INFO:pdf_processing.api_service:Tool generate_financial_metric (ID: toolu_019A8hUzaMEwabkGDajQTszP) - input type: <class 'dict'>
INFO:pdf_processing.api_service:Tool generate_financial_metric (ID: toolu_019A8hUzaMEwabkGDajQTszP) - dict input keys: ['category', 'name', 'period', 'value', 'unit', 'isEstimated']
INFO:utils.tool_processing:Processing generate_financial_metric (ID: toolu_019A8hUzaMEwabkGDajQTszP) - input type: <class 'dict'>
INFO:utils.tool_processing:Successfully processed financial metric: Non-Performing Assets Ratio
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting tool_complete event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: tool_complete - tool_id=toolu_019A8hUzaMEwabkGDajQTszP, tool_name=generate_financial_metric
INFO:pdf_processing.api_service:Streaming visualization analysis turn 4/5
INFO:pdf_processing.model_router:Using Sonnet for tools {'generate_table_data', 'generate_graph_data', 'generate_comparative_period', 'generate_financial_metric'} with 1739 tokens (haiku_calls=1, sonnet_calls=4)
INFO:pdf_processing.api_service:Executing tool interaction turn with model_router selected model: claude-3-5-sonnet-20241022, 4 tools available, streaming: True
INFO:httpx:HTTP Request: POST https://api.anthropic.com/v1/messages/count_tokens "HTTP/1.1 200 OK"
INFO:pdf_processing.api_service:Anthropic SDK estimated input tokens (streaming): 6682 (Custom estimate: 296)
INFO:pdf_processing.api_service:Throttling based on token count: 6682 (SDK count: 6682, Custom estimate: 296)
INFO:httpx:HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
WARNING:app.routes.websocket:Correcting message_id from msg_01LGZMYeWsk9YUwq6EW1Q4Nr to 05e56059-b3f3-410c-9b1d-2179c142e276 for message_start event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Filtering out duplicate message_start event for session default-user_0e205228-dd2a-4d5b-945d-5e53182fd87c_1750733825888_0e205228-dd2a-4d5b-945d-5e53182fd87c
WARNING:app.routes.websocket:Correcting message_id from msg_01LGZMYeWsk9YUwq6EW1Q4Nr to 05e56059-b3f3-410c-9b1d-2179c142e276 for tool_start event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting tool_start event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: tool_start - tool_id=toolu_01SkDtdHxsTVABZYXDkxSvqF, tool_name=generate_financial_metric
WARNING:app.routes.websocket:Correcting message_id from msg_01LGZMYeWsk9YUwq6EW1Q4Nr to 05e56059-b3f3-410c-9b1d-2179c142e276 for content_block_stop event
WARNING:app.routes.websocket:Correcting message_id from msg_01LGZMYeWsk9YUwq6EW1Q4Nr to 05e56059-b3f3-410c-9b1d-2179c142e276 for message_delta event
WARNING:app.routes.websocket:Correcting message_id from msg_01LGZMYeWsk9YUwq6EW1Q4Nr to 05e56059-b3f3-410c-9b1d-2179c142e276 for message_stop event
INFO:pdf_processing.api_service:Raw tool input from Claude for generate_financial_metric: type=<class 'dict'>
WARNING:app.routes.websocket:Correcting message_id from msg_01LGZMYeWsk9YUwq6EW1Q4Nr to 05e56059-b3f3-410c-9b1d-2179c142e276 for tool_complete event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting tool_complete event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: tool_complete - tool_id=toolu_01SkDtdHxsTVABZYXDkxSvqF, tool_name=generate_financial_metric
INFO:pdf_processing.api_service:Received 1 tool calls from streaming response
INFO:pdf_processing.api_service:Tool call: generate_financial_metric (ID: toolu_01SkDtdHxsTVABZYXDkxSvqF)
INFO:pdf_processing.api_service:Processing streaming tool generate_financial_metric (ID: toolu_01SkDtdHxsTVABZYXDkxSvqF)
INFO:pdf_processing.api_service:Tool generate_financial_metric (ID: toolu_01SkDtdHxsTVABZYXDkxSvqF) - input type: <class 'dict'>
INFO:pdf_processing.api_service:Tool generate_financial_metric (ID: toolu_01SkDtdHxsTVABZYXDkxSvqF) - dict input keys: ['category', 'name', 'period', 'value', 'unit', 'isEstimated']
INFO:utils.tool_processing:Processing generate_financial_metric (ID: toolu_01SkDtdHxsTVABZYXDkxSvqF) - input type: <class 'dict'>
INFO:utils.tool_processing:Successfully processed financial metric: Total Loan Growth (Annualized)
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting tool_complete event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: tool_complete - tool_id=toolu_01SkDtdHxsTVABZYXDkxSvqF, tool_name=generate_financial_metric
INFO:pdf_processing.api_service:Streaming visualization analysis turn 5/5
INFO:pdf_processing.model_router:Using Sonnet for tools {'generate_table_data', 'generate_graph_data', 'generate_comparative_period', 'generate_financial_metric'} with 1855 tokens (haiku_calls=1, sonnet_calls=5)
INFO:pdf_processing.api_service:Executing tool interaction turn with model_router selected model: claude-3-5-sonnet-20241022, 4 tools available, streaming: True
INFO:httpx:HTTP Request: POST https://api.anthropic.com/v1/messages/count_tokens "HTTP/1.1 200 OK"
INFO:pdf_processing.api_service:Anthropic SDK estimated input tokens (streaming): 6899 (Custom estimate: 296)
INFO:pdf_processing.api_service:Throttling based on token count: 6899 (SDK count: 6899, Custom estimate: 296)
INFO:httpx:HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
WARNING:app.routes.websocket:Correcting message_id from msg_018KgbauoQyzKQL52gPh3yQd to 05e56059-b3f3-410c-9b1d-2179c142e276 for message_start event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Filtering out duplicate message_start event for session default-user_0e205228-dd2a-4d5b-945d-5e53182fd87c_1750733825888_0e205228-dd2a-4d5b-945d-5e53182fd87c
WARNING:app.routes.websocket:Correcting message_id from msg_018KgbauoQyzKQL52gPh3yQd to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_start event
WARNING:app.routes.websocket:Correcting message_id from msg_018KgbauoQyzKQL52gPh3yQd to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 3 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 3
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 3 chars
INFO:services.conversation_service:üìù Content updated: 3 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 3 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018KgbauoQyzKQL52gPh3yQd to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 30 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 30
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 30 chars
INFO:services.conversation_service:üìù Content updated: 30 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 30 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018KgbauoQyzKQL52gPh3yQd to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 45 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 45
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 45 chars
INFO:services.conversation_service:üìù Content updated: 45 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 45 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018KgbauoQyzKQL52gPh3yQd to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 55 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 55
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 55 chars
INFO:services.conversation_service:üìù Content updated: 55 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 55 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018KgbauoQyzKQL52gPh3yQd to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 96 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 96
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 96 chars
INFO:services.conversation_service:üìù Content updated: 96 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 96 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018KgbauoQyzKQL52gPh3yQd to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 123 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 123
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 123 chars
INFO:services.conversation_service:üìù Content updated: 123 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 123 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018KgbauoQyzKQL52gPh3yQd to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 152 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 152
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 152 chars
INFO:services.conversation_service:üìù Content updated: 152 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 152 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018KgbauoQyzKQL52gPh3yQd to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 163 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 163
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 163 chars
INFO:services.conversation_service:üìù Content updated: 163 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 163 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018KgbauoQyzKQL52gPh3yQd to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 172 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 172
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 172 chars
INFO:services.conversation_service:üìù Content updated: 172 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 172 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018KgbauoQyzKQL52gPh3yQd to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 183 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 183
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 183 chars
INFO:services.conversation_service:üìù Content updated: 183 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 183 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018KgbauoQyzKQL52gPh3yQd to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 218 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 218
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 218 chars
INFO:services.conversation_service:üìù Content updated: 218 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 218 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018KgbauoQyzKQL52gPh3yQd to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 273 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 273
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 273 chars
INFO:services.conversation_service:üìù Content updated: 273 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 273 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018KgbauoQyzKQL52gPh3yQd to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 282 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 282
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 282 chars
INFO:services.conversation_service:üìù Content updated: 282 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 282 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018KgbauoQyzKQL52gPh3yQd to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 307 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 307
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 307 chars
INFO:services.conversation_service:üìù Content updated: 307 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 307 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018KgbauoQyzKQL52gPh3yQd to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 328 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 328
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 328 chars
INFO:services.conversation_service:üìù Content updated: 328 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 328 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018KgbauoQyzKQL52gPh3yQd to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 349 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 349
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 349 chars
INFO:services.conversation_service:üìù Content updated: 349 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 349 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018KgbauoQyzKQL52gPh3yQd to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 364 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 364
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 364 chars
INFO:services.conversation_service:üìù Content updated: 364 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 364 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018KgbauoQyzKQL52gPh3yQd to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 380 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 380
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 380 chars
INFO:services.conversation_service:üìù Content updated: 380 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 380 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018KgbauoQyzKQL52gPh3yQd to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 389 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 389
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 389 chars
INFO:services.conversation_service:üìù Content updated: 389 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 389 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018KgbauoQyzKQL52gPh3yQd to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 401 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 401
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 401 chars
INFO:services.conversation_service:üìù Content updated: 401 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 401 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018KgbauoQyzKQL52gPh3yQd to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 408 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 408
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 408 chars
INFO:services.conversation_service:üìù Content updated: 408 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 408 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018KgbauoQyzKQL52gPh3yQd to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 434 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 434
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 434 chars
INFO:services.conversation_service:üìù Content updated: 434 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 434 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018KgbauoQyzKQL52gPh3yQd to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 441 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 441
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 441 chars
INFO:services.conversation_service:üìù Content updated: 441 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 441 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018KgbauoQyzKQL52gPh3yQd to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 454 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 454
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 454 chars
INFO:services.conversation_service:üìù Content updated: 454 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 454 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018KgbauoQyzKQL52gPh3yQd to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 462 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 462
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 462 chars
INFO:services.conversation_service:üìù Content updated: 462 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 462 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018KgbauoQyzKQL52gPh3yQd to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 470 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 470
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 470 chars
INFO:services.conversation_service:üìù Content updated: 470 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 470 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018KgbauoQyzKQL52gPh3yQd to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 501 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 501
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 501 chars
INFO:services.conversation_service:üìù Content updated: 501 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 501 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018KgbauoQyzKQL52gPh3yQd to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 529 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 529
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 529 chars
INFO:services.conversation_service:üìù Content updated: 529 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 529 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018KgbauoQyzKQL52gPh3yQd to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 557 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 557
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 557 chars
INFO:services.conversation_service:üìù Content updated: 557 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 557 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018KgbauoQyzKQL52gPh3yQd to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 572 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 572
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 572 chars
INFO:services.conversation_service:üìù Content updated: 572 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 572 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018KgbauoQyzKQL52gPh3yQd to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 576 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 576
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 576 chars
INFO:services.conversation_service:üìù Content updated: 576 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 576 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018KgbauoQyzKQL52gPh3yQd to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 587 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 587
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 587 chars
INFO:services.conversation_service:üìù Content updated: 587 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 587 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018KgbauoQyzKQL52gPh3yQd to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 601 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 601
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 601 chars
INFO:services.conversation_service:üìù Content updated: 601 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 601 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018KgbauoQyzKQL52gPh3yQd to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 614 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 614
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 614 chars
INFO:services.conversation_service:üìù Content updated: 614 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 614 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018KgbauoQyzKQL52gPh3yQd to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 634 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 634
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 634 chars
INFO:services.conversation_service:üìù Content updated: 634 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 634 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018KgbauoQyzKQL52gPh3yQd to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 652 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 652
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 652 chars
INFO:services.conversation_service:üìù Content updated: 652 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 652 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018KgbauoQyzKQL52gPh3yQd to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 662 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 662
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 662 chars
INFO:services.conversation_service:üìù Content updated: 662 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 662 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018KgbauoQyzKQL52gPh3yQd to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 686 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 686
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 686 chars
INFO:services.conversation_service:üìù Content updated: 686 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 686 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018KgbauoQyzKQL52gPh3yQd to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 700 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 700
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 700 chars
INFO:services.conversation_service:üìù Content updated: 700 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 700 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018KgbauoQyzKQL52gPh3yQd to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 726 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 726
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 726 chars
INFO:services.conversation_service:üìù Content updated: 726 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 726 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018KgbauoQyzKQL52gPh3yQd to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 775 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 775
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 775 chars
INFO:services.conversation_service:üìù Content updated: 775 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 775 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018KgbauoQyzKQL52gPh3yQd to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 809 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 809
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 809 chars
INFO:services.conversation_service:üìù Content updated: 809 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 809 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018KgbauoQyzKQL52gPh3yQd to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 848 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 848
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 848 chars
INFO:services.conversation_service:üìù Content updated: 848 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 848 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018KgbauoQyzKQL52gPh3yQd to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 883 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 883
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 883 chars
INFO:services.conversation_service:üìù Content updated: 883 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 883 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018KgbauoQyzKQL52gPh3yQd to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 929 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 929
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 929 chars
INFO:services.conversation_service:üìù Content updated: 929 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 929 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018KgbauoQyzKQL52gPh3yQd to 05e56059-b3f3-410c-9b1d-2179c142e276 for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 930 chars
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 930
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 930 chars
INFO:services.conversation_service:üìù Content updated: 930 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 930 chars
WARNING:app.routes.websocket:Correcting message_id from msg_018KgbauoQyzKQL52gPh3yQd to 05e56059-b3f3-410c-9b1d-2179c142e276 for content_block_stop event
WARNING:app.routes.websocket:Correcting message_id from msg_018KgbauoQyzKQL52gPh3yQd to 05e56059-b3f3-410c-9b1d-2179c142e276 for message_delta event
WARNING:app.routes.websocket:Correcting message_id from msg_018KgbauoQyzKQL52gPh3yQd to 05e56059-b3f3-410c-9b1d-2179c142e276 for message_stop event
INFO:pdf_processing.api_service:Turn 5: Adding new content (930 chars)
INFO:pdf_processing.api_service:Streaming visualization analysis completed: no more tools
INFO:pdf_processing.api_service:Streaming visualization analysis completed: 1 charts, 1 tables, 2 metrics. Analysis text length: 1957
INFO:services.conversation_service:Current assistant message content length: 930
INFO:services.conversation_service:Analysis text length: 1957
INFO:services.conversation_service:üìù Using streaming content (930 chars)
INFO:repositories.conversation_repository:Updated and re-fetched message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:repositories.conversation_repository:Message content length: 930
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 930 chars
INFO:services.conversation_service:‚úÖ Database updated with final content: 930 chars
INFO:services.conversation_service:Sent message_update event for 05e56059-b3f3-410c-9b1d-2179c142e276 after streaming complete
INFO:services.conversation_service:DEBUG: result.get('metrics'): [{'category': 'Credit Quality', 'name': 'Non-Performing Assets Ratio', 'period': '2025Q1', 'value': 0.87, 'unit': '%', 'isEstimated': True}, {'category': 'Growth', 'name': 'Total Loan Growth (Annualized)', 'period': '2025Q1', 'value': 7.1, 'unit': '%', 'isEstimated': True}]
INFO:services.conversation_service:DEBUG: accumulated_metrics: [{'category': 'Credit Quality', 'name': 'Non-Performing Assets Ratio', 'period': '2025Q1', 'value': 0.87, 'unit': '%', 'isEstimated': True}, {'category': 'Growth', 'name': 'Total Loan Growth (Annualized)', 'period': '2025Q1', 'value': 7.1, 'unit': '%', 'isEstimated': True}]
INFO:services.conversation_service:Processing visualizations for conversation 0e205228-dd2a-4d5b-945d-5e53182fd87c: charts=1, tables=1, metrics=2
INFO:services.conversation_service:Processing chart: Loan Portfolio Composition Trends
INFO:services.conversation_service:Processing table: Credit Quality Metrics
INFO:services.conversation_service:Processing metric: Non-Performing Assets Ratio
INFO:services.conversation_service:Processing metric: Total Loan Growth (Annualized)
INFO:services.conversation_service:Storing 4 analysis blocks for streaming message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:services.conversation_service:ATOMIC: Using existing transaction for message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:services.conversation_service:ATOMIC: Refreshed message 05e56059-b3f3-410c-9b1d-2179c142e276 content length: 930 chars
INFO:repositories.conversation_repository:Added analysis block 'Loan Portfolio Composition Trends' (type: chart) to message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:services.conversation_service:ATOMIC: Stored analysis block 1/4: Loan Portfolio Composition Trends
INFO:repositories.conversation_repository:Added analysis block 'Credit Quality Metrics' (type: table) to message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:services.conversation_service:ATOMIC: Stored analysis block 2/4: Credit Quality Metrics
INFO:repositories.conversation_repository:Added analysis block 'Non-Performing Assets Ratio' (type: metric) to message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:services.conversation_service:ATOMIC: Stored analysis block 3/4: Non-Performing Assets Ratio
INFO:repositories.conversation_repository:Added analysis block 'Total Loan Growth (Annualized)' (type: metric) to message 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:services.conversation_service:ATOMIC: Stored analysis block 4/4: Total Loan Growth (Annualized)
INFO:services.conversation_service:ATOMIC: Transaction complete - message 05e56059-b3f3-410c-9b1d-2179c142e276 has 4 analysis blocks
INFO:services.conversation_service:Sending message_complete event for conversation 0e205228-dd2a-4d5b-945d-5e53182fd87c after analysis blocks stored
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting message_complete event with message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: Marking session default-user_0e205228-dd2a-4d5b-945d-5e53182fd87c_1750733825888_0e205228-dd2a-4d5b-945d-5e53182fd87c as inactive after message_complete
INFO:services.conversation_service:message_complete event sent for conversation 0e205228-dd2a-4d5b-945d-5e53182fd87c after analysis blocks
INFO:app.routes.websocket:WEBSOCKET_FLOW: Streaming message processing completed for message_id: 05e56059-b3f3-410c-9b1d-2179c142e276
INFO:app.routes.websocket:WEBSOCKET_FLOW: Conversation 0e205228-dd2a-4d5b-945d-5e53182fd87c processing finished successfully
INFO:app.routes.websocket:WEBSOCKET_FLOW: Cleaning up session default-user_0e205228-dd2a-4d5b-945d-5e53182fd87c_1750733825888_0e205228-dd2a-4d5b-945d-5e53182fd87c
INFO:services.conversation_service:Found ANTHROPIC_API_KEY in environment variables: sk-ant-a...TQAA
INFO:pdf_processing.api_service:ClaudeService initialized with model: claude-3-5-sonnet-20241022, PDF support, timeout=90s, max_retries=5, headers: {'anthropic-beta': 'token-efficient-tools-2025-02-19,files-api-2025-04-14,fine-grained-tool-streaming-2025-05-14'}
INFO:pdf_processing.langgraph_service:LangGraphService initialized with model: claude-3-5-sonnet-20241022
INFO:pdf_processing.api_service:LangGraph service successfully initialized
INFO:     127.0.0.1:52555 - "GET /api/conversation/message/05e56059-b3f3-410c-9b1d-2179c142e276 HTTP/1.1" 200 OK
INFO:services.conversation_service:Found ANTHROPIC_API_KEY in environment variables: sk-ant-a...TQAA
INFO:pdf_processing.api_service:ClaudeService initialized with model: claude-3-5-sonnet-20241022, PDF support, timeout=90s, max_retries=5, headers: {'anthropic-beta': 'token-efficient-tools-2025-02-19,files-api-2025-04-14,fine-grained-tool-streaming-2025-05-14'}
INFO:pdf_processing.langgraph_service:LangGraphService initialized with model: claude-3-5-sonnet-20241022
INFO:pdf_processing.api_service:LangGraph service successfully initialized
INFO:services.conversation_service:Found ANTHROPIC_API_KEY in environment variables: sk-ant-a...TQAA
INFO:pdf_processing.api_service:ClaudeService initialized with model: claude-3-5-sonnet-20241022, PDF support, timeout=90s, max_retries=5, headers: {'anthropic-beta': 'token-efficient-tools-2025-02-19,files-api-2025-04-14,fine-grained-tool-streaming-2025-05-14'}
INFO:pdf_processing.langgraph_service:LangGraphService initialized with model: claude-3-5-sonnet-20241022
INFO:pdf_processing.api_service:LangGraph service successfully initialized
INFO:pdf_processing.api_service:Sending request to Claude API with 1 messages, streaming: False
INFO:pdf_processing.api_service:Sending request to Claude API with 1 messages, streaming: False
INFO:httpx:HTTP Request: POST https://api.anthropic.com/v1/messages/count_tokens "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST https://api.anthropic.com/v1/messages/count_tokens "HTTP/1.1 200 OK"
INFO:pdf_processing.api_service:Anthropic SDK estimated input tokens (generate_response non-streaming): 465
INFO:pdf_processing.api_service:Anthropic SDK estimated input tokens (generate_response non-streaming): 465
INFO:httpx:HTTP Request: POST https://api.anthropic.com/v1/messages/count_tokens "HTTP/1.1 200 OK"
INFO:pdf_processing.api_service:Anthropic SDK estimated input tokens (non-streaming): 465 (Custom estimate: 465)
INFO:pdf_processing.api_service:Throttling based on token count: 465 (SDK count: 465, Custom estimate: 465)
INFO:httpx:HTTP Request: POST https://api.anthropic.com/v1/messages/count_tokens "HTTP/1.1 200 OK"
INFO:pdf_processing.api_service:Anthropic SDK estimated input tokens (non-streaming): 465 (Custom estimate: 465)
INFO:pdf_processing.api_service:Throttling based on token count: 465 (SDK count: 465, Custom estimate: 465)
INFO:httpx:HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
INFO:     127.0.0.1:52556 - "POST /api/conversation/0e205228-dd2a-4d5b-945d-5e53182fd87c/generate-followups?limit=3 HTTP/1.1" 200 OK
INFO:httpx:HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
INFO:     127.0.0.1:52555 - "POST /api/conversation/0e205228-dd2a-4d5b-945d-5e53182fd87c/generate-followups?limit=3 HTTP/1.1" 200 OK
</Backend_Logs>