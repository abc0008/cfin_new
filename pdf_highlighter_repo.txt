├── .github
    └── workflows
    │   └── nodejs.yml
├── .gitignore
├── LICENSE
├── README.md
├── biome.json
├── decs.d.ts
├── e2e
    └── page.spec.ts
├── example
    ├── index.html
    ├── src
    │   ├── App.tsx
    │   ├── Sidebar.tsx
    │   ├── Spinner.tsx
    │   ├── index.tsx
    │   ├── react-pdf-highlighter.ts
    │   ├── style
    │   │   ├── App.css
    │   │   └── Spinner.css
    │   └── test-highlights.ts
    ├── tsconfig.json
    └── vite.config.ts
├── package.json
├── patches
    └── pdfjs-dist+4.4.168.patch
├── playwright.config.ts
├── pnpm-lock.yaml
├── src
    ├── components
    │   ├── AreaHighlight.tsx
    │   ├── Highlight.tsx
    │   ├── HighlightLayer.tsx
    │   ├── MouseMonitor.tsx
    │   ├── MouseSelection.tsx
    │   ├── PdfHighlighter.tsx
    │   ├── PdfLoader.tsx
    │   ├── Popup.tsx
    │   ├── Tip.tsx
    │   └── TipContainer.tsx
    ├── index.ts
    ├── lib
    │   ├── coordinates.ts
    │   ├── get-area-as-png.ts
    │   ├── get-bounding-rect.ts
    │   ├── get-client-rects.ts
    │   ├── optimize-client-rects.ts
    │   └── pdfjs-dom.ts
    ├── style
    │   ├── AreaHighlight.module.css
    │   ├── Highlight.module.css
    │   ├── MouseSelection.module.css
    │   ├── PdfHighlighter.module.css
    │   ├── Tip.module.css
    │   ├── TipContainer.module.css
    │   ├── index.css
    │   └── pdf_viewer.css
    └── types.ts
├── tsconfig.json
└── vite.config.ts


/.github/workflows/nodejs.yml:
--------------------------------------------------------------------------------
 1 | name: Node CI
 2 | on:
 3 |   push:
 4 |     branches: [ main ]
 5 |   pull_request:
 6 |     branches: [ main ]
 7 | jobs:
 8 |   build:
 9 |     timeout-minutes: 60
10 |     runs-on: ubuntu-latest
11 |     steps:
12 |     - uses: actions/checkout@v4
13 |     - uses: actions/setup-node@v4
14 |       with:
15 |         node-version: lts/*
16 |     - name: Install dependencies
17 |       run: npm ci
18 |     - name: Install Playwright Browsers
19 |       run: npx playwright install --with-deps
20 |     - name: Run build
21 |       run: npm run build
22 |     - name: Run tests
23 |       run: npm test
24 |     - uses: actions/upload-artifact@v4
25 |       if: always()
26 |       with:
27 |         name: playwright-report
28 |         path: playwright-report/
29 |         retention-days: 30
30 |     - name: Deploy
31 |       if: ${{ github.ref == 'refs/heads/main' }}
32 |       uses: peaceiris/actions-gh-pages@v3
33 |       with:
34 |         github_token: ${{ secrets.GITHUB_TOKEN }}
35 |         publish_dir: ./example/dist
36 | 


--------------------------------------------------------------------------------
/.gitignore:
--------------------------------------------------------------------------------
 1 | node_modules
 2 | .DS_Store
 3 | dist
 4 | *.local
 5 | types
 6 | /test-results/
 7 | /playwright-report/
 8 | /blob-report/
 9 | /playwright/.cache/
10 | 


--------------------------------------------------------------------------------
/LICENSE:
--------------------------------------------------------------------------------
 1 | MIT License
 2 | 
 3 | Copyright (c) 2017 Artem Tyurin
 4 | 
 5 | Permission is hereby granted, free of charge, to any person obtaining a copy
 6 | of this software and associated documentation files (the "Software"), to deal
 7 | in the Software without restriction, including without limitation the rights
 8 | to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 9 | copies of the Software, and to permit persons to whom the Software is
10 | furnished to do so, subject to the following conditions:
11 | 
12 | The above copyright notice and this permission notice shall be included in all
13 | copies or substantial portions of the Software.
14 | 
15 | THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
16 | IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
17 | FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
18 | AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
19 | LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
20 | OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
21 | SOFTWARE.
22 | 


--------------------------------------------------------------------------------
/README.md:
--------------------------------------------------------------------------------
 1 | ☕️ [Buy me a coffee](https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=SC4D2NS8G2JJ8&source=url)
 2 | 
 3 | ![Node CI](https://github.com/agentcooper/react-pdf-highlighter/workflows/Node%20CI/badge.svg)
 4 | 
 5 | # react-pdf-highlighter
 6 | 
 7 | Set of React components for PDF annotation.
 8 | 
 9 | Features:
10 | 
11 | - Built on top of PDF.js
12 | - Text and image highlights
13 | - Popover text for highlights
14 | - Scroll to highlights
15 | 
16 | ## Importing CSS
17 | 
18 | The bundled CSS include the CSS for pdfjs.
19 | 
20 | ```tsx
21 | import "react-pdf-highlighter/dist/style.css";
22 | ```
23 | 
24 | ## Example
25 | 
26 | See demo https://agentcooper.github.io/react-pdf-highlighter/.
27 | 
28 | To run the example app locally:
29 | 
30 | ```bash
31 | npm install
32 | npm start
33 | ```
34 | 
35 | ## Install
36 | 
37 | ```bash
38 | npm install react-pdf-highlighter
39 | ```
40 | 
41 | ## How to use
42 | 
43 | See [`./example/src/App.tsx`](https://github.com/agentcooper/react-pdf-highlighter/blob/main/example/src/App.tsx) for the React component API example.
44 | 


--------------------------------------------------------------------------------
/biome.json:
--------------------------------------------------------------------------------
 1 | {
 2 |   "$schema": "https://biomejs.dev/schemas/1.8.3/schema.json",
 3 |   "formatter": {
 4 |     "enabled": true,
 5 |     "formatWithErrors": false,
 6 |     "indentStyle": "space",
 7 |     "indentWidth": 2,
 8 |     "lineEnding": "lf",
 9 |     "lineWidth": 80,
10 |     "attributePosition": "auto"
11 |   },
12 |   "organizeImports": { "enabled": true },
13 |   "linter": {
14 |     "enabled": true,
15 |     "rules": {
16 |       "recommended": true,
17 |       "a11y": {
18 |         "useKeyWithClickEvents": "off",
19 |         "useKeyWithMouseEvents": "off"
20 |       }
21 |     }
22 |   },
23 |   "vcs": {
24 |     "enabled": true,
25 |     "clientKind": "git"
26 |   }
27 | }
28 | 


--------------------------------------------------------------------------------
/decs.d.ts:
--------------------------------------------------------------------------------
1 | declare module "*.module.css" {
2 |   const classes: { [key: string]: string };
3 |   export default classes;
4 | }
5 | 


--------------------------------------------------------------------------------
/e2e/page.spec.ts:
--------------------------------------------------------------------------------
 1 | import { type Page, expect, test } from "@playwright/test";
 2 | 
 3 | test.beforeEach(async ({ page }) => {
 4 |   await page.goto("http://localhost:3003/react-pdf-highlighter/");
 5 | });
 6 | 
 7 | async function waitForHighlights(page: Page) {
 8 |   await page.waitForSelector(".Highlight .Highlight__part");
 9 | }
10 | 
11 | test("page loads", async ({ page }) => {
12 |   await expect(page).toHaveTitle("react-pdf-highlighter");
13 | });
14 | 
15 | test("should display highlights", async ({ page }) => {
16 |   await waitForHighlights(page);
17 | });
18 | 
19 | test("should display hover tips over highlights", async ({ page }) => {
20 |   await waitForHighlights(page);
21 |   await page.hover(".Highlight .Highlight__part");
22 |   await page.waitForSelector("#PdfHighlighter__tip-container");
23 |   await expect(page.getByText("🔥 Flow or TypeScript?")).toBeVisible();
24 | });
25 | 


--------------------------------------------------------------------------------
/example/index.html:
--------------------------------------------------------------------------------
 1 | <!DOCTYPE html>
 2 | <html lang="en">
 3 |   <head>
 4 |     <meta charset="UTF-8" />
 5 |     <meta name="viewport" content="width=device-width, initial-scale=1.0" />
 6 |     <title>react-pdf-highlighter</title>
 7 |   </head>
 8 |   <body>
 9 |     <div id="root"></div>
10 |     <script type="module" src="./src/index.tsx"></script>
11 |   </body>
12 | </html>
13 | 


--------------------------------------------------------------------------------
/example/src/App.tsx:
--------------------------------------------------------------------------------
  1 | import React, { Component } from "react";
  2 | 
  3 | import {
  4 |   AreaHighlight,
  5 |   Highlight,
  6 |   PdfHighlighter,
  7 |   PdfLoader,
  8 |   Popup,
  9 |   Tip,
 10 | } from "@endexai/react-pdf-highlighter-patch";
 11 | 
 12 | import type {
 13 |   Content,
 14 |   IHighlight,
 15 |   NewHighlight,
 16 |   ScaledPosition,
 17 | } from "@endexai/react-pdf-highlighter-patch";
 18 | 
 19 | import { Sidebar } from "./Sidebar";
 20 | import { Spinner } from "./Spinner";
 21 | import { testHighlights as _testHighlights } from "./test-highlights";
 22 | 
 23 | import "./style/App.css";
 24 | import "@endexai/react-pdf-highlighter-patch/dist/style.css";
 25 | 
 26 | const testHighlights: Record<string, Array<IHighlight>> = _testHighlights;
 27 | 
 28 | interface State {
 29 |   url: string;
 30 |   highlights: Array<IHighlight>;
 31 | }
 32 | 
 33 | const getNextId = () => String(Math.random()).slice(2);
 34 | 
 35 | const parseIdFromHash = () =>
 36 |   document.location.hash.slice("#highlight-".length);
 37 | 
 38 | const resetHash = () => {
 39 |   document.location.hash = "";
 40 | };
 41 | 
 42 | const HighlightPopup = ({
 43 |   comment,
 44 | }: {
 45 |   comment: { text: string; emoji: string };
 46 | }) =>
 47 |   comment.text ? (
 48 |     <div className="Highlight__popup">
 49 |       {comment.emoji} {comment.text}
 50 |     </div>
 51 |   ) : null;
 52 | 
 53 | const PRIMARY_PDF_URL = "https://arxiv.org/pdf/1708.08021";
 54 | const SECONDARY_PDF_URL = "https://arxiv.org/pdf/1604.02480";
 55 | 
 56 | const searchParams = new URLSearchParams(document.location.search);
 57 | 
 58 | const initialUrl = searchParams.get("url") || PRIMARY_PDF_URL;
 59 | 
 60 | // biome-ignore lint/complexity/noBannedTypes: Not sure what to use instead of {}
 61 | class App extends Component<{}, State> {
 62 |   state = {
 63 |     url: initialUrl,
 64 |     highlights: testHighlights[initialUrl]
 65 |       ? [...testHighlights[initialUrl]]
 66 |       : [],
 67 |   };
 68 | 
 69 |   resetHighlights = () => {
 70 |     this.setState({
 71 |       highlights: [],
 72 |     });
 73 |   };
 74 | 
 75 |   toggleDocument = () => {
 76 |     const newUrl =
 77 |       this.state.url === PRIMARY_PDF_URL ? SECONDARY_PDF_URL : PRIMARY_PDF_URL;
 78 | 
 79 |     this.setState({
 80 |       url: newUrl,
 81 |       highlights: testHighlights[newUrl] ? [...testHighlights[newUrl]] : [],
 82 |     });
 83 |   };
 84 | 
 85 |   scrollViewerTo = (highlight: IHighlight) => {};
 86 | 
 87 |   scrollToHighlightFromHash = () => {
 88 |     const highlight = this.getHighlightById(parseIdFromHash());
 89 | 
 90 |     if (highlight) {
 91 |       this.scrollViewerTo(highlight);
 92 |     }
 93 |   };
 94 | 
 95 |   componentDidMount() {
 96 |     window.addEventListener(
 97 |       "hashchange",
 98 |       this.scrollToHighlightFromHash,
 99 |       false,
100 |     );
101 |   }
102 | 
103 |   getHighlightById(id: string) {
104 |     const { highlights } = this.state;
105 | 
106 |     return highlights.find((highlight) => highlight.id === id);
107 |   }
108 | 
109 |   addHighlight(highlight: NewHighlight) {
110 |     const { highlights } = this.state;
111 | 
112 |     console.log("Saving highlight", highlight);
113 | 
114 |     this.setState({
115 |       highlights: [{ ...highlight, id: getNextId() }, ...highlights],
116 |     });
117 |   }
118 | 
119 |   updateHighlight(
120 |     highlightId: string,
121 |     position: Partial<ScaledPosition>,
122 |     content: Partial<Content>,
123 |   ) {
124 |     console.log("Updating highlight", highlightId, position, content);
125 | 
126 |     this.setState({
127 |       highlights: this.state.highlights.map((h) => {
128 |         const {
129 |           id,
130 |           position: originalPosition,
131 |           content: originalContent,
132 |           ...rest
133 |         } = h;
134 |         return id === highlightId
135 |           ? {
136 |               id,
137 |               position: { ...originalPosition, ...position },
138 |               content: { ...originalContent, ...content },
139 |               ...rest,
140 |             }
141 |           : h;
142 |       }),
143 |     });
144 |   }
145 | 
146 |   render() {
147 |     const { url, highlights } = this.state;
148 | 
149 |     return (
150 |       <div className="App" style={{ display: "flex", height: "100vh" }}>
151 |         <Sidebar
152 |           highlights={highlights}
153 |           resetHighlights={this.resetHighlights}
154 |           toggleDocument={this.toggleDocument}
155 |         />
156 |         <div
157 |           style={{
158 |             height: "100vh",
159 |             width: "75vw",
160 |             position: "relative",
161 |           }}
162 |         >
163 |           <PdfLoader url={url} beforeLoad={<Spinner />}>
164 |             {(pdfDocument) => (
165 |               <PdfHighlighter
166 |                 pdfDocument={pdfDocument}
167 |                 enableAreaSelection={(event) => event.altKey}
168 |                 onScrollChange={resetHash}
169 |                 // pdfScaleValue="page-width"
170 |                 scrollRef={(scrollTo) => {
171 |                   this.scrollViewerTo = scrollTo;
172 | 
173 |                   this.scrollToHighlightFromHash();
174 |                 }}
175 |                 onSelectionFinished={(
176 |                   position,
177 |                   content,
178 |                   hideTipAndSelection,
179 |                   transformSelection,
180 |                 ) => (
181 |                   <Tip
182 |                     onOpen={transformSelection}
183 |                     onConfirm={(comment) => {
184 |                       this.addHighlight({ content, position, comment });
185 | 
186 |                       hideTipAndSelection();
187 |                     }}
188 |                   />
189 |                 )}
190 |                 highlightTransform={(
191 |                   highlight,
192 |                   index,
193 |                   setTip,
194 |                   hideTip,
195 |                   viewportToScaled,
196 |                   screenshot,
197 |                   isScrolledTo,
198 |                 ) => {
199 |                   const isTextHighlight = !highlight.content?.image;
200 | 
201 |                   const component = isTextHighlight ? (
202 |                     <Highlight
203 |                       isScrolledTo={isScrolledTo}
204 |                       position={highlight.position}
205 |                       comment={highlight.comment}
206 |                     />
207 |                   ) : (
208 |                     <AreaHighlight
209 |                       isScrolledTo={isScrolledTo}
210 |                       highlight={highlight}
211 |                       onChange={(boundingRect) => {
212 |                         this.updateHighlight(
213 |                           highlight.id,
214 |                           { boundingRect: viewportToScaled(boundingRect) },
215 |                           { image: screenshot(boundingRect) },
216 |                         );
217 |                       }}
218 |                     />
219 |                   );
220 | 
221 |                   return (
222 |                     <Popup
223 |                       popupContent={<HighlightPopup {...highlight} />}
224 |                       onMouseOver={(popupContent) =>
225 |                         setTip(highlight, (highlight) => popupContent)
226 |                       }
227 |                       onMouseOut={hideTip}
228 |                       key={index}
229 |                     >
230 |                       {component}
231 |                     </Popup>
232 |                   );
233 |                 }}
234 |                 highlights={highlights}
235 |               />
236 |             )}
237 |           </PdfLoader>
238 |         </div>
239 |       </div>
240 |     );
241 |   }
242 | }
243 | 
244 | export default App;
245 | 


--------------------------------------------------------------------------------
/example/src/Sidebar.tsx:
--------------------------------------------------------------------------------
 1 | import React from "react";
 2 | import type { IHighlight } from "./react-pdf-highlighter";
 3 | 
 4 | interface Props {
 5 |   highlights: Array<IHighlight>;
 6 |   resetHighlights: () => void;
 7 |   toggleDocument: () => void;
 8 | }
 9 | 
10 | const updateHash = (highlight: IHighlight) => {
11 |   document.location.hash = `highlight-${highlight.id}`;
12 | };
13 | 
14 | declare const APP_VERSION: string;
15 | 
16 | export function Sidebar({
17 |   highlights,
18 |   toggleDocument,
19 |   resetHighlights,
20 | }: Props) {
21 |   return (
22 |     <div className="sidebar" style={{ width: "25vw" }}>
23 |       <div className="description" style={{ padding: "1rem" }}>
24 |         <h2 style={{ marginBottom: "1rem" }}>
25 |           react-pdf-highlighter {APP_VERSION}
26 |         </h2>
27 | 
28 |         <p style={{ fontSize: "0.7rem" }}>
29 |           <a href="https://github.com/agentcooper/react-pdf-highlighter">
30 |             Open in GitHub
31 |           </a>
32 |         </p>
33 | 
34 |         <p>
35 |           <small>
36 |             To create area highlight hold ⌥ Option key (Alt), then click and
37 |             drag.
38 |           </small>
39 |         </p>
40 |       </div>
41 | 
42 |       <ul className="sidebar__highlights">
43 |         {highlights.map((highlight, index) => (
44 |           <li
45 |             // biome-ignore lint/suspicious/noArrayIndexKey: This is an example app
46 |             key={index}
47 |             className="sidebar__highlight"
48 |             onClick={() => {
49 |               updateHash(highlight);
50 |             }}
51 |           >
52 |             <div>
53 |               <strong>{highlight.comment.text}</strong>
54 |               {highlight.content.text ? (
55 |                 <blockquote style={{ marginTop: "0.5rem" }}>
56 |                   {`${highlight.content.text.slice(0, 90).trim()}…`}
57 |                 </blockquote>
58 |               ) : null}
59 |               {highlight.content.image ? (
60 |                 <div
61 |                   className="highlight__image"
62 |                   style={{ marginTop: "0.5rem" }}
63 |                 >
64 |                   <img src={highlight.content.image} alt={"Screenshot"} />
65 |                 </div>
66 |               ) : null}
67 |             </div>
68 |             <div className="highlight__location">
69 |               Page {highlight.position.pageNumber}
70 |             </div>
71 |           </li>
72 |         ))}
73 |       </ul>
74 |       <div style={{ padding: "1rem" }}>
75 |         <button type="button" onClick={toggleDocument}>
76 |           Toggle PDF document
77 |         </button>
78 |       </div>
79 |       {highlights.length > 0 ? (
80 |         <div style={{ padding: "1rem" }}>
81 |           <button type="button" onClick={resetHighlights}>
82 |             Reset highlights
83 |           </button>
84 |         </div>
85 |       ) : null}
86 |     </div>
87 |   );
88 | }
89 | 


--------------------------------------------------------------------------------
/example/src/Spinner.tsx:
--------------------------------------------------------------------------------
 1 | import React from "react";
 2 | 
 3 | import "./style/Spinner.css";
 4 | 
 5 | export function Spinner() {
 6 |   return (
 7 |     <div
 8 |       style={{
 9 |         display: "flex",
10 |         alignItems: "center",
11 |         height: "100vh",
12 |       }}
13 |     >
14 |       <div className="sk-fading-circle">
15 |         <div className="sk-circle1 sk-circle" />
16 |         <div className="sk-circle2 sk-circle" />
17 |         <div className="sk-circle3 sk-circle" />
18 |         <div className="sk-circle4 sk-circle" />
19 |         <div className="sk-circle5 sk-circle" />
20 |         <div className="sk-circle6 sk-circle" />
21 |         <div className="sk-circle7 sk-circle" />
22 |         <div className="sk-circle8 sk-circle" />
23 |         <div className="sk-circle9 sk-circle" />
24 |         <div className="sk-circle10 sk-circle" />
25 |         <div className="sk-circle11 sk-circle" />
26 |         <div className="sk-circle12 sk-circle" />
27 |       </div>
28 |     </div>
29 |   );
30 | }
31 | 


--------------------------------------------------------------------------------
/example/src/index.tsx:
--------------------------------------------------------------------------------
1 | import React from "react";
2 | import { createRoot } from "react-dom/client";
3 | import App from "./App";
4 | 
5 | // biome-ignore lint/style/noNonNullAssertion: Root element must be there
6 | const container = document.getElementById("root")!;
7 | const root = createRoot(container);
8 | root.render(<App />);
9 | 


--------------------------------------------------------------------------------
/example/src/react-pdf-highlighter.ts:
--------------------------------------------------------------------------------
1 | export * from "../../src";
2 | 


--------------------------------------------------------------------------------
/example/src/style/App.css:
--------------------------------------------------------------------------------
 1 | body {
 2 |   margin: 0;
 3 |   font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen",
 4 |     "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue",
 5 |     sans-serif;
 6 |   background-color: #ffffff;
 7 |   color: #fff;
 8 | }
 9 | 
10 | .sidebar {
11 |   overflow: auto;
12 |   color: rgb(119, 119, 119);
13 |   background: linear-gradient(
14 |     rgb(249, 248, 247),
15 |     rgb(251, 250, 248) 46px,
16 |     rgb(251, 251, 249) 120px,
17 |     rgb(248, 247, 245) 35%,
18 |     rgb(249, 248, 246)
19 |   );
20 | }
21 | 
22 | .sidebar__highlights {
23 |   list-style: "none";
24 |   padding: 0;
25 | }
26 | 
27 | .highlight__location {
28 |   margin-top: 0.5rem;
29 |   text-align: right;
30 |   font-size: 10px;
31 | }
32 | 
33 | .highlight__image {
34 |   overflow: auto;
35 |   max-width: 300px;
36 |   border: 1px dashed;
37 | }
38 | 
39 | .sidebar__highlight {
40 |   padding: 1rem;
41 |   cursor: pointer;
42 |   transition: background 140ms ease-in;
43 |   border-bottom: 1px solid rgb(119, 119, 119);
44 | }
45 | 
46 | .sidebar__highlight:hover {
47 |   background: rgba(58, 56, 52, 0.08);
48 | }
49 | 
50 | a {
51 |   color: #d35400;
52 | }
53 | 
54 | blockquote {
55 |   padding: 0;
56 |   margin: 0;
57 |   quotes: "\201c" "\201d";
58 | }
59 | blockquote:before {
60 |   content: open-quote;
61 | }
62 | blockquote:after {
63 |   content: close-quote;
64 | }
65 | 


--------------------------------------------------------------------------------
/example/src/style/Spinner.css:
--------------------------------------------------------------------------------
  1 | .sk-fading-circle {
  2 |   margin: 100px auto;
  3 |   width: 40px;
  4 |   height: 40px;
  5 |   position: relative;
  6 | }
  7 | 
  8 | .sk-fading-circle .sk-circle {
  9 |   width: 100%;
 10 |   height: 100%;
 11 |   position: absolute;
 12 |   left: 0;
 13 |   top: 0;
 14 | }
 15 | 
 16 | .sk-fading-circle .sk-circle:before {
 17 |   content: "";
 18 |   display: block;
 19 |   margin: 0 auto;
 20 |   width: 15%;
 21 |   height: 15%;
 22 |   background-color: #333;
 23 |   border-radius: 100%;
 24 |   -webkit-animation: sk-circleFadeDelay 1.2s infinite ease-in-out both;
 25 |   animation: sk-circleFadeDelay 1.2s infinite ease-in-out both;
 26 | }
 27 | .sk-fading-circle .sk-circle2 {
 28 |   -webkit-transform: rotate(30deg);
 29 |   -ms-transform: rotate(30deg);
 30 |   transform: rotate(30deg);
 31 | }
 32 | .sk-fading-circle .sk-circle3 {
 33 |   -webkit-transform: rotate(60deg);
 34 |   -ms-transform: rotate(60deg);
 35 |   transform: rotate(60deg);
 36 | }
 37 | .sk-fading-circle .sk-circle4 {
 38 |   -webkit-transform: rotate(90deg);
 39 |   -ms-transform: rotate(90deg);
 40 |   transform: rotate(90deg);
 41 | }
 42 | .sk-fading-circle .sk-circle5 {
 43 |   -webkit-transform: rotate(120deg);
 44 |   -ms-transform: rotate(120deg);
 45 |   transform: rotate(120deg);
 46 | }
 47 | .sk-fading-circle .sk-circle6 {
 48 |   -webkit-transform: rotate(150deg);
 49 |   -ms-transform: rotate(150deg);
 50 |   transform: rotate(150deg);
 51 | }
 52 | .sk-fading-circle .sk-circle7 {
 53 |   -webkit-transform: rotate(180deg);
 54 |   -ms-transform: rotate(180deg);
 55 |   transform: rotate(180deg);
 56 | }
 57 | .sk-fading-circle .sk-circle8 {
 58 |   -webkit-transform: rotate(210deg);
 59 |   -ms-transform: rotate(210deg);
 60 |   transform: rotate(210deg);
 61 | }
 62 | .sk-fading-circle .sk-circle9 {
 63 |   -webkit-transform: rotate(240deg);
 64 |   -ms-transform: rotate(240deg);
 65 |   transform: rotate(240deg);
 66 | }
 67 | .sk-fading-circle .sk-circle10 {
 68 |   -webkit-transform: rotate(270deg);
 69 |   -ms-transform: rotate(270deg);
 70 |   transform: rotate(270deg);
 71 | }
 72 | .sk-fading-circle .sk-circle11 {
 73 |   -webkit-transform: rotate(300deg);
 74 |   -ms-transform: rotate(300deg);
 75 |   transform: rotate(300deg);
 76 | }
 77 | .sk-fading-circle .sk-circle12 {
 78 |   -webkit-transform: rotate(330deg);
 79 |   -ms-transform: rotate(330deg);
 80 |   transform: rotate(330deg);
 81 | }
 82 | .sk-fading-circle .sk-circle2:before {
 83 |   -webkit-animation-delay: -1.1s;
 84 |   animation-delay: -1.1s;
 85 | }
 86 | .sk-fading-circle .sk-circle3:before {
 87 |   -webkit-animation-delay: -1s;
 88 |   animation-delay: -1s;
 89 | }
 90 | .sk-fading-circle .sk-circle4:before {
 91 |   -webkit-animation-delay: -0.9s;
 92 |   animation-delay: -0.9s;
 93 | }
 94 | .sk-fading-circle .sk-circle5:before {
 95 |   -webkit-animation-delay: -0.8s;
 96 |   animation-delay: -0.8s;
 97 | }
 98 | .sk-fading-circle .sk-circle6:before {
 99 |   -webkit-animation-delay: -0.7s;
100 |   animation-delay: -0.7s;
101 | }
102 | .sk-fading-circle .sk-circle7:before {
103 |   -webkit-animation-delay: -0.6s;
104 |   animation-delay: -0.6s;
105 | }
106 | .sk-fading-circle .sk-circle8:before {
107 |   -webkit-animation-delay: -0.5s;
108 |   animation-delay: -0.5s;
109 | }
110 | .sk-fading-circle .sk-circle9:before {
111 |   -webkit-animation-delay: -0.4s;
112 |   animation-delay: -0.4s;
113 | }
114 | .sk-fading-circle .sk-circle10:before {
115 |   -webkit-animation-delay: -0.3s;
116 |   animation-delay: -0.3s;
117 | }
118 | .sk-fading-circle .sk-circle11:before {
119 |   -webkit-animation-delay: -0.2s;
120 |   animation-delay: -0.2s;
121 | }
122 | .sk-fading-circle .sk-circle12:before {
123 |   -webkit-animation-delay: -0.1s;
124 |   animation-delay: -0.1s;
125 | }
126 | 
127 | @-webkit-keyframes sk-circleFadeDelay {
128 |   0%,
129 |   39%,
130 |   100% {
131 |     opacity: 0;
132 |   }
133 |   40% {
134 |     opacity: 1;
135 |   }
136 | }
137 | 
138 | @keyframes sk-circleFadeDelay {
139 |   0%,
140 |   39%,
141 |   100% {
142 |     opacity: 0;
143 |   }
144 |   40% {
145 |     opacity: 1;
146 |   }
147 | }
148 | 


--------------------------------------------------------------------------------
/example/src/test-highlights.ts:
--------------------------------------------------------------------------------
  1 | export const testHighlights = {
  2 |   "https://arxiv.org/pdf/1708.08021": [
  3 |     {
  4 |       content: {
  5 |         text: " Type Checking for JavaScript",
  6 |       },
  7 |       position: {
  8 |         boundingRect: {
  9 |           x1: 255.73419189453125,
 10 |           y1: 139.140625,
 11 |           x2: 574.372314453125,
 12 |           y2: 165.140625,
 13 |           width: 809.9999999999999,
 14 |           height: 1200,
 15 |         },
 16 |         rects: [
 17 |           {
 18 |             x1: 255.73419189453125,
 19 |             y1: 139.140625,
 20 |             x2: 574.372314453125,
 21 |             y2: 165.140625,
 22 |             width: 809.9999999999999,
 23 |             height: 1200,
 24 |           },
 25 |         ],
 26 |         pageNumber: 1,
 27 |       },
 28 |       comment: {
 29 |         text: "Flow or TypeScript?",
 30 |         emoji: "🔥",
 31 |       },
 32 |       id: "8245652131754351",
 33 |     },
 34 |     {
 35 |       content: {
 36 |         text: " millions of lines of code atFacebookevery day",
 37 |       },
 38 |       position: {
 39 |         boundingRect: {
 40 |           x1: 353.080810546875,
 41 |           y1: 346.390625,
 42 |           x2: 658.6533203125,
 43 |           y2: 363.390625,
 44 |           width: 809.9999999999999,
 45 |           height: 1200,
 46 |         },
 47 |         rects: [
 48 |           {
 49 |             x1: 353.080810546875,
 50 |             y1: 346.390625,
 51 |             x2: 658.6533203125,
 52 |             y2: 363.390625,
 53 |             width: 809.9999999999999,
 54 |             height: 1200,
 55 |           },
 56 |         ],
 57 |         pageNumber: 1,
 58 |       },
 59 |       comment: {
 60 |         text: "impressive",
 61 |         emoji: "",
 62 |       },
 63 |       id: "812807243318874",
 64 |     },
 65 |     {
 66 |       content: {
 67 |         text: "This fuels a fast edit-refresh cycle, whichpromises an immersive coding experience that is quite appealing to creative developers.",
 68 |       },
 69 |       position: {
 70 |         boundingRect: {
 71 |           x1: 76.375,
 72 |           y1: 666.21875,
 73 |           x2: 733.61328125,
 74 |           y2: 706.140625,
 75 |           width: 809.9999999999999,
 76 |           height: 1200,
 77 |           pageNumber: 1,
 78 |         },
 79 |         rects: [
 80 |           {
 81 |             x1: 459.168701171875,
 82 |             y1: 666.21875,
 83 |             x2: 733.61328125,
 84 |             y2: 686.21875,
 85 |             width: 809.9999999999999,
 86 |             height: 1200,
 87 |             pageNumber: 1,
 88 |           },
 89 |           {
 90 |             x1: 76.375,
 91 |             y1: 686.140625,
 92 |             x2: 671.4954833984375,
 93 |             y2: 706.140625,
 94 |             width: 809.9999999999999,
 95 |             height: 1200,
 96 |             pageNumber: 1,
 97 |           },
 98 |         ],
 99 |         pageNumber: 1,
100 |       },
101 |       comment: {
102 |         text: "immersive coding experience!",
103 |         emoji: "",
104 |       },
105 |       id: "2599712881412761",
106 |     },
107 |     {
108 |       content: {
109 |         image:
110 |           "data:image/png;base64,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",
111 |       },
112 |       position: {
113 |         boundingRect: {
114 |           x1: 410.8125,
115 |           y1: 133,
116 |           x2: 744.8125,
117 |           y2: 261,
118 |           width: 809.9999999999999,
119 |           height: 1200,
120 |           pageNumber: 3,
121 |         },
122 |         rects: [],
123 |         pageNumber: 3,
124 |       },
125 |       comment: {
126 |         text: "lisp!",
127 |         emoji: "😱",
128 |       },
129 |       id: "9120567402727258",
130 |     },
131 |     {
132 |       content: {
133 |         text: "We consider a minimal subset of JavaScript that includes functions, mutable variables, primitivevalues and records",
134 |       },
135 |       position: {
136 |         boundingRect: {
137 |           x1: 75.578125,
138 |           y1: 1039.3125,
139 |           x2: 733.607421875,
140 |           y2: 1079.234375,
141 |           width: 809.9999999999999,
142 |           height: 1200,
143 |           pageNumber: 4,
144 |         },
145 |         rects: [
146 |           {
147 |             x1: 75.578125,
148 |             y1: 1039.3125,
149 |             x2: 733.607421875,
150 |             y2: 1059.3125,
151 |             width: 809.9999999999999,
152 |             height: 1200,
153 |             pageNumber: 4,
154 |           },
155 |           {
156 |             x1: 75.953125,
157 |             y1: 1059.234375,
158 |             x2: 206.6217041015625,
159 |             y2: 1079.234375,
160 |             width: 809.9999999999999,
161 |             height: 1200,
162 |             pageNumber: 4,
163 |           },
164 |         ],
165 |         pageNumber: 4,
166 |       },
167 |       comment: {
168 |         text: "",
169 |         emoji: "",
170 |       },
171 |       id: "32839601376722394",
172 |     },
173 |     {
174 |       content: {
175 |         image:
176 |           "data:image/png;base64,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",
177 |       },
178 |       position: {
179 |         boundingRect: {
180 |           x1: 65.8125,
181 |           y1: 133,
182 |           x2: 406.8125,
183 |           y2: 417,
184 |           width: 809.9999999999999,
185 |           height: 1200,
186 |           pageNumber: 24,
187 |         },
188 |         rects: [],
189 |         pageNumber: 24,
190 |       },
191 |       comment: {
192 |         text: "",
193 |         emoji: "",
194 |       },
195 |       id: "46570518065661615",
196 |     },
197 |     {
198 |       id: "46570518065661616",
199 |       comment: { text: "Fast type checking?!?!", emoji: "😱" },
200 |       content: {
201 |         text: "Fast type checking.The key toFlow’s speed is modularity: the ability to break the analysis intofile-sized chunks that can be assembled later. Fortunately, JavaScript is already written using files4Avik Chaudhuri, Panagiotis Vekris, Sam Goldman, Marshall Roch, and Gabriel Levias modules, so we modularize our analysis simply by asking that modules have explicitly typedsignatures. (We still infer types for the vast majority of code “local” to modules.) Coincidentally,developers consider this good software engineering practice anyway.",
202 |       },
203 |       position: {
204 |         boundingRect: {
205 |           x1: 76.375,
206 |           y1: 1058.4271240234375,
207 |           x2: 733.626220703125,
208 |           y2: 1097.0208740234375,
209 |           width: 809.9999999999999,
210 |           height: 1200,
211 |           pageNumber: 3,
212 |         },
213 |         rects: [
214 |           {
215 |             x1: 75.989501953125,
216 |             y1: 96.9896240234375,
217 |             x2: 85.2291259765625,
218 |             y2: 115.65625,
219 |             width: 809.9999999999999,
220 |             height: 1200,
221 |             pageNumber: 4,
222 |           },
223 |           {
224 |             x1: 167.583251953125,
225 |             y1: 96.9896240234375,
226 |             x2: 733.6123046875,
227 |             y2: 115.65625,
228 |             width: 809.9999999999999,
229 |             height: 1200,
230 |             pageNumber: 4,
231 |           },
232 |           {
233 |             x1: 76.375,
234 |             y1: 142.82293701171875,
235 |             x2: 733.613525390625,
236 |             y2: 161.4896240234375,
237 |             width: 809.9999999999999,
238 |             height: 1200,
239 |             pageNumber: 4,
240 |           },
241 |           {
242 |             x1: 76.375,
243 |             y1: 162.7396240234375,
244 |             x2: 735.43798828125,
245 |             y2: 181.40625,
246 |             width: 809.9999999999999,
247 |             height: 1200,
248 |             pageNumber: 4,
249 |           },
250 |           {
251 |             x1: 76.375,
252 |             y1: 182.66668701171875,
253 |             x2: 544.7579345703125,
254 |             y2: 201.3333740234375,
255 |             width: 809.9999999999999,
256 |             height: 1200,
257 |             pageNumber: 4,
258 |           },
259 |           {
260 |             x1: 92.9791259765625,
261 |             y1: 1058.4271240234375,
262 |             x2: 733.619140625,
263 |             y2: 1077.09375,
264 |             width: 809.9999999999999,
265 |             height: 1200,
266 |             pageNumber: 3,
267 |           },
268 |           {
269 |             x1: 76.375,
270 |             y1: 1078.3541870117188,
271 |             x2: 733.626220703125,
272 |             y2: 1097.0208740234375,
273 |             width: 809.9999999999999,
274 |             height: 1200,
275 |             pageNumber: 3,
276 |           },
277 |         ],
278 |         pageNumber: 3,
279 |       },
280 |     },
281 |   ],
282 |   "https://arxiv.org/pdf/1604.02480": [
283 |     {
284 |       content: {
285 |         text: "SSA",
286 |       },
287 |       position: {
288 |         boundingRect: {
289 |           x1: 816.4599609375,
290 |           y1: 360.1875,
291 |           x2: 848.4677734375,
292 |           y2: 380.1875,
293 |           width: 1019.9999999999999,
294 |           height: 1319.9999999999998,
295 |           pageNumber: 1,
296 |         },
297 |         rects: [
298 |           {
299 |             x1: 816.4599609375,
300 |             y1: 360.1875,
301 |             x2: 848.4677734375,
302 |             y2: 380.1875,
303 |             width: 1019.9999999999999,
304 |             height: 1319.9999999999998,
305 |             pageNumber: 1,
306 |           },
307 |         ],
308 |         pageNumber: 1,
309 |       },
310 |       comment: {
311 |         text: "Static Single Assignment",
312 |         emoji: "😎",
313 |       },
314 |       id: "29668244118038056",
315 |     },
316 |   ],
317 | };
318 | 


--------------------------------------------------------------------------------
/example/tsconfig.json:
--------------------------------------------------------------------------------
 1 | {
 2 |   "extends": "../tsconfig.json",
 3 |   "compilerOptions": {
 4 |     "target": "ESNext",
 5 |     "module": "ESNext",
 6 |     "lib": ["ESNext", "DOM"],
 7 |     "noEmit": true
 8 |   },
 9 |   "include": ["./src", "../decs.d.ts"]
10 | }
11 | 


--------------------------------------------------------------------------------
/example/vite.config.ts:
--------------------------------------------------------------------------------
 1 | import react from "@vitejs/plugin-react";
 2 | import { defineConfig } from "vite";
 3 | 
 4 | export default defineConfig({
 5 |   base: "/react-pdf-highlighter/",
 6 |   build: {
 7 |     outDir: "dist",
 8 |   },
 9 |   plugins: [react()],
10 |   server: {
11 |     port: 3003,
12 |   },
13 |   define: {
14 |     APP_VERSION: JSON.stringify(process.env.npm_package_version),
15 |   },
16 | });
17 | 


--------------------------------------------------------------------------------
/package.json:
--------------------------------------------------------------------------------
 1 | {
 2 |   "name": "@endexai/react-pdf-highlighter-patch",
 3 |   "version": "8.1.7",
 4 |   "description": "Set of React components for PDF annotation",
 5 |   "author": "Artem Tyurin <artem.tyurin@gmail.com>",
 6 |   "license": "MIT",
 7 |   "keywords": ["pdf", "highlight", "annotator", "react-component"],
 8 |   "files": ["dist", "README.md", "LICENSE"],
 9 |   "type": "module",
10 |   "main": "./dist/index.cjs.js",
11 |   "module": "./dist/index.es.js",
12 |   "types": "./dist/index.d.ts",
13 |   "exports": {
14 |     ".": {
15 |       "import": "./dist/index.es.js",
16 |       "require": "./dist/index.umd.js",
17 |       "types": "./dist/index.d.ts"
18 |     },
19 |     "./dist/style.css": "./dist/style.css"
20 |   },
21 |   "scripts": {
22 |     "start": "npm run dev",
23 |     "dev": "vite build && (cd ./example && vite)",
24 |     "build": "npm run clean && vite build",
25 |     "build:example": "vite build && (cd ./example && vite build)",
26 |     "test": "npm run build && npm run lint && npm run test:e2e",
27 |     "test:e2e": "playwright test",
28 |     "format": "biome format --write",
29 |     "lint": "biome check",
30 |     "clean": "rm -rf dist"
31 |   },
32 |   "peerDependencies": {
33 |     "react": ">=19.0.0",
34 |     "react-dom": ">=19.0.0"
35 |   },
36 |   "dependencies": {
37 |     "@endexai/react-pdf-highlighter-patch": "workspace:8.1.7",
38 |     "debounce": "^2.1.0",
39 |     "pdfjs-dist": "4.9.155",
40 |     "react-rnd": "^10.4.13"
41 |   },
42 |   "repository": {
43 |     "type": "git",
44 |     "url": "git+https://github.com/agentcooper/react-pdf-highlighter.git"
45 |   },
46 |   "bugs": {
47 |     "url": "https://github.com/agentcooper/react-pdf-highlighter/issues"
48 |   },
49 |   "devDependencies": {
50 |     "@biomejs/biome": "1.8.3",
51 |     "@playwright/test": "^1.45.1",
52 |     "@rollup/plugin-typescript": "^11.1.6",
53 |     "@types/node": "^20.14.10",
54 |     "@types/react": "^19.0.0",
55 |     "@types/react-dom": "^19.0.0",
56 |     "@vitejs/plugin-react": "^4.3.1",
57 |     "playwright": "^1.45.1",
58 |     "postcss-import": "^16.1.0",
59 |     "typescript": "^5.5.3",
60 |     "vite": "^5.3.3"
61 |   },
62 |   "directories": {
63 |     "example": "example"
64 |   },
65 |   "homepage": "https://github.com/agentcooper/react-pdf-highlighter#readme",
66 |   "resolutions": {
67 |     "re-resizable": "6.10.3"
68 |   }
69 | }
70 | 


--------------------------------------------------------------------------------
/patches/pdfjs-dist+4.4.168.patch:
--------------------------------------------------------------------------------
  1 | diff --git a/node_modules/pdfjs-dist/build/pdf.mjs b/node_modules/pdfjs-dist/build/pdf.mjs
  2 | index 7906d1a..4875738 100644
  3 | --- a/node_modules/pdfjs-dist/build/pdf.mjs
  4 | +++ b/node_modules/pdfjs-dist/build/pdf.mjs
  5 | @@ -11878,8 +11878,17 @@ class PDFWorker {
  6 |        if (this.#mainThreadWorkerMessageHandler) {
  7 |          return this.#mainThreadWorkerMessageHandler;
  8 |        }
  9 | -      const worker = await import( /*webpackIgnore: true*/this.workerSrc);
 10 | -      return worker.WorkerMessageHandler;
 11 | +      // Dynamically create a script element to load the worker script
 12 | +      return new Promise((resolve, reject) => {
 13 | +        const script = document.createElement('script');
 14 | +        script.src = this.workerSrc ?? "https://unpkg.com/pdfjs-dist@4.4.168/build/pdf.worker.min.mjs";
 15 | +        script.type = 'module';
 16 | +        script.onload = () => {
 17 | +          resolve(globalThis.pdfjsWorker.WorkerMessageHandler);
 18 | +        };
 19 | +        script.onerror = reject;
 20 | +        document.head.appendChild(script);
 21 | +      });
 22 |      };
 23 |      return shadow(this, "_setupFakeWorkerGlobal", loader());
 24 |    }
 25 | diff --git a/node_modules/pdfjs-dist/legacy/web/pdf_viewer.mjs b/node_modules/pdfjs-dist/legacy/web/pdf_viewer.mjs
 26 | index fad5698..ce02cd1 100644
 27 | --- a/node_modules/pdfjs-dist/legacy/web/pdf_viewer.mjs
 28 | +++ b/node_modules/pdfjs-dist/legacy/web/pdf_viewer.mjs
 29 | @@ -9749,10 +9749,16 @@ async function docProperties(pdfDocument) {
 30 |  class GenericScripting {
 31 |    constructor(sandboxBundleSrc) {
 32 |      this._ready = new Promise((resolve, reject) => {
 33 | -      const sandbox = import( /*webpackIgnore: true*/sandboxBundleSrc);
 34 | -      sandbox.then(pdfjsSandbox => {
 35 | -        resolve(pdfjsSandbox.QuickJSSandbox());
 36 | -      }).catch(reject);
 37 | +      const script = document.createElement('script');
 38 | +      script.src = sandboxBundleSrc ?? "https://unpkg.com/pdfjs-dist@4.4.168/build/pdf.sandbox.min.mjs";
 39 | +      script.type = 'module';
 40 | +      script.onload = () => {
 41 | +        import(sandboxBundleSrc).then(pdfjsSandbox => {
 42 | +          resolve(pdfjsSandbox.QuickJSSandbox());
 43 | +        }).catch(reject);
 44 | +      };
 45 | +      script.onerror = reject;
 46 | +      document.head.appendChild(script);
 47 |      });
 48 |    }
 49 |    async createSandbox(data) {
 50 | diff --git a/node_modules/pdfjs-dist/web/pdf_viewer.css b/node_modules/pdfjs-dist/web/pdf_viewer.css
 51 | index 94828c8..e4065fc 100644
 52 | --- a/node_modules/pdfjs-dist/web/pdf_viewer.css
 53 | +++ b/node_modules/pdfjs-dist/web/pdf_viewer.css
 54 | @@ -315,14 +315,14 @@
 55 |                backdrop-filter:var(--highlight-selected-backdrop-filter);
 56 |      }
 57 |  
 58 | -.textLayer ::-moz-selection{
 59 | -    background:rgba(0 0 255 / 0.25);
 60 | -    background:color-mix(in srgb, AccentColor, transparent 75%);
 61 | +.textLayer ::-moz-selection {
 62 | +    background: blue;
 63 | +    background: AccentColor;
 64 |    }
 65 |    
 66 | -.textLayer ::selection{
 67 | -    background:rgba(0 0 255 / 0.25);
 68 | -    background:color-mix(in srgb, AccentColor, transparent 75%);
 69 | +.textLayer ::selection {
 70 | +    background: blue;
 71 | +    background: AccentColor;
 72 |    }
 73 |  
 74 |  .textLayer br::-moz-selection{
 75 | diff --git a/node_modules/pdfjs-dist/web/pdf_viewer.mjs b/node_modules/pdfjs-dist/web/pdf_viewer.mjs
 76 | index 9c4f97d..35f1ce4 100644
 77 | --- a/node_modules/pdfjs-dist/web/pdf_viewer.mjs
 78 | +++ b/node_modules/pdfjs-dist/web/pdf_viewer.mjs
 79 | @@ -5994,10 +5994,16 @@ async function docProperties(pdfDocument) {
 80 |  class GenericScripting {
 81 |    constructor(sandboxBundleSrc) {
 82 |      this._ready = new Promise((resolve, reject) => {
 83 | -      const sandbox = import( /*webpackIgnore: true*/sandboxBundleSrc);
 84 | -      sandbox.then(pdfjsSandbox => {
 85 | -        resolve(pdfjsSandbox.QuickJSSandbox());
 86 | -      }).catch(reject);
 87 | +      const script = document.createElement('script');
 88 | +      script.src = sandboxBundleSrc ?? "https://unpkg.com/pdfjs-dist@4.4.168/build/pdf.sandbox.min.mjs";
 89 | +      script.type = 'module';
 90 | +      script.onload = () => {
 91 | +        import(sandboxBundleSrc).then(pdfjsSandbox => {
 92 | +          resolve(pdfjsSandbox.QuickJSSandbox());
 93 | +        }).catch(reject);
 94 | +      };
 95 | +      script.onerror = reject;
 96 | +      document.head.appendChild(script);
 97 |      });
 98 |    }
 99 |    async createSandbox(data) {
100 | 


--------------------------------------------------------------------------------
/playwright.config.ts:
--------------------------------------------------------------------------------
 1 | import { defineConfig, devices } from "@playwright/test";
 2 | 
 3 | /**
 4 |  * See https://playwright.dev/docs/test-configuration.
 5 |  */
 6 | export default defineConfig({
 7 |   testDir: "./e2e",
 8 |   fullyParallel: false,
 9 |   forbidOnly: !!process.env.CI,
10 |   retries: process.env.CI ? 2 : 0,
11 |   workers: process.env.CI ? 1 : undefined,
12 |   reporter: "html",
13 |   use: {
14 |     trace: "on-first-retry",
15 |   },
16 |   projects: [
17 |     {
18 |       name: "chromium",
19 |       use: { ...devices["Desktop Chrome"] },
20 |     },
21 |   ],
22 |   webServer: {
23 |     command: "npm run dev",
24 |     url: "http://localhost:3003/react-pdf-highlighter/",
25 |     reuseExistingServer: !process.env.CI,
26 |   },
27 | });
28 | 


--------------------------------------------------------------------------------
/pnpm-lock.yaml:
--------------------------------------------------------------------------------
   1 | lockfileVersion: '9.0'
   2 | 
   3 | settings:
   4 |   autoInstallPeers: true
   5 |   excludeLinksFromLockfile: false
   6 | 
   7 | overrides:
   8 |   re-resizable: 6.10.3
   9 | 
  10 | importers:
  11 | 
  12 |   .:
  13 |     dependencies:
  14 |       '@endexai/react-pdf-highlighter-patch':
  15 |         specifier: workspace:8.1.7
  16 |         version: 'link:'
  17 |       debounce:
  18 |         specifier: ^2.1.0
  19 |         version: 2.2.0
  20 |       pdfjs-dist:
  21 |         specifier: 4.9.155
  22 |         version: 4.9.155
  23 |       react:
  24 |         specifier: '>=19.0.0'
  25 |         version: 19.0.0
  26 |       react-dom:
  27 |         specifier: '>=19.0.0'
  28 |         version: 19.0.0(react@19.0.0)
  29 |       react-rnd:
  30 |         specifier: ^10.4.13
  31 |         version: 10.4.13(react-dom@19.0.0(react@19.0.0))(react@19.0.0)
  32 |     devDependencies:
  33 |       '@biomejs/biome':
  34 |         specifier: 1.8.3
  35 |         version: 1.8.3
  36 |       '@playwright/test':
  37 |         specifier: ^1.45.1
  38 |         version: 1.49.1
  39 |       '@rollup/plugin-typescript':
  40 |         specifier: ^11.1.6
  41 |         version: 11.1.6(rollup@4.28.1)(tslib@2.6.2)(typescript@5.7.2)
  42 |       '@types/node':
  43 |         specifier: ^20.14.10
  44 |         version: 20.17.10
  45 |       '@types/react':
  46 |         specifier: ^19.0.0
  47 |         version: 19.0.0
  48 |       '@types/react-dom':
  49 |         specifier: ^19.0.0
  50 |         version: 19.0.0
  51 |       '@vitejs/plugin-react':
  52 |         specifier: ^4.3.1
  53 |         version: 4.3.4(vite@5.4.11(@types/node@20.17.10))
  54 |       playwright:
  55 |         specifier: ^1.45.1
  56 |         version: 1.49.1
  57 |       postcss-import:
  58 |         specifier: ^16.1.0
  59 |         version: 16.1.0(postcss@8.4.49)
  60 |       typescript:
  61 |         specifier: ^5.5.3
  62 |         version: 5.7.2
  63 |       vite:
  64 |         specifier: ^5.3.3
  65 |         version: 5.4.11(@types/node@20.17.10)
  66 | 
  67 | packages:
  68 | 
  69 |   '@ampproject/remapping@2.3.0':
  70 |     resolution: {integrity: sha512-30iZtAPgz+LTIYoeivqYo853f02jBYSd5uGnGpkFV0M3xOt9aN73erkgYAmZU43x4VfqcnLxW9Kpg3R5LC4YYw==}
  71 |     engines: {node: '>=6.0.0'}
  72 | 
  73 |   '@babel/code-frame@7.26.2':
  74 |     resolution: {integrity: sha512-RJlIHRueQgwWitWgF8OdFYGZX328Ax5BCemNGlqHfplnRT9ESi8JkFlvaVYbS+UubVY6dpv87Fs2u5M29iNFVQ==}
  75 |     engines: {node: '>=6.9.0'}
  76 | 
  77 |   '@babel/compat-data@7.26.3':
  78 |     resolution: {integrity: sha512-nHIxvKPniQXpmQLb0vhY3VaFb3S0YrTAwpOWJZh1wn3oJPjJk9Asva204PsBdmAE8vpzfHudT8DB0scYvy9q0g==}
  79 |     engines: {node: '>=6.9.0'}
  80 | 
  81 |   '@babel/core@7.26.0':
  82 |     resolution: {integrity: sha512-i1SLeK+DzNnQ3LL/CswPCa/E5u4lh1k6IAEphON8F+cXt0t9euTshDru0q7/IqMa1PMPz5RnHuHscF8/ZJsStg==}
  83 |     engines: {node: '>=6.9.0'}
  84 | 
  85 |   '@babel/generator@7.26.3':
  86 |     resolution: {integrity: sha512-6FF/urZvD0sTeO7k6/B15pMLC4CHUv1426lzr3N01aHJTl046uCAh9LXW/fzeXXjPNCJ6iABW5XaWOsIZB93aQ==}
  87 |     engines: {node: '>=6.9.0'}
  88 | 
  89 |   '@babel/helper-compilation-targets@7.25.9':
  90 |     resolution: {integrity: sha512-j9Db8Suy6yV/VHa4qzrj9yZfZxhLWQdVnRlXxmKLYlhWUVB1sB2G5sxuWYXk/whHD9iW76PmNzxZ4UCnTQTVEQ==}
  91 |     engines: {node: '>=6.9.0'}
  92 | 
  93 |   '@babel/helper-module-imports@7.25.9':
  94 |     resolution: {integrity: sha512-tnUA4RsrmflIM6W6RFTLFSXITtl0wKjgpnLgXyowocVPrbYrLUXSBXDgTs8BlbmIzIdlBySRQjINYs2BAkiLtw==}
  95 |     engines: {node: '>=6.9.0'}
  96 | 
  97 |   '@babel/helper-module-transforms@7.26.0':
  98 |     resolution: {integrity: sha512-xO+xu6B5K2czEnQye6BHA7DolFFmS3LB7stHZFaOLb1pAwO1HWLS8fXA+eh0A2yIvltPVmx3eNNDBJA2SLHXFw==}
  99 |     engines: {node: '>=6.9.0'}
 100 |     peerDependencies:
 101 |       '@babel/core': ^7.0.0
 102 | 
 103 |   '@babel/helper-plugin-utils@7.25.9':
 104 |     resolution: {integrity: sha512-kSMlyUVdWe25rEsRGviIgOWnoT/nfABVWlqt9N19/dIPWViAOW2s9wznP5tURbs/IDuNk4gPy3YdYRgH3uxhBw==}
 105 |     engines: {node: '>=6.9.0'}
 106 | 
 107 |   '@babel/helper-string-parser@7.25.9':
 108 |     resolution: {integrity: sha512-4A/SCr/2KLd5jrtOMFzaKjVtAei3+2r/NChoBNoZ3EyP/+GlhoaEGoWOZUmFmoITP7zOJyHIMm+DYRd8o3PvHA==}
 109 |     engines: {node: '>=6.9.0'}
 110 | 
 111 |   '@babel/helper-validator-identifier@7.25.9':
 112 |     resolution: {integrity: sha512-Ed61U6XJc3CVRfkERJWDz4dJwKe7iLmmJsbOGu9wSloNSFttHV0I8g6UAgb7qnK5ly5bGLPd4oXZlxCdANBOWQ==}
 113 |     engines: {node: '>=6.9.0'}
 114 | 
 115 |   '@babel/helper-validator-option@7.25.9':
 116 |     resolution: {integrity: sha512-e/zv1co8pp55dNdEcCynfj9X7nyUKUXoUEwfXqaZt0omVOmDe9oOTdKStH4GmAw6zxMFs50ZayuMfHDKlO7Tfw==}
 117 |     engines: {node: '>=6.9.0'}
 118 | 
 119 |   '@babel/helpers@7.26.0':
 120 |     resolution: {integrity: sha512-tbhNuIxNcVb21pInl3ZSjksLCvgdZy9KwJ8brv993QtIVKJBBkYXz4q4ZbAv31GdnC+R90np23L5FbEBlthAEw==}
 121 |     engines: {node: '>=6.9.0'}
 122 | 
 123 |   '@babel/parser@7.26.3':
 124 |     resolution: {integrity: sha512-WJ/CvmY8Mea8iDXo6a7RK2wbmJITT5fN3BEkRuFlxVyNx8jOKIIhmC4fSkTcPcf8JyavbBwIe6OpiCOBXt/IcA==}
 125 |     engines: {node: '>=6.0.0'}
 126 |     hasBin: true
 127 | 
 128 |   '@babel/plugin-transform-react-jsx-self@7.25.9':
 129 |     resolution: {integrity: sha512-y8quW6p0WHkEhmErnfe58r7x0A70uKphQm8Sp8cV7tjNQwK56sNVK0M73LK3WuYmsuyrftut4xAkjjgU0twaMg==}
 130 |     engines: {node: '>=6.9.0'}
 131 |     peerDependencies:
 132 |       '@babel/core': ^7.0.0-0
 133 | 
 134 |   '@babel/plugin-transform-react-jsx-source@7.25.9':
 135 |     resolution: {integrity: sha512-+iqjT8xmXhhYv4/uiYd8FNQsraMFZIfxVSqxxVSZP0WbbSAWvBXAul0m/zu+7Vv4O/3WtApy9pmaTMiumEZgfg==}
 136 |     engines: {node: '>=6.9.0'}
 137 |     peerDependencies:
 138 |       '@babel/core': ^7.0.0-0
 139 | 
 140 |   '@babel/template@7.25.9':
 141 |     resolution: {integrity: sha512-9DGttpmPvIxBb/2uwpVo3dqJ+O6RooAFOS+lB+xDqoE2PVCE8nfoHMdZLpfCQRLwvohzXISPZcgxt80xLfsuwg==}
 142 |     engines: {node: '>=6.9.0'}
 143 | 
 144 |   '@babel/traverse@7.26.4':
 145 |     resolution: {integrity: sha512-fH+b7Y4p3yqvApJALCPJcwb0/XaOSgtK4pzV6WVjPR5GLFQBRI7pfoX2V2iM48NXvX07NUxxm1Vw98YjqTcU5w==}
 146 |     engines: {node: '>=6.9.0'}
 147 | 
 148 |   '@babel/types@7.26.3':
 149 |     resolution: {integrity: sha512-vN5p+1kl59GVKMvTHt55NzzmYVxprfJD+ql7U9NFIfKCBkYE55LYtS+WtPlaYOyzydrKI8Nezd+aZextrd+FMA==}
 150 |     engines: {node: '>=6.9.0'}
 151 | 
 152 |   '@biomejs/biome@1.8.3':
 153 |     resolution: {integrity: sha512-/uUV3MV+vyAczO+vKrPdOW0Iaet7UnJMU4bNMinggGJTAnBPjCoLEYcyYtYHNnUNYlv4xZMH6hVIQCAozq8d5w==}
 154 |     engines: {node: '>=14.21.3'}
 155 |     hasBin: true
 156 | 
 157 |   '@biomejs/cli-darwin-arm64@1.8.3':
 158 |     resolution: {integrity: sha512-9DYOjclFpKrH/m1Oz75SSExR8VKvNSSsLnVIqdnKexj6NwmiMlKk94Wa1kZEdv6MCOHGHgyyoV57Cw8WzL5n3A==}
 159 |     engines: {node: '>=14.21.3'}
 160 |     cpu: [arm64]
 161 |     os: [darwin]
 162 | 
 163 |   '@biomejs/cli-darwin-x64@1.8.3':
 164 |     resolution: {integrity: sha512-UeW44L/AtbmOF7KXLCoM+9PSgPo0IDcyEUfIoOXYeANaNXXf9mLUwV1GeF2OWjyic5zj6CnAJ9uzk2LT3v/wAw==}
 165 |     engines: {node: '>=14.21.3'}
 166 |     cpu: [x64]
 167 |     os: [darwin]
 168 | 
 169 |   '@biomejs/cli-linux-arm64-musl@1.8.3':
 170 |     resolution: {integrity: sha512-9yjUfOFN7wrYsXt/T/gEWfvVxKlnh3yBpnScw98IF+oOeCYb5/b/+K7YNqKROV2i1DlMjg9g/EcN9wvj+NkMuQ==}
 171 |     engines: {node: '>=14.21.3'}
 172 |     cpu: [arm64]
 173 |     os: [linux]
 174 | 
 175 |   '@biomejs/cli-linux-arm64@1.8.3':
 176 |     resolution: {integrity: sha512-fed2ji8s+I/m8upWpTJGanqiJ0rnlHOK3DdxsyVLZQ8ClY6qLuPc9uehCREBifRJLl/iJyQpHIRufLDeotsPtw==}
 177 |     engines: {node: '>=14.21.3'}
 178 |     cpu: [arm64]
 179 |     os: [linux]
 180 | 
 181 |   '@biomejs/cli-linux-x64-musl@1.8.3':
 182 |     resolution: {integrity: sha512-UHrGJX7PrKMKzPGoEsooKC9jXJMa28TUSMjcIlbDnIO4EAavCoVmNQaIuUSH0Ls2mpGMwUIf+aZJv657zfWWjA==}
 183 |     engines: {node: '>=14.21.3'}
 184 |     cpu: [x64]
 185 |     os: [linux]
 186 | 
 187 |   '@biomejs/cli-linux-x64@1.8.3':
 188 |     resolution: {integrity: sha512-I8G2QmuE1teISyT8ie1HXsjFRz9L1m5n83U1O6m30Kw+kPMPSKjag6QGUn+sXT8V+XWIZxFFBoTDEDZW2KPDDw==}
 189 |     engines: {node: '>=14.21.3'}
 190 |     cpu: [x64]
 191 |     os: [linux]
 192 | 
 193 |   '@biomejs/cli-win32-arm64@1.8.3':
 194 |     resolution: {integrity: sha512-J+Hu9WvrBevfy06eU1Na0lpc7uR9tibm9maHynLIoAjLZpQU3IW+OKHUtyL8p6/3pT2Ju5t5emReeIS2SAxhkQ==}
 195 |     engines: {node: '>=14.21.3'}
 196 |     cpu: [arm64]
 197 |     os: [win32]
 198 | 
 199 |   '@biomejs/cli-win32-x64@1.8.3':
 200 |     resolution: {integrity: sha512-/PJ59vA1pnQeKahemaQf4Nyj7IKUvGQSc3Ze1uIGi+Wvr1xF7rGobSrAAG01T/gUDG21vkDsZYM03NAmPiVkqg==}
 201 |     engines: {node: '>=14.21.3'}
 202 |     cpu: [x64]
 203 |     os: [win32]
 204 | 
 205 |   '@esbuild/aix-ppc64@0.21.5':
 206 |     resolution: {integrity: sha512-1SDgH6ZSPTlggy1yI6+Dbkiz8xzpHJEVAlF/AM1tHPLsf5STom9rwtjE4hKAF20FfXXNTFqEYXyJNWh1GiZedQ==}
 207 |     engines: {node: '>=12'}
 208 |     cpu: [ppc64]
 209 |     os: [aix]
 210 | 
 211 |   '@esbuild/android-arm64@0.21.5':
 212 |     resolution: {integrity: sha512-c0uX9VAUBQ7dTDCjq+wdyGLowMdtR/GoC2U5IYk/7D1H1JYC0qseD7+11iMP2mRLN9RcCMRcjC4YMclCzGwS/A==}
 213 |     engines: {node: '>=12'}
 214 |     cpu: [arm64]
 215 |     os: [android]
 216 | 
 217 |   '@esbuild/android-arm@0.21.5':
 218 |     resolution: {integrity: sha512-vCPvzSjpPHEi1siZdlvAlsPxXl7WbOVUBBAowWug4rJHb68Ox8KualB+1ocNvT5fjv6wpkX6o/iEpbDrf68zcg==}
 219 |     engines: {node: '>=12'}
 220 |     cpu: [arm]
 221 |     os: [android]
 222 | 
 223 |   '@esbuild/android-x64@0.21.5':
 224 |     resolution: {integrity: sha512-D7aPRUUNHRBwHxzxRvp856rjUHRFW1SdQATKXH2hqA0kAZb1hKmi02OpYRacl0TxIGz/ZmXWlbZgjwWYaCakTA==}
 225 |     engines: {node: '>=12'}
 226 |     cpu: [x64]
 227 |     os: [android]
 228 | 
 229 |   '@esbuild/darwin-arm64@0.21.5':
 230 |     resolution: {integrity: sha512-DwqXqZyuk5AiWWf3UfLiRDJ5EDd49zg6O9wclZ7kUMv2WRFr4HKjXp/5t8JZ11QbQfUS6/cRCKGwYhtNAY88kQ==}
 231 |     engines: {node: '>=12'}
 232 |     cpu: [arm64]
 233 |     os: [darwin]
 234 | 
 235 |   '@esbuild/darwin-x64@0.21.5':
 236 |     resolution: {integrity: sha512-se/JjF8NlmKVG4kNIuyWMV/22ZaerB+qaSi5MdrXtd6R08kvs2qCN4C09miupktDitvh8jRFflwGFBQcxZRjbw==}
 237 |     engines: {node: '>=12'}
 238 |     cpu: [x64]
 239 |     os: [darwin]
 240 | 
 241 |   '@esbuild/freebsd-arm64@0.21.5':
 242 |     resolution: {integrity: sha512-5JcRxxRDUJLX8JXp/wcBCy3pENnCgBR9bN6JsY4OmhfUtIHe3ZW0mawA7+RDAcMLrMIZaf03NlQiX9DGyB8h4g==}
 243 |     engines: {node: '>=12'}
 244 |     cpu: [arm64]
 245 |     os: [freebsd]
 246 | 
 247 |   '@esbuild/freebsd-x64@0.21.5':
 248 |     resolution: {integrity: sha512-J95kNBj1zkbMXtHVH29bBriQygMXqoVQOQYA+ISs0/2l3T9/kj42ow2mpqerRBxDJnmkUDCaQT/dfNXWX/ZZCQ==}
 249 |     engines: {node: '>=12'}
 250 |     cpu: [x64]
 251 |     os: [freebsd]
 252 | 
 253 |   '@esbuild/linux-arm64@0.21.5':
 254 |     resolution: {integrity: sha512-ibKvmyYzKsBeX8d8I7MH/TMfWDXBF3db4qM6sy+7re0YXya+K1cem3on9XgdT2EQGMu4hQyZhan7TeQ8XkGp4Q==}
 255 |     engines: {node: '>=12'}
 256 |     cpu: [arm64]
 257 |     os: [linux]
 258 | 
 259 |   '@esbuild/linux-arm@0.21.5':
 260 |     resolution: {integrity: sha512-bPb5AHZtbeNGjCKVZ9UGqGwo8EUu4cLq68E95A53KlxAPRmUyYv2D6F0uUI65XisGOL1hBP5mTronbgo+0bFcA==}
 261 |     engines: {node: '>=12'}
 262 |     cpu: [arm]
 263 |     os: [linux]
 264 | 
 265 |   '@esbuild/linux-ia32@0.21.5':
 266 |     resolution: {integrity: sha512-YvjXDqLRqPDl2dvRODYmmhz4rPeVKYvppfGYKSNGdyZkA01046pLWyRKKI3ax8fbJoK5QbxblURkwK/MWY18Tg==}
 267 |     engines: {node: '>=12'}
 268 |     cpu: [ia32]
 269 |     os: [linux]
 270 | 
 271 |   '@esbuild/linux-loong64@0.21.5':
 272 |     resolution: {integrity: sha512-uHf1BmMG8qEvzdrzAqg2SIG/02+4/DHB6a9Kbya0XDvwDEKCoC8ZRWI5JJvNdUjtciBGFQ5PuBlpEOXQj+JQSg==}
 273 |     engines: {node: '>=12'}
 274 |     cpu: [loong64]
 275 |     os: [linux]
 276 | 
 277 |   '@esbuild/linux-mips64el@0.21.5':
 278 |     resolution: {integrity: sha512-IajOmO+KJK23bj52dFSNCMsz1QP1DqM6cwLUv3W1QwyxkyIWecfafnI555fvSGqEKwjMXVLokcV5ygHW5b3Jbg==}
 279 |     engines: {node: '>=12'}
 280 |     cpu: [mips64el]
 281 |     os: [linux]
 282 | 
 283 |   '@esbuild/linux-ppc64@0.21.5':
 284 |     resolution: {integrity: sha512-1hHV/Z4OEfMwpLO8rp7CvlhBDnjsC3CttJXIhBi+5Aj5r+MBvy4egg7wCbe//hSsT+RvDAG7s81tAvpL2XAE4w==}
 285 |     engines: {node: '>=12'}
 286 |     cpu: [ppc64]
 287 |     os: [linux]
 288 | 
 289 |   '@esbuild/linux-riscv64@0.21.5':
 290 |     resolution: {integrity: sha512-2HdXDMd9GMgTGrPWnJzP2ALSokE/0O5HhTUvWIbD3YdjME8JwvSCnNGBnTThKGEB91OZhzrJ4qIIxk/SBmyDDA==}
 291 |     engines: {node: '>=12'}
 292 |     cpu: [riscv64]
 293 |     os: [linux]
 294 | 
 295 |   '@esbuild/linux-s390x@0.21.5':
 296 |     resolution: {integrity: sha512-zus5sxzqBJD3eXxwvjN1yQkRepANgxE9lgOW2qLnmr8ikMTphkjgXu1HR01K4FJg8h1kEEDAqDcZQtbrRnB41A==}
 297 |     engines: {node: '>=12'}
 298 |     cpu: [s390x]
 299 |     os: [linux]
 300 | 
 301 |   '@esbuild/linux-x64@0.21.5':
 302 |     resolution: {integrity: sha512-1rYdTpyv03iycF1+BhzrzQJCdOuAOtaqHTWJZCWvijKD2N5Xu0TtVC8/+1faWqcP9iBCWOmjmhoH94dH82BxPQ==}
 303 |     engines: {node: '>=12'}
 304 |     cpu: [x64]
 305 |     os: [linux]
 306 | 
 307 |   '@esbuild/netbsd-x64@0.21.5':
 308 |     resolution: {integrity: sha512-Woi2MXzXjMULccIwMnLciyZH4nCIMpWQAs049KEeMvOcNADVxo0UBIQPfSmxB3CWKedngg7sWZdLvLczpe0tLg==}
 309 |     engines: {node: '>=12'}
 310 |     cpu: [x64]
 311 |     os: [netbsd]
 312 | 
 313 |   '@esbuild/openbsd-x64@0.21.5':
 314 |     resolution: {integrity: sha512-HLNNw99xsvx12lFBUwoT8EVCsSvRNDVxNpjZ7bPn947b8gJPzeHWyNVhFsaerc0n3TsbOINvRP2byTZ5LKezow==}
 315 |     engines: {node: '>=12'}
 316 |     cpu: [x64]
 317 |     os: [openbsd]
 318 | 
 319 |   '@esbuild/sunos-x64@0.21.5':
 320 |     resolution: {integrity: sha512-6+gjmFpfy0BHU5Tpptkuh8+uw3mnrvgs+dSPQXQOv3ekbordwnzTVEb4qnIvQcYXq6gzkyTnoZ9dZG+D4garKg==}
 321 |     engines: {node: '>=12'}
 322 |     cpu: [x64]
 323 |     os: [sunos]
 324 | 
 325 |   '@esbuild/win32-arm64@0.21.5':
 326 |     resolution: {integrity: sha512-Z0gOTd75VvXqyq7nsl93zwahcTROgqvuAcYDUr+vOv8uHhNSKROyU961kgtCD1e95IqPKSQKH7tBTslnS3tA8A==}
 327 |     engines: {node: '>=12'}
 328 |     cpu: [arm64]
 329 |     os: [win32]
 330 | 
 331 |   '@esbuild/win32-ia32@0.21.5':
 332 |     resolution: {integrity: sha512-SWXFF1CL2RVNMaVs+BBClwtfZSvDgtL//G/smwAc5oVK/UPu2Gu9tIaRgFmYFFKrmg3SyAjSrElf0TiJ1v8fYA==}
 333 |     engines: {node: '>=12'}
 334 |     cpu: [ia32]
 335 |     os: [win32]
 336 | 
 337 |   '@esbuild/win32-x64@0.21.5':
 338 |     resolution: {integrity: sha512-tQd/1efJuzPC6rCFwEvLtci/xNFcTZknmXs98FYDfGE4wP9ClFV98nyKrzJKVPMhdDnjzLhdUyMX4PsQAPjwIw==}
 339 |     engines: {node: '>=12'}
 340 |     cpu: [x64]
 341 |     os: [win32]
 342 | 
 343 |   '@jridgewell/gen-mapping@0.3.8':
 344 |     resolution: {integrity: sha512-imAbBGkb+ebQyxKgzv5Hu2nmROxoDOXHh80evxdoXNOrvAnVx7zimzc1Oo5h9RlfV4vPXaE2iM5pOFbvOCClWA==}
 345 |     engines: {node: '>=6.0.0'}
 346 | 
 347 |   '@jridgewell/resolve-uri@3.1.2':
 348 |     resolution: {integrity: sha512-bRISgCIjP20/tbWSPWMEi54QVPRZExkuD9lJL+UIxUKtwVJA8wW1Trb1jMs1RFXo1CBTNZ/5hpC9QvmKWdopKw==}
 349 |     engines: {node: '>=6.0.0'}
 350 | 
 351 |   '@jridgewell/set-array@1.2.1':
 352 |     resolution: {integrity: sha512-R8gLRTZeyp03ymzP/6Lil/28tGeGEzhx1q2k703KGWRAI1VdvPIXdG70VJc2pAMw3NA6JKL5hhFu1sJX0Mnn/A==}
 353 |     engines: {node: '>=6.0.0'}
 354 | 
 355 |   '@jridgewell/sourcemap-codec@1.5.0':
 356 |     resolution: {integrity: sha512-gv3ZRaISU3fjPAgNsriBRqGWQL6quFx04YMPW/zD8XMLsU32mhCCbfbO6KZFLjvYpCZ8zyDEgqsgf+PwPaM7GQ==}
 357 | 
 358 |   '@jridgewell/trace-mapping@0.3.25':
 359 |     resolution: {integrity: sha512-vNk6aEwybGtawWmy/PzwnGDOjCkLWSD2wqvjGGAgOAwCGWySYXfYoxt00IJkTF+8Lb57DwOb3Aa0o9CApepiYQ==}
 360 | 
 361 |   '@napi-rs/canvas-android-arm64@0.1.65':
 362 |     resolution: {integrity: sha512-ZYwqFYEKcT5Zr8lbiaJNJj/poLaeK2TncolY914r+gD2TJNeP7ZqvE7A2SX/1C9MB4E3DQEwm3YhL3WEf0x3MQ==}
 363 |     engines: {node: '>= 10'}
 364 |     cpu: [arm64]
 365 |     os: [android]
 366 | 
 367 |   '@napi-rs/canvas-darwin-arm64@0.1.65':
 368 |     resolution: {integrity: sha512-Pg1pfiJEyDIsX+V0QaJPRWvXbw5zmWAk3bivFCvt/5pwZb37/sT6E/RqPHT9NnqpDyKW6SriwY9ypjljysUA1Q==}
 369 |     engines: {node: '>= 10'}
 370 |     cpu: [arm64]
 371 |     os: [darwin]
 372 | 
 373 |   '@napi-rs/canvas-darwin-x64@0.1.65':
 374 |     resolution: {integrity: sha512-3Tr+/HjdJN7Z/VKIcsxV2DvDIibZCExgfYTgljCkUSFuoI7iNkOE6Dc1Q6j212EB9PeO8KmfrViBqHYT6IwWkA==}
 375 |     engines: {node: '>= 10'}
 376 |     cpu: [x64]
 377 |     os: [darwin]
 378 | 
 379 |   '@napi-rs/canvas-linux-arm-gnueabihf@0.1.65':
 380 |     resolution: {integrity: sha512-3KP+dYObH7CVkZMZWwk1WX9jRjL+EKdQtD43H8MOI+illf+dwqLlecdQ4d9bQRIxELKJ8dyPWY4fOp/Ngufrdg==}
 381 |     engines: {node: '>= 10'}
 382 |     cpu: [arm]
 383 |     os: [linux]
 384 | 
 385 |   '@napi-rs/canvas-linux-arm64-gnu@0.1.65':
 386 |     resolution: {integrity: sha512-Ka3StKz7Dq7kjTF3nNJCq43UN/VlANS7qGE3dWkn1d+tQNsCRy/wRmyt1TUFzIjRqcTFMQNRbgYq84+53UBA0A==}
 387 |     engines: {node: '>= 10'}
 388 |     cpu: [arm64]
 389 |     os: [linux]
 390 | 
 391 |   '@napi-rs/canvas-linux-arm64-musl@0.1.65':
 392 |     resolution: {integrity: sha512-O4xMASm2JrmqYoiDyxVWi+z5C14H+oVEag2rZ5iIA67dhWqYZB+iO7wCFpBYRj31JPBR29FOsu6X9zL+DwBFdw==}
 393 |     engines: {node: '>= 10'}
 394 |     cpu: [arm64]
 395 |     os: [linux]
 396 | 
 397 |   '@napi-rs/canvas-linux-riscv64-gnu@0.1.65':
 398 |     resolution: {integrity: sha512-dblWDaA59ZU8bPbkfM+riSke7sFbNZ70LEevUdI5rgiFEUzYUQlU34gSBzemTACj5rCWt1BYeu0GfkLSjNMBSw==}
 399 |     engines: {node: '>= 10'}
 400 |     cpu: [riscv64]
 401 |     os: [linux]
 402 | 
 403 |   '@napi-rs/canvas-linux-x64-gnu@0.1.65':
 404 |     resolution: {integrity: sha512-wsp+atutw13OJXGU3DDkdngtBDoEg01IuK5xMe0L6VFPV8maGkh17CXze078OD5QJOc6kFyw3DDscMLOPF8+oA==}
 405 |     engines: {node: '>= 10'}
 406 |     cpu: [x64]
 407 |     os: [linux]
 408 | 
 409 |   '@napi-rs/canvas-linux-x64-musl@0.1.65':
 410 |     resolution: {integrity: sha512-odX+nN+IozWzhdj31INcHz3Iy9+EckNw+VqsZcaUxZOTu7/3FmktRNI6aC1qe5minZNv1m05YOS1FVf7fvmjlA==}
 411 |     engines: {node: '>= 10'}
 412 |     cpu: [x64]
 413 |     os: [linux]
 414 | 
 415 |   '@napi-rs/canvas-win32-x64-msvc@0.1.65':
 416 |     resolution: {integrity: sha512-RZQX3luWnlNWgdMnLMQ1hyfQraeAn9lnxWWVCHuUM4tAWEV8UDdeb7cMwmJW7eyt8kAosmjeHt3cylQMHOxGFg==}
 417 |     engines: {node: '>= 10'}
 418 |     cpu: [x64]
 419 |     os: [win32]
 420 | 
 421 |   '@napi-rs/canvas@0.1.65':
 422 |     resolution: {integrity: sha512-YcFhXQcp+b2d38zFOJNbpyPHnIL7KAEkhJQ+UeeKI5IpE9B8Cpf/M6RiHPQXSsSqnYbrfFylnW49dyh2oeSblQ==}
 423 |     engines: {node: '>= 10'}
 424 | 
 425 |   '@playwright/test@1.49.1':
 426 |     resolution: {integrity: sha512-Ky+BVzPz8pL6PQxHqNRW1k3mIyv933LML7HktS8uik0bUXNCdPhoS/kLihiO1tMf/egaJb4IutXd7UywvXEW+g==}
 427 |     engines: {node: '>=18'}
 428 |     hasBin: true
 429 | 
 430 |   '@rollup/plugin-typescript@11.1.6':
 431 |     resolution: {integrity: sha512-R92yOmIACgYdJ7dJ97p4K69I8gg6IEHt8M7dUBxN3W6nrO8uUxX5ixl0yU/N3aZTi8WhPuICvOHXQvF6FaykAA==}
 432 |     engines: {node: '>=14.0.0'}
 433 |     peerDependencies:
 434 |       rollup: ^2.14.0||^3.0.0||^4.0.0
 435 |       tslib: '*'
 436 |       typescript: '>=3.7.0'
 437 |     peerDependenciesMeta:
 438 |       rollup:
 439 |         optional: true
 440 |       tslib:
 441 |         optional: true
 442 | 
 443 |   '@rollup/pluginutils@5.1.3':
 444 |     resolution: {integrity: sha512-Pnsb6f32CD2W3uCaLZIzDmeFyQ2b8UWMFI7xtwUezpcGBDVDW6y9XgAWIlARiGAo6eNF5FK5aQTr0LFyNyqq5A==}
 445 |     engines: {node: '>=14.0.0'}
 446 |     peerDependencies:
 447 |       rollup: ^1.20.0||^2.0.0||^3.0.0||^4.0.0
 448 |     peerDependenciesMeta:
 449 |       rollup:
 450 |         optional: true
 451 | 
 452 |   '@rollup/rollup-android-arm-eabi@4.28.1':
 453 |     resolution: {integrity: sha512-2aZp8AES04KI2dy3Ss6/MDjXbwBzj+i0GqKtWXgw2/Ma6E4jJvujryO6gJAghIRVz7Vwr9Gtl/8na3nDUKpraQ==}
 454 |     cpu: [arm]
 455 |     os: [android]
 456 | 
 457 |   '@rollup/rollup-android-arm64@4.28.1':
 458 |     resolution: {integrity: sha512-EbkK285O+1YMrg57xVA+Dp0tDBRB93/BZKph9XhMjezf6F4TpYjaUSuPt5J0fZXlSag0LmZAsTmdGGqPp4pQFA==}
 459 |     cpu: [arm64]
 460 |     os: [android]
 461 | 
 462 |   '@rollup/rollup-darwin-arm64@4.28.1':
 463 |     resolution: {integrity: sha512-prduvrMKU6NzMq6nxzQw445zXgaDBbMQvmKSJaxpaZ5R1QDM8w+eGxo6Y/jhT/cLoCvnZI42oEqf9KQNYz1fqQ==}
 464 |     cpu: [arm64]
 465 |     os: [darwin]
 466 | 
 467 |   '@rollup/rollup-darwin-x64@4.28.1':
 468 |     resolution: {integrity: sha512-WsvbOunsUk0wccO/TV4o7IKgloJ942hVFK1CLatwv6TJspcCZb9umQkPdvB7FihmdxgaKR5JyxDjWpCOp4uZlQ==}
 469 |     cpu: [x64]
 470 |     os: [darwin]
 471 | 
 472 |   '@rollup/rollup-freebsd-arm64@4.28.1':
 473 |     resolution: {integrity: sha512-HTDPdY1caUcU4qK23FeeGxCdJF64cKkqajU0iBnTVxS8F7H/7BewvYoG+va1KPSL63kQ1PGNyiwKOfReavzvNA==}
 474 |     cpu: [arm64]
 475 |     os: [freebsd]
 476 | 
 477 |   '@rollup/rollup-freebsd-x64@4.28.1':
 478 |     resolution: {integrity: sha512-m/uYasxkUevcFTeRSM9TeLyPe2QDuqtjkeoTpP9SW0XxUWfcYrGDMkO/m2tTw+4NMAF9P2fU3Mw4ahNvo7QmsQ==}
 479 |     cpu: [x64]
 480 |     os: [freebsd]
 481 | 
 482 |   '@rollup/rollup-linux-arm-gnueabihf@4.28.1':
 483 |     resolution: {integrity: sha512-QAg11ZIt6mcmzpNE6JZBpKfJaKkqTm1A9+y9O+frdZJEuhQxiugM05gnCWiANHj4RmbgeVJpTdmKRmH/a+0QbA==}
 484 |     cpu: [arm]
 485 |     os: [linux]
 486 | 
 487 |   '@rollup/rollup-linux-arm-musleabihf@4.28.1':
 488 |     resolution: {integrity: sha512-dRP9PEBfolq1dmMcFqbEPSd9VlRuVWEGSmbxVEfiq2cs2jlZAl0YNxFzAQS2OrQmsLBLAATDMb3Z6MFv5vOcXg==}
 489 |     cpu: [arm]
 490 |     os: [linux]
 491 | 
 492 |   '@rollup/rollup-linux-arm64-gnu@4.28.1':
 493 |     resolution: {integrity: sha512-uGr8khxO+CKT4XU8ZUH1TTEUtlktK6Kgtv0+6bIFSeiSlnGJHG1tSFSjm41uQ9sAO/5ULx9mWOz70jYLyv1QkA==}
 494 |     cpu: [arm64]
 495 |     os: [linux]
 496 | 
 497 |   '@rollup/rollup-linux-arm64-musl@4.28.1':
 498 |     resolution: {integrity: sha512-QF54q8MYGAqMLrX2t7tNpi01nvq5RI59UBNx+3+37zoKX5KViPo/gk2QLhsuqok05sSCRluj0D00LzCwBikb0A==}
 499 |     cpu: [arm64]
 500 |     os: [linux]
 501 | 
 502 |   '@rollup/rollup-linux-loongarch64-gnu@4.28.1':
 503 |     resolution: {integrity: sha512-vPul4uodvWvLhRco2w0GcyZcdyBfpfDRgNKU+p35AWEbJ/HPs1tOUrkSueVbBS0RQHAf/A+nNtDpvw95PeVKOA==}
 504 |     cpu: [loong64]
 505 |     os: [linux]
 506 | 
 507 |   '@rollup/rollup-linux-powerpc64le-gnu@4.28.1':
 508 |     resolution: {integrity: sha512-pTnTdBuC2+pt1Rmm2SV7JWRqzhYpEILML4PKODqLz+C7Ou2apEV52h19CR7es+u04KlqplggmN9sqZlekg3R1A==}
 509 |     cpu: [ppc64]
 510 |     os: [linux]
 511 | 
 512 |   '@rollup/rollup-linux-riscv64-gnu@4.28.1':
 513 |     resolution: {integrity: sha512-vWXy1Nfg7TPBSuAncfInmAI/WZDd5vOklyLJDdIRKABcZWojNDY0NJwruY2AcnCLnRJKSaBgf/GiJfauu8cQZA==}
 514 |     cpu: [riscv64]
 515 |     os: [linux]
 516 | 
 517 |   '@rollup/rollup-linux-s390x-gnu@4.28.1':
 518 |     resolution: {integrity: sha512-/yqC2Y53oZjb0yz8PVuGOQQNOTwxcizudunl/tFs1aLvObTclTwZ0JhXF2XcPT/zuaymemCDSuuUPXJJyqeDOg==}
 519 |     cpu: [s390x]
 520 |     os: [linux]
 521 | 
 522 |   '@rollup/rollup-linux-x64-gnu@4.28.1':
 523 |     resolution: {integrity: sha512-fzgeABz7rrAlKYB0y2kSEiURrI0691CSL0+KXwKwhxvj92VULEDQLpBYLHpF49MSiPG4sq5CK3qHMnb9tlCjBw==}
 524 |     cpu: [x64]
 525 |     os: [linux]
 526 | 
 527 |   '@rollup/rollup-linux-x64-musl@4.28.1':
 528 |     resolution: {integrity: sha512-xQTDVzSGiMlSshpJCtudbWyRfLaNiVPXt1WgdWTwWz9n0U12cI2ZVtWe/Jgwyv/6wjL7b66uu61Vg0POWVfz4g==}
 529 |     cpu: [x64]
 530 |     os: [linux]
 531 | 
 532 |   '@rollup/rollup-win32-arm64-msvc@4.28.1':
 533 |     resolution: {integrity: sha512-wSXmDRVupJstFP7elGMgv+2HqXelQhuNf+IS4V+nUpNVi/GUiBgDmfwD0UGN3pcAnWsgKG3I52wMOBnk1VHr/A==}
 534 |     cpu: [arm64]
 535 |     os: [win32]
 536 | 
 537 |   '@rollup/rollup-win32-ia32-msvc@4.28.1':
 538 |     resolution: {integrity: sha512-ZkyTJ/9vkgrE/Rk9vhMXhf8l9D+eAhbAVbsGsXKy2ohmJaWg0LPQLnIxRdRp/bKyr8tXuPlXhIoGlEB5XpJnGA==}
 539 |     cpu: [ia32]
 540 |     os: [win32]
 541 | 
 542 |   '@rollup/rollup-win32-x64-msvc@4.28.1':
 543 |     resolution: {integrity: sha512-ZvK2jBafvttJjoIdKm/Q/Bh7IJ1Ose9IBOwpOXcOvW3ikGTQGmKDgxTC6oCAzW6PynbkKP8+um1du81XJHZ0JA==}
 544 |     cpu: [x64]
 545 |     os: [win32]
 546 | 
 547 |   '@types/babel__core@7.20.5':
 548 |     resolution: {integrity: sha512-qoQprZvz5wQFJwMDqeseRXWv3rqMvhgpbXFfVyWhbx9X47POIA6i/+dXefEmZKoAgOaTdaIgNSMqMIU61yRyzA==}
 549 | 
 550 |   '@types/babel__generator@7.6.8':
 551 |     resolution: {integrity: sha512-ASsj+tpEDsEiFr1arWrlN6V3mdfjRMZt6LtK/Vp/kreFLnr5QH5+DhvD5nINYZXzwJvXeGq+05iUXcAzVrqWtw==}
 552 | 
 553 |   '@types/babel__template@7.4.4':
 554 |     resolution: {integrity: sha512-h/NUaSyG5EyxBIp8YRxo4RMe2/qQgvyowRwVMzhYhBCONbW8PUsg4lkFMrhgZhUe5z3L3MiLDuvyJ/CaPa2A8A==}
 555 | 
 556 |   '@types/babel__traverse@7.20.6':
 557 |     resolution: {integrity: sha512-r1bzfrm0tomOI8g1SzvCaQHo6Lcv6zu0EA+W2kHrt8dyrHQxGzBBL4kdkzIS+jBMV+EYcMAEAqXqYaLJq5rOZg==}
 558 | 
 559 |   '@types/estree@1.0.6':
 560 |     resolution: {integrity: sha512-AYnb1nQyY49te+VRAVgmzfcgjYS91mY5P0TKUDCLEM+gNnA+3T6rWITXRLYCpahpqSQbN5cE+gHpnPyXjHWxcw==}
 561 | 
 562 |   '@types/node@20.17.10':
 563 |     resolution: {integrity: sha512-/jrvh5h6NXhEauFFexRin69nA0uHJ5gwk4iDivp/DeoEua3uwCUto6PC86IpRITBOs4+6i2I56K5x5b6WYGXHA==}
 564 | 
 565 |   '@types/react-dom@19.0.0':
 566 |     resolution: {integrity: sha512-1KfiQKsH1o00p9m5ag12axHQSb3FOU9H20UTrujVSkNhuCrRHiQWFqgEnTNK5ZNfnzZv8UWrnXVqCmCF9fgY3w==}
 567 | 
 568 |   '@types/react@19.0.0':
 569 |     resolution: {integrity: sha512-MY3oPudxvMYyesqs/kW1Bh8y9VqSmf+tzqw3ae8a9DZW68pUe3zAdHeI1jc6iAysuRdACnVknHP8AhwD4/dxtg==}
 570 | 
 571 |   '@vitejs/plugin-react@4.3.4':
 572 |     resolution: {integrity: sha512-SCCPBJtYLdE8PX/7ZQAs1QAZ8Jqwih+0VBLum1EGqmCCQal+MIUqLCzj3ZUy8ufbC0cAM4LRlSTm7IQJwWT4ug==}
 573 |     engines: {node: ^14.18.0 || >=16.0.0}
 574 |     peerDependencies:
 575 |       vite: ^4.2.0 || ^5.0.0 || ^6.0.0
 576 | 
 577 |   browserslist@4.24.3:
 578 |     resolution: {integrity: sha512-1CPmv8iobE2fyRMV97dAcMVegvvWKxmq94hkLiAkUGwKVTyDLw33K+ZxiFrREKmmps4rIw6grcCFCnTMSZ/YiA==}
 579 |     engines: {node: ^6 || ^7 || ^8 || ^9 || ^10 || ^11 || ^12 || >=13.7}
 580 |     hasBin: true
 581 | 
 582 |   caniuse-lite@1.0.30001688:
 583 |     resolution: {integrity: sha512-Nmqpru91cuABu/DTCXbM2NSRHzM2uVHfPnhJ/1zEAJx/ILBRVmz3pzH4N7DZqbdG0gWClsCC05Oj0mJ/1AWMbA==}
 584 | 
 585 |   clsx@1.2.1:
 586 |     resolution: {integrity: sha512-EcR6r5a8bj6pu3ycsa/E/cKVGuTgZJZdsyUYHOksG/UHIiKfjxzRxYJpyVBwYaQeOvghal9fcc4PidlgzugAQg==}
 587 |     engines: {node: '>=6'}
 588 | 
 589 |   convert-source-map@2.0.0:
 590 |     resolution: {integrity: sha512-Kvp459HrV2FEJ1CAsi1Ku+MY3kasH19TFykTz2xWmMeq6bk2NU3XXvfJ+Q61m0xktWwt+1HSYf3JZsTms3aRJg==}
 591 | 
 592 |   csstype@3.1.3:
 593 |     resolution: {integrity: sha512-M1uQkMl8rQK/szD0LNhtqxIPLpimGm8sOBwU7lLnCpSbTyY3yeU1Vc7l4KT5zT4s/yOxHH5O7tIuuLOCnLADRw==}
 594 | 
 595 |   debounce@2.2.0:
 596 |     resolution: {integrity: sha512-Xks6RUDLZFdz8LIdR6q0MTH44k7FikOmnh5xkSjMig6ch45afc8sjTjRQf3P6ax8dMgcQrYO/AR2RGWURrruqw==}
 597 |     engines: {node: '>=18'}
 598 | 
 599 |   debug@4.4.0:
 600 |     resolution: {integrity: sha512-6WTZ/IxCY/T6BALoZHaE4ctp9xm+Z5kY/pzYaCHRFeyVhojxlrm+46y68HA6hr0TcwEssoxNiDEUJQjfPZ/RYA==}
 601 |     engines: {node: '>=6.0'}
 602 |     peerDependencies:
 603 |       supports-color: '*'
 604 |     peerDependenciesMeta:
 605 |       supports-color:
 606 |         optional: true
 607 | 
 608 |   electron-to-chromium@1.5.73:
 609 |     resolution: {integrity: sha512-8wGNxG9tAG5KhGd3eeA0o6ixhiNdgr0DcHWm85XPCphwZgD1lIEoi6t3VERayWao7SF7AAZTw6oARGJeVjH8Kg==}
 610 | 
 611 |   esbuild@0.21.5:
 612 |     resolution: {integrity: sha512-mg3OPMV4hXywwpoDxu3Qda5xCKQi+vCTZq8S9J/EpkhB2HzKXq4SNFZE3+NK93JYxc8VMSep+lOUSC/RVKaBqw==}
 613 |     engines: {node: '>=12'}
 614 |     hasBin: true
 615 | 
 616 |   escalade@3.2.0:
 617 |     resolution: {integrity: sha512-WUj2qlxaQtO4g6Pq5c29GTcWGDyd8itL8zTlipgECz3JesAiiOKotd8JU6otB3PACgG6xkJUyVhboMS+bje/jA==}
 618 |     engines: {node: '>=6'}
 619 | 
 620 |   estree-walker@2.0.2:
 621 |     resolution: {integrity: sha512-Rfkk/Mp/DL7JVje3u18FxFujQlTNR2q6QfMSMB7AvCBx91NGj/ba3kCfza0f6dVDbw7YlRf/nDrn7pQrCCyQ/w==}
 622 | 
 623 |   fsevents@2.3.2:
 624 |     resolution: {integrity: sha512-xiqMQR4xAeHTuB9uWm+fFRcIOgKBMiOBP+eXiyT7jsgVCq1bkVygt00oASowB7EdtpOHaaPgKt812P9ab+DDKA==}
 625 |     engines: {node: ^8.16.0 || ^10.6.0 || >=11.0.0}
 626 |     os: [darwin]
 627 | 
 628 |   fsevents@2.3.3:
 629 |     resolution: {integrity: sha512-5xoDfX+fL7faATnagmWPpbFtwh/R77WmMMqqHGS65C3vvB0YHrgF+B1YmZ3441tMj5n63k0212XNoJwzlhffQw==}
 630 |     engines: {node: ^8.16.0 || ^10.6.0 || >=11.0.0}
 631 |     os: [darwin]
 632 | 
 633 |   function-bind@1.1.2:
 634 |     resolution: {integrity: sha512-7XHNxH7qX9xG5mIwxkhumTox/MIRNcOgDrxWsMt2pAr23WHp6MrRlN7FBSFpCpr+oVO0F744iUgR82nJMfG2SA==}
 635 | 
 636 |   gensync@1.0.0-beta.2:
 637 |     resolution: {integrity: sha512-3hN7NaskYvMDLQY55gnW3NQ+mesEAepTqlg+VEbj7zzqEMBVNhzcGYYeqFo/TlYz6eQiFcp1HcsCZO+nGgS8zg==}
 638 |     engines: {node: '>=6.9.0'}
 639 | 
 640 |   globals@11.12.0:
 641 |     resolution: {integrity: sha512-WOBp/EEGUiIsJSp7wcv/y6MO+lV9UoncWqxuFfm8eBwzWNgyfBd6Gz+IeKQ9jCmyhoH99g15M3T+QaVHFjizVA==}
 642 |     engines: {node: '>=4'}
 643 | 
 644 |   hasown@2.0.2:
 645 |     resolution: {integrity: sha512-0hJU9SCPvmMzIBdZFqNPXWa6dqh7WdH0cII9y+CyS8rG3nL48Bclra9HmKhVVUHyPWNH5Y7xDwAB7bfgSjkUMQ==}
 646 |     engines: {node: '>= 0.4'}
 647 | 
 648 |   is-core-module@2.16.0:
 649 |     resolution: {integrity: sha512-urTSINYfAYgcbLb0yDQ6egFm6h3Mo1DcF9EkyXSRjjzdHbsulg01qhwWuXdOoUBuTkbQ80KDboXa0vFJ+BDH+g==}
 650 |     engines: {node: '>= 0.4'}
 651 | 
 652 |   js-tokens@4.0.0:
 653 |     resolution: {integrity: sha512-RdJUflcE3cUzKiMqQgsCu06FPu9UdIJO0beYbPhHN4k6apgJtifcoCtT9bcxOpYBtpD2kCM6Sbzg4CausW/PKQ==}
 654 | 
 655 |   jsesc@3.1.0:
 656 |     resolution: {integrity: sha512-/sM3dO2FOzXjKQhJuo0Q173wf2KOo8t4I8vHy6lF9poUp7bKT0/NHE8fPX23PwfhnykfqnC2xRxOnVw5XuGIaA==}
 657 |     engines: {node: '>=6'}
 658 |     hasBin: true
 659 | 
 660 |   json5@2.2.3:
 661 |     resolution: {integrity: sha512-XmOWe7eyHYH14cLdVPoyg+GOH3rYX++KpzrylJwSW98t3Nk+U8XOl8FWKOgwtzdb8lXGf6zYwDUzeHMWfxasyg==}
 662 |     engines: {node: '>=6'}
 663 |     hasBin: true
 664 | 
 665 |   loose-envify@1.4.0:
 666 |     resolution: {integrity: sha512-lyuxPGr/Wfhrlem2CL/UcnUc1zcqKAImBDzukY7Y5F/yQiNdko6+fRLevlw1HgMySw7f611UIY408EtxRSoK3Q==}
 667 |     hasBin: true
 668 | 
 669 |   lru-cache@5.1.1:
 670 |     resolution: {integrity: sha512-KpNARQA3Iwv+jTA0utUVVbrh+Jlrr1Fv0e56GGzAFOXN7dk/FviaDW8LHmK52DlcH4WP2n6gI8vN1aesBFgo9w==}
 671 | 
 672 |   ms@2.1.3:
 673 |     resolution: {integrity: sha512-6FlzubTLZG3J2a/NVCAleEhjzq5oxgHyaCU9yYXvcLsvoVaHJq/s5xXI6/XXP6tz7R9xAOtHnSO/tXtF3WRTlA==}
 674 | 
 675 |   nanoid@3.3.8:
 676 |     resolution: {integrity: sha512-WNLf5Sd8oZxOm+TzppcYk8gVOgP+l58xNy58D0nbUnOxOWRWvlcCV4kUF7ltmI6PsrLl/BgKEyS4mqsGChFN0w==}
 677 |     engines: {node: ^10 || ^12 || ^13.7 || ^14 || >=15.0.1}
 678 |     hasBin: true
 679 | 
 680 |   node-releases@2.0.19:
 681 |     resolution: {integrity: sha512-xxOWJsBKtzAq7DY0J+DTzuz58K8e7sJbdgwkbMWQe8UYB6ekmsQ45q0M/tJDsGaZmbC+l7n57UV8Hl5tHxO9uw==}
 682 | 
 683 |   object-assign@4.1.1:
 684 |     resolution: {integrity: sha512-rJgTQnkUnH1sFw8yT6VSU3zD3sWmu6sZhIseY8VX+GRu3P6F7Fu+JNDoXfklElbLJSnc3FUQHVe4cU5hj+BcUg==}
 685 |     engines: {node: '>=0.10.0'}
 686 | 
 687 |   path-parse@1.0.7:
 688 |     resolution: {integrity: sha512-LDJzPVEEEPR+y48z93A0Ed0yXb8pAByGWo/k5YYdYgpY2/2EsOsksJrq7lOHxryrVOn1ejG6oAp8ahvOIQD8sw==}
 689 | 
 690 |   pdfjs-dist@4.9.155:
 691 |     resolution: {integrity: sha512-epRZn6DQQKCOEqbmFsxkiMBm1MHaNrnr6T4VBNP0bsDvdJdmrWcZbS5cgJXW68P0d3uJTlFhF6Wms2tlSgPYig==}
 692 |     engines: {node: '>=20'}
 693 | 
 694 |   picocolors@1.1.1:
 695 |     resolution: {integrity: sha512-xceH2snhtb5M9liqDsmEw56le376mTZkEX/jEb/RxNFyegNul7eNslCXP9FDj/Lcu0X8KEyMceP2ntpaHrDEVA==}
 696 | 
 697 |   picomatch@4.0.2:
 698 |     resolution: {integrity: sha512-M7BAV6Rlcy5u+m6oPhAPFgJTzAioX/6B0DxyvDlo9l8+T3nLKbrczg2WLUyzd45L8RqfUMyGPzekbMvX2Ldkwg==}
 699 |     engines: {node: '>=12'}
 700 | 
 701 |   pify@2.3.0:
 702 |     resolution: {integrity: sha512-udgsAY+fTnvv7kI7aaxbqwWNb0AHiB0qBO89PZKPkoTmGOgdbrHDKD+0B2X4uTfJ/FT1R09r9gTsjUjNJotuog==}
 703 |     engines: {node: '>=0.10.0'}
 704 | 
 705 |   playwright-core@1.49.1:
 706 |     resolution: {integrity: sha512-BzmpVcs4kE2CH15rWfzpjzVGhWERJfmnXmniSyKeRZUs9Ws65m+RGIi7mjJK/euCegfn3i7jvqWeWyHe9y3Vgg==}
 707 |     engines: {node: '>=18'}
 708 |     hasBin: true
 709 | 
 710 |   playwright@1.49.1:
 711 |     resolution: {integrity: sha512-VYL8zLoNTBxVOrJBbDuRgDWa3i+mfQgDTrL8Ah9QXZ7ax4Dsj0MSq5bYgytRnDVVe+njoKnfsYkH3HzqVj5UZA==}
 712 |     engines: {node: '>=18'}
 713 |     hasBin: true
 714 | 
 715 |   postcss-import@16.1.0:
 716 |     resolution: {integrity: sha512-7hsAZ4xGXl4MW+OKEWCnF6T5jqBw80/EE9aXg1r2yyn1RsVEU8EtKXbijEODa+rg7iih4bKf7vlvTGYR4CnPNg==}
 717 |     engines: {node: '>=18.0.0'}
 718 |     peerDependencies:
 719 |       postcss: ^8.0.0
 720 | 
 721 |   postcss-value-parser@4.2.0:
 722 |     resolution: {integrity: sha512-1NNCs6uurfkVbeXG4S8JFT9t19m45ICnif8zWLd5oPSZ50QnwMfK+H3jv408d4jw/7Bttv5axS5IiHoLaVNHeQ==}
 723 | 
 724 |   postcss@8.4.49:
 725 |     resolution: {integrity: sha512-OCVPnIObs4N29kxTjzLfUryOkvZEq+pf8jTF0lg8E7uETuWHA+v7j3c/xJmiqpX450191LlmZfUKkXxkTry7nA==}
 726 |     engines: {node: ^10 || ^12 || >=14}
 727 | 
 728 |   prop-types@15.8.1:
 729 |     resolution: {integrity: sha512-oj87CgZICdulUohogVAR7AjlC0327U4el4L6eAvOqCeudMDVU0NThNaV+b9Df4dXgSP1gXMTnPdhfe/2qDH5cg==}
 730 | 
 731 |   re-resizable@6.10.3:
 732 |     resolution: {integrity: sha512-zvWb7X3RJMA4cuSrqoxgs3KR+D+pEXnGrD2FAD6BMYAULnZsSF4b7AOVyG6pC3VVNVOtlagGDCDmZSwWLjjBBw==}
 733 |     peerDependencies:
 734 |       react: ^16.13.1 || ^17.0.0 || ^18.0.0 || ^19.0.0
 735 |       react-dom: ^16.13.1 || ^17.0.0 || ^18.0.0 || ^19.0.0
 736 | 
 737 |   react-dom@19.0.0:
 738 |     resolution: {integrity: sha512-4GV5sHFG0e/0AD4X+ySy6UJd3jVl1iNsNHdpad0qhABJ11twS3TTBnseqsKurKcsNqCEFeGL3uLpVChpIO3QfQ==}
 739 |     peerDependencies:
 740 |       react: ^19.0.0
 741 | 
 742 |   react-draggable@4.4.6:
 743 |     resolution: {integrity: sha512-LtY5Xw1zTPqHkVmtM3X8MUOxNDOUhv/khTgBgrUvwaS064bwVvxT+q5El0uUFNx5IEPKXuRejr7UqLwBIg5pdw==}
 744 |     peerDependencies:
 745 |       react: '>= 16.3.0'
 746 |       react-dom: '>= 16.3.0'
 747 | 
 748 |   react-is@16.13.1:
 749 |     resolution: {integrity: sha512-24e6ynE2H+OKt4kqsOvNd8kBpV65zoxbA4BVsEOB3ARVWQki/DHzaUoC5KuON/BiccDaCCTZBuOcfZs70kR8bQ==}
 750 | 
 751 |   react-refresh@0.14.2:
 752 |     resolution: {integrity: sha512-jCvmsr+1IUSMUyzOkRcvnVbX3ZYC6g9TDrDbFuFmRDq7PD4yaGbLKNQL6k2jnArV8hjYxh7hVhAZB6s9HDGpZA==}
 753 |     engines: {node: '>=0.10.0'}
 754 | 
 755 |   react-rnd@10.4.13:
 756 |     resolution: {integrity: sha512-Vgbf0iihspcQ6nkaFhpOGWfmnuVbhkhoB0hBbYl8aRDA4horsQHESc4E1z7O/P27kFFjK2aqM0u5CGzfr9gEZA==}
 757 |     peerDependencies:
 758 |       react: '>=16.3.0'
 759 |       react-dom: '>=16.3.0'
 760 | 
 761 |   react@19.0.0:
 762 |     resolution: {integrity: sha512-V8AVnmPIICiWpGfm6GLzCR/W5FXLchHop40W4nXBmdlEceh16rCN8O8LNWm5bh5XUX91fh7KpA+W0TgMKmgTpQ==}
 763 |     engines: {node: '>=0.10.0'}
 764 | 
 765 |   read-cache@1.0.0:
 766 |     resolution: {integrity: sha512-Owdv/Ft7IjOgm/i0xvNDZ1LrRANRfew4b2prF3OWMQLxLfu3bS8FVhCsrSCMK4lR56Y9ya+AThoTpDCTxCmpRA==}
 767 | 
 768 |   resolve@1.22.9:
 769 |     resolution: {integrity: sha512-QxrmX1DzraFIi9PxdG5VkRfRwIgjwyud+z/iBwfRRrVmHc+P9Q7u2lSSpQ6bjr2gy5lrqIiU9vb6iAeGf2400A==}
 770 |     hasBin: true
 771 | 
 772 |   rollup@4.28.1:
 773 |     resolution: {integrity: sha512-61fXYl/qNVinKmGSTHAZ6Yy8I3YIJC/r2m9feHo6SwVAVcLT5MPwOUFe7EuURA/4m0NR8lXG4BBXuo/IZEsjMg==}
 774 |     engines: {node: '>=18.0.0', npm: '>=8.0.0'}
 775 |     hasBin: true
 776 | 
 777 |   scheduler@0.25.0:
 778 |     resolution: {integrity: sha512-xFVuu11jh+xcO7JOAGJNOXld8/TcEHK/4CituBUeUb5hqxJLj9YuemAEuvm9gQ/+pgXYfbQuqAkiYu+u7YEsNA==}
 779 | 
 780 |   semver@6.3.1:
 781 |     resolution: {integrity: sha512-BR7VvDCVHO+q2xBEWskxS6DJE1qRnb7DxzUrogb71CWoSficBxYsiAGd+Kl0mmq/MprG9yArRkyrQxTO6XjMzA==}
 782 |     hasBin: true
 783 | 
 784 |   source-map-js@1.2.1:
 785 |     resolution: {integrity: sha512-UXWMKhLOwVKb728IUtQPXxfYU+usdybtUrK/8uGE8CQMvrhOpwvzDBwj0QhSL7MQc7vIsISBG8VQ8+IDQxpfQA==}
 786 |     engines: {node: '>=0.10.0'}
 787 | 
 788 |   supports-preserve-symlinks-flag@1.0.0:
 789 |     resolution: {integrity: sha512-ot0WnXS9fgdkgIcePe6RHNk1WA8+muPa6cSjeR3V8K27q9BB1rTE3R1p7Hv0z1ZyAc8s6Vvv8DIyWf681MAt0w==}
 790 |     engines: {node: '>= 0.4'}
 791 | 
 792 |   tslib@2.6.2:
 793 |     resolution: {integrity: sha512-AEYxH93jGFPn/a2iVAwW87VuUIkR1FVUKB77NwMF7nBTDkDrrT/Hpt/IrCJ0QXhW27jTBDcf5ZY7w6RiqTMw2Q==}
 794 | 
 795 |   typescript@5.7.2:
 796 |     resolution: {integrity: sha512-i5t66RHxDvVN40HfDd1PsEThGNnlMCMT3jMUuoh9/0TaqWevNontacunWyN02LA9/fIbEWlcHZcgTKb9QoaLfg==}
 797 |     engines: {node: '>=14.17'}
 798 |     hasBin: true
 799 | 
 800 |   undici-types@6.19.8:
 801 |     resolution: {integrity: sha512-ve2KP6f/JnbPBFyobGHuerC9g1FYGn/F8n1LWTwNxCEzd6IfqTwUQcNXgEtmmQ6DlRrC1hrSrBnCZPokRrDHjw==}
 802 | 
 803 |   update-browserslist-db@1.1.1:
 804 |     resolution: {integrity: sha512-R8UzCaa9Az+38REPiJ1tXlImTJXlVfgHZsglwBD/k6nj76ctsH1E3q4doGrukiLQd3sGQYu56r5+lo5r94l29A==}
 805 |     hasBin: true
 806 |     peerDependencies:
 807 |       browserslist: '>= 4.21.0'
 808 | 
 809 |   vite@5.4.11:
 810 |     resolution: {integrity: sha512-c7jFQRklXua0mTzneGW9QVyxFjUgwcihC4bXEtujIo2ouWCe1Ajt/amn2PCxYnhYfd5k09JX3SB7OYWFKYqj8Q==}
 811 |     engines: {node: ^18.0.0 || >=20.0.0}
 812 |     hasBin: true
 813 |     peerDependencies:
 814 |       '@types/node': ^18.0.0 || >=20.0.0
 815 |       less: '*'
 816 |       lightningcss: ^1.21.0
 817 |       sass: '*'
 818 |       sass-embedded: '*'
 819 |       stylus: '*'
 820 |       sugarss: '*'
 821 |       terser: ^5.4.0
 822 |     peerDependenciesMeta:
 823 |       '@types/node':
 824 |         optional: true
 825 |       less:
 826 |         optional: true
 827 |       lightningcss:
 828 |         optional: true
 829 |       sass:
 830 |         optional: true
 831 |       sass-embedded:
 832 |         optional: true
 833 |       stylus:
 834 |         optional: true
 835 |       sugarss:
 836 |         optional: true
 837 |       terser:
 838 |         optional: true
 839 | 
 840 |   yallist@3.1.1:
 841 |     resolution: {integrity: sha512-a4UGQaWPH59mOXUYnAG2ewncQS4i4F43Tv3JoAM+s2VDAmS9NsK8GpDMLrCHPksFT7h3K6TOoUNn2pb7RoXx4g==}
 842 | 
 843 | snapshots:
 844 | 
 845 |   '@ampproject/remapping@2.3.0':
 846 |     dependencies:
 847 |       '@jridgewell/gen-mapping': 0.3.8
 848 |       '@jridgewell/trace-mapping': 0.3.25
 849 | 
 850 |   '@babel/code-frame@7.26.2':
 851 |     dependencies:
 852 |       '@babel/helper-validator-identifier': 7.25.9
 853 |       js-tokens: 4.0.0
 854 |       picocolors: 1.1.1
 855 | 
 856 |   '@babel/compat-data@7.26.3': {}
 857 | 
 858 |   '@babel/core@7.26.0':
 859 |     dependencies:
 860 |       '@ampproject/remapping': 2.3.0
 861 |       '@babel/code-frame': 7.26.2
 862 |       '@babel/generator': 7.26.3
 863 |       '@babel/helper-compilation-targets': 7.25.9
 864 |       '@babel/helper-module-transforms': 7.26.0(@babel/core@7.26.0)
 865 |       '@babel/helpers': 7.26.0
 866 |       '@babel/parser': 7.26.3
 867 |       '@babel/template': 7.25.9
 868 |       '@babel/traverse': 7.26.4
 869 |       '@babel/types': 7.26.3
 870 |       convert-source-map: 2.0.0
 871 |       debug: 4.4.0
 872 |       gensync: 1.0.0-beta.2
 873 |       json5: 2.2.3
 874 |       semver: 6.3.1
 875 |     transitivePeerDependencies:
 876 |       - supports-color
 877 | 
 878 |   '@babel/generator@7.26.3':
 879 |     dependencies:
 880 |       '@babel/parser': 7.26.3
 881 |       '@babel/types': 7.26.3
 882 |       '@jridgewell/gen-mapping': 0.3.8
 883 |       '@jridgewell/trace-mapping': 0.3.25
 884 |       jsesc: 3.1.0
 885 | 
 886 |   '@babel/helper-compilation-targets@7.25.9':
 887 |     dependencies:
 888 |       '@babel/compat-data': 7.26.3
 889 |       '@babel/helper-validator-option': 7.25.9
 890 |       browserslist: 4.24.3
 891 |       lru-cache: 5.1.1
 892 |       semver: 6.3.1
 893 | 
 894 |   '@babel/helper-module-imports@7.25.9':
 895 |     dependencies:
 896 |       '@babel/traverse': 7.26.4
 897 |       '@babel/types': 7.26.3
 898 |     transitivePeerDependencies:
 899 |       - supports-color
 900 | 
 901 |   '@babel/helper-module-transforms@7.26.0(@babel/core@7.26.0)':
 902 |     dependencies:
 903 |       '@babel/core': 7.26.0
 904 |       '@babel/helper-module-imports': 7.25.9
 905 |       '@babel/helper-validator-identifier': 7.25.9
 906 |       '@babel/traverse': 7.26.4
 907 |     transitivePeerDependencies:
 908 |       - supports-color
 909 | 
 910 |   '@babel/helper-plugin-utils@7.25.9': {}
 911 | 
 912 |   '@babel/helper-string-parser@7.25.9': {}
 913 | 
 914 |   '@babel/helper-validator-identifier@7.25.9': {}
 915 | 
 916 |   '@babel/helper-validator-option@7.25.9': {}
 917 | 
 918 |   '@babel/helpers@7.26.0':
 919 |     dependencies:
 920 |       '@babel/template': 7.25.9
 921 |       '@babel/types': 7.26.3
 922 | 
 923 |   '@babel/parser@7.26.3':
 924 |     dependencies:
 925 |       '@babel/types': 7.26.3
 926 | 
 927 |   '@babel/plugin-transform-react-jsx-self@7.25.9(@babel/core@7.26.0)':
 928 |     dependencies:
 929 |       '@babel/core': 7.26.0
 930 |       '@babel/helper-plugin-utils': 7.25.9
 931 | 
 932 |   '@babel/plugin-transform-react-jsx-source@7.25.9(@babel/core@7.26.0)':
 933 |     dependencies:
 934 |       '@babel/core': 7.26.0
 935 |       '@babel/helper-plugin-utils': 7.25.9
 936 | 
 937 |   '@babel/template@7.25.9':
 938 |     dependencies:
 939 |       '@babel/code-frame': 7.26.2
 940 |       '@babel/parser': 7.26.3
 941 |       '@babel/types': 7.26.3
 942 | 
 943 |   '@babel/traverse@7.26.4':
 944 |     dependencies:
 945 |       '@babel/code-frame': 7.26.2
 946 |       '@babel/generator': 7.26.3
 947 |       '@babel/parser': 7.26.3
 948 |       '@babel/template': 7.25.9
 949 |       '@babel/types': 7.26.3
 950 |       debug: 4.4.0
 951 |       globals: 11.12.0
 952 |     transitivePeerDependencies:
 953 |       - supports-color
 954 | 
 955 |   '@babel/types@7.26.3':
 956 |     dependencies:
 957 |       '@babel/helper-string-parser': 7.25.9
 958 |       '@babel/helper-validator-identifier': 7.25.9
 959 | 
 960 |   '@biomejs/biome@1.8.3':
 961 |     optionalDependencies:
 962 |       '@biomejs/cli-darwin-arm64': 1.8.3
 963 |       '@biomejs/cli-darwin-x64': 1.8.3
 964 |       '@biomejs/cli-linux-arm64': 1.8.3
 965 |       '@biomejs/cli-linux-arm64-musl': 1.8.3
 966 |       '@biomejs/cli-linux-x64': 1.8.3
 967 |       '@biomejs/cli-linux-x64-musl': 1.8.3
 968 |       '@biomejs/cli-win32-arm64': 1.8.3
 969 |       '@biomejs/cli-win32-x64': 1.8.3
 970 | 
 971 |   '@biomejs/cli-darwin-arm64@1.8.3':
 972 |     optional: true
 973 | 
 974 |   '@biomejs/cli-darwin-x64@1.8.3':
 975 |     optional: true
 976 | 
 977 |   '@biomejs/cli-linux-arm64-musl@1.8.3':
 978 |     optional: true
 979 | 
 980 |   '@biomejs/cli-linux-arm64@1.8.3':
 981 |     optional: true
 982 | 
 983 |   '@biomejs/cli-linux-x64-musl@1.8.3':
 984 |     optional: true
 985 | 
 986 |   '@biomejs/cli-linux-x64@1.8.3':
 987 |     optional: true
 988 | 
 989 |   '@biomejs/cli-win32-arm64@1.8.3':
 990 |     optional: true
 991 | 
 992 |   '@biomejs/cli-win32-x64@1.8.3':
 993 |     optional: true
 994 | 
 995 |   '@esbuild/aix-ppc64@0.21.5':
 996 |     optional: true
 997 | 
 998 |   '@esbuild/android-arm64@0.21.5':
 999 |     optional: true
1000 | 
1001 |   '@esbuild/android-arm@0.21.5':
1002 |     optional: true
1003 | 
1004 |   '@esbuild/android-x64@0.21.5':
1005 |     optional: true
1006 | 
1007 |   '@esbuild/darwin-arm64@0.21.5':
1008 |     optional: true
1009 | 
1010 |   '@esbuild/darwin-x64@0.21.5':
1011 |     optional: true
1012 | 
1013 |   '@esbuild/freebsd-arm64@0.21.5':
1014 |     optional: true
1015 | 
1016 |   '@esbuild/freebsd-x64@0.21.5':
1017 |     optional: true
1018 | 
1019 |   '@esbuild/linux-arm64@0.21.5':
1020 |     optional: true
1021 | 
1022 |   '@esbuild/linux-arm@0.21.5':
1023 |     optional: true
1024 | 
1025 |   '@esbuild/linux-ia32@0.21.5':
1026 |     optional: true
1027 | 
1028 |   '@esbuild/linux-loong64@0.21.5':
1029 |     optional: true
1030 | 
1031 |   '@esbuild/linux-mips64el@0.21.5':
1032 |     optional: true
1033 | 
1034 |   '@esbuild/linux-ppc64@0.21.5':
1035 |     optional: true
1036 | 
1037 |   '@esbuild/linux-riscv64@0.21.5':
1038 |     optional: true
1039 | 
1040 |   '@esbuild/linux-s390x@0.21.5':
1041 |     optional: true
1042 | 
1043 |   '@esbuild/linux-x64@0.21.5':
1044 |     optional: true
1045 | 
1046 |   '@esbuild/netbsd-x64@0.21.5':
1047 |     optional: true
1048 | 
1049 |   '@esbuild/openbsd-x64@0.21.5':
1050 |     optional: true
1051 | 
1052 |   '@esbuild/sunos-x64@0.21.5':
1053 |     optional: true
1054 | 
1055 |   '@esbuild/win32-arm64@0.21.5':
1056 |     optional: true
1057 | 
1058 |   '@esbuild/win32-ia32@0.21.5':
1059 |     optional: true
1060 | 
1061 |   '@esbuild/win32-x64@0.21.5':
1062 |     optional: true
1063 | 
1064 |   '@jridgewell/gen-mapping@0.3.8':
1065 |     dependencies:
1066 |       '@jridgewell/set-array': 1.2.1
1067 |       '@jridgewell/sourcemap-codec': 1.5.0
1068 |       '@jridgewell/trace-mapping': 0.3.25
1069 | 
1070 |   '@jridgewell/resolve-uri@3.1.2': {}
1071 | 
1072 |   '@jridgewell/set-array@1.2.1': {}
1073 | 
1074 |   '@jridgewell/sourcemap-codec@1.5.0': {}
1075 | 
1076 |   '@jridgewell/trace-mapping@0.3.25':
1077 |     dependencies:
1078 |       '@jridgewell/resolve-uri': 3.1.2
1079 |       '@jridgewell/sourcemap-codec': 1.5.0
1080 | 
1081 |   '@napi-rs/canvas-android-arm64@0.1.65':
1082 |     optional: true
1083 | 
1084 |   '@napi-rs/canvas-darwin-arm64@0.1.65':
1085 |     optional: true
1086 | 
1087 |   '@napi-rs/canvas-darwin-x64@0.1.65':
1088 |     optional: true
1089 | 
1090 |   '@napi-rs/canvas-linux-arm-gnueabihf@0.1.65':
1091 |     optional: true
1092 | 
1093 |   '@napi-rs/canvas-linux-arm64-gnu@0.1.65':
1094 |     optional: true
1095 | 
1096 |   '@napi-rs/canvas-linux-arm64-musl@0.1.65':
1097 |     optional: true
1098 | 
1099 |   '@napi-rs/canvas-linux-riscv64-gnu@0.1.65':
1100 |     optional: true
1101 | 
1102 |   '@napi-rs/canvas-linux-x64-gnu@0.1.65':
1103 |     optional: true
1104 | 
1105 |   '@napi-rs/canvas-linux-x64-musl@0.1.65':
1106 |     optional: true
1107 | 
1108 |   '@napi-rs/canvas-win32-x64-msvc@0.1.65':
1109 |     optional: true
1110 | 
1111 |   '@napi-rs/canvas@0.1.65':
1112 |     optionalDependencies:
1113 |       '@napi-rs/canvas-android-arm64': 0.1.65
1114 |       '@napi-rs/canvas-darwin-arm64': 0.1.65
1115 |       '@napi-rs/canvas-darwin-x64': 0.1.65
1116 |       '@napi-rs/canvas-linux-arm-gnueabihf': 0.1.65
1117 |       '@napi-rs/canvas-linux-arm64-gnu': 0.1.65
1118 |       '@napi-rs/canvas-linux-arm64-musl': 0.1.65
1119 |       '@napi-rs/canvas-linux-riscv64-gnu': 0.1.65
1120 |       '@napi-rs/canvas-linux-x64-gnu': 0.1.65
1121 |       '@napi-rs/canvas-linux-x64-musl': 0.1.65
1122 |       '@napi-rs/canvas-win32-x64-msvc': 0.1.65
1123 |     optional: true
1124 | 
1125 |   '@playwright/test@1.49.1':
1126 |     dependencies:
1127 |       playwright: 1.49.1
1128 | 
1129 |   '@rollup/plugin-typescript@11.1.6(rollup@4.28.1)(tslib@2.6.2)(typescript@5.7.2)':
1130 |     dependencies:
1131 |       '@rollup/pluginutils': 5.1.3(rollup@4.28.1)
1132 |       resolve: 1.22.9
1133 |       typescript: 5.7.2
1134 |     optionalDependencies:
1135 |       rollup: 4.28.1
1136 |       tslib: 2.6.2
1137 | 
1138 |   '@rollup/pluginutils@5.1.3(rollup@4.28.1)':
1139 |     dependencies:
1140 |       '@types/estree': 1.0.6
1141 |       estree-walker: 2.0.2
1142 |       picomatch: 4.0.2
1143 |     optionalDependencies:
1144 |       rollup: 4.28.1
1145 | 
1146 |   '@rollup/rollup-android-arm-eabi@4.28.1':
1147 |     optional: true
1148 | 
1149 |   '@rollup/rollup-android-arm64@4.28.1':
1150 |     optional: true
1151 | 
1152 |   '@rollup/rollup-darwin-arm64@4.28.1':
1153 |     optional: true
1154 | 
1155 |   '@rollup/rollup-darwin-x64@4.28.1':
1156 |     optional: true
1157 | 
1158 |   '@rollup/rollup-freebsd-arm64@4.28.1':
1159 |     optional: true
1160 | 
1161 |   '@rollup/rollup-freebsd-x64@4.28.1':
1162 |     optional: true
1163 | 
1164 |   '@rollup/rollup-linux-arm-gnueabihf@4.28.1':
1165 |     optional: true
1166 | 
1167 |   '@rollup/rollup-linux-arm-musleabihf@4.28.1':
1168 |     optional: true
1169 | 
1170 |   '@rollup/rollup-linux-arm64-gnu@4.28.1':
1171 |     optional: true
1172 | 
1173 |   '@rollup/rollup-linux-arm64-musl@4.28.1':
1174 |     optional: true
1175 | 
1176 |   '@rollup/rollup-linux-loongarch64-gnu@4.28.1':
1177 |     optional: true
1178 | 
1179 |   '@rollup/rollup-linux-powerpc64le-gnu@4.28.1':
1180 |     optional: true
1181 | 
1182 |   '@rollup/rollup-linux-riscv64-gnu@4.28.1':
1183 |     optional: true
1184 | 
1185 |   '@rollup/rollup-linux-s390x-gnu@4.28.1':
1186 |     optional: true
1187 | 
1188 |   '@rollup/rollup-linux-x64-gnu@4.28.1':
1189 |     optional: true
1190 | 
1191 |   '@rollup/rollup-linux-x64-musl@4.28.1':
1192 |     optional: true
1193 | 
1194 |   '@rollup/rollup-win32-arm64-msvc@4.28.1':
1195 |     optional: true
1196 | 
1197 |   '@rollup/rollup-win32-ia32-msvc@4.28.1':
1198 |     optional: true
1199 | 
1200 |   '@rollup/rollup-win32-x64-msvc@4.28.1':
1201 |     optional: true
1202 | 
1203 |   '@types/babel__core@7.20.5':
1204 |     dependencies:
1205 |       '@babel/parser': 7.26.3
1206 |       '@babel/types': 7.26.3
1207 |       '@types/babel__generator': 7.6.8
1208 |       '@types/babel__template': 7.4.4
1209 |       '@types/babel__traverse': 7.20.6
1210 | 
1211 |   '@types/babel__generator@7.6.8':
1212 |     dependencies:
1213 |       '@babel/types': 7.26.3
1214 | 
1215 |   '@types/babel__template@7.4.4':
1216 |     dependencies:
1217 |       '@babel/parser': 7.26.3
1218 |       '@babel/types': 7.26.3
1219 | 
1220 |   '@types/babel__traverse@7.20.6':
1221 |     dependencies:
1222 |       '@babel/types': 7.26.3
1223 | 
1224 |   '@types/estree@1.0.6': {}
1225 | 
1226 |   '@types/node@20.17.10':
1227 |     dependencies:
1228 |       undici-types: 6.19.8
1229 | 
1230 |   '@types/react-dom@19.0.0':
1231 |     dependencies:
1232 |       '@types/react': 19.0.0
1233 | 
1234 |   '@types/react@19.0.0':
1235 |     dependencies:
1236 |       csstype: 3.1.3
1237 | 
1238 |   '@vitejs/plugin-react@4.3.4(vite@5.4.11(@types/node@20.17.10))':
1239 |     dependencies:
1240 |       '@babel/core': 7.26.0
1241 |       '@babel/plugin-transform-react-jsx-self': 7.25.9(@babel/core@7.26.0)
1242 |       '@babel/plugin-transform-react-jsx-source': 7.25.9(@babel/core@7.26.0)
1243 |       '@types/babel__core': 7.20.5
1244 |       react-refresh: 0.14.2
1245 |       vite: 5.4.11(@types/node@20.17.10)
1246 |     transitivePeerDependencies:
1247 |       - supports-color
1248 | 
1249 |   browserslist@4.24.3:
1250 |     dependencies:
1251 |       caniuse-lite: 1.0.30001688
1252 |       electron-to-chromium: 1.5.73
1253 |       node-releases: 2.0.19
1254 |       update-browserslist-db: 1.1.1(browserslist@4.24.3)
1255 | 
1256 |   caniuse-lite@1.0.30001688: {}
1257 | 
1258 |   clsx@1.2.1: {}
1259 | 
1260 |   convert-source-map@2.0.0: {}
1261 | 
1262 |   csstype@3.1.3: {}
1263 | 
1264 |   debounce@2.2.0: {}
1265 | 
1266 |   debug@4.4.0:
1267 |     dependencies:
1268 |       ms: 2.1.3
1269 | 
1270 |   electron-to-chromium@1.5.73: {}
1271 | 
1272 |   esbuild@0.21.5:
1273 |     optionalDependencies:
1274 |       '@esbuild/aix-ppc64': 0.21.5
1275 |       '@esbuild/android-arm': 0.21.5
1276 |       '@esbuild/android-arm64': 0.21.5
1277 |       '@esbuild/android-x64': 0.21.5
1278 |       '@esbuild/darwin-arm64': 0.21.5
1279 |       '@esbuild/darwin-x64': 0.21.5
1280 |       '@esbuild/freebsd-arm64': 0.21.5
1281 |       '@esbuild/freebsd-x64': 0.21.5
1282 |       '@esbuild/linux-arm': 0.21.5
1283 |       '@esbuild/linux-arm64': 0.21.5
1284 |       '@esbuild/linux-ia32': 0.21.5
1285 |       '@esbuild/linux-loong64': 0.21.5
1286 |       '@esbuild/linux-mips64el': 0.21.5
1287 |       '@esbuild/linux-ppc64': 0.21.5
1288 |       '@esbuild/linux-riscv64': 0.21.5
1289 |       '@esbuild/linux-s390x': 0.21.5
1290 |       '@esbuild/linux-x64': 0.21.5
1291 |       '@esbuild/netbsd-x64': 0.21.5
1292 |       '@esbuild/openbsd-x64': 0.21.5
1293 |       '@esbuild/sunos-x64': 0.21.5
1294 |       '@esbuild/win32-arm64': 0.21.5
1295 |       '@esbuild/win32-ia32': 0.21.5
1296 |       '@esbuild/win32-x64': 0.21.5
1297 | 
1298 |   escalade@3.2.0: {}
1299 | 
1300 |   estree-walker@2.0.2: {}
1301 | 
1302 |   fsevents@2.3.2:
1303 |     optional: true
1304 | 
1305 |   fsevents@2.3.3:
1306 |     optional: true
1307 | 
1308 |   function-bind@1.1.2: {}
1309 | 
1310 |   gensync@1.0.0-beta.2: {}
1311 | 
1312 |   globals@11.12.0: {}
1313 | 
1314 |   hasown@2.0.2:
1315 |     dependencies:
1316 |       function-bind: 1.1.2
1317 | 
1318 |   is-core-module@2.16.0:
1319 |     dependencies:
1320 |       hasown: 2.0.2
1321 | 
1322 |   js-tokens@4.0.0: {}
1323 | 
1324 |   jsesc@3.1.0: {}
1325 | 
1326 |   json5@2.2.3: {}
1327 | 
1328 |   loose-envify@1.4.0:
1329 |     dependencies:
1330 |       js-tokens: 4.0.0
1331 | 
1332 |   lru-cache@5.1.1:
1333 |     dependencies:
1334 |       yallist: 3.1.1
1335 | 
1336 |   ms@2.1.3: {}
1337 | 
1338 |   nanoid@3.3.8: {}
1339 | 
1340 |   node-releases@2.0.19: {}
1341 | 
1342 |   object-assign@4.1.1: {}
1343 | 
1344 |   path-parse@1.0.7: {}
1345 | 
1346 |   pdfjs-dist@4.9.155:
1347 |     optionalDependencies:
1348 |       '@napi-rs/canvas': 0.1.65
1349 | 
1350 |   picocolors@1.1.1: {}
1351 | 
1352 |   picomatch@4.0.2: {}
1353 | 
1354 |   pify@2.3.0: {}
1355 | 
1356 |   playwright-core@1.49.1: {}
1357 | 
1358 |   playwright@1.49.1:
1359 |     dependencies:
1360 |       playwright-core: 1.49.1
1361 |     optionalDependencies:
1362 |       fsevents: 2.3.2
1363 | 
1364 |   postcss-import@16.1.0(postcss@8.4.49):
1365 |     dependencies:
1366 |       postcss: 8.4.49
1367 |       postcss-value-parser: 4.2.0
1368 |       read-cache: 1.0.0
1369 |       resolve: 1.22.9
1370 | 
1371 |   postcss-value-parser@4.2.0: {}
1372 | 
1373 |   postcss@8.4.49:
1374 |     dependencies:
1375 |       nanoid: 3.3.8
1376 |       picocolors: 1.1.1
1377 |       source-map-js: 1.2.1
1378 | 
1379 |   prop-types@15.8.1:
1380 |     dependencies:
1381 |       loose-envify: 1.4.0
1382 |       object-assign: 4.1.1
1383 |       react-is: 16.13.1
1384 | 
1385 |   re-resizable@6.10.3(react-dom@19.0.0(react@19.0.0))(react@19.0.0):
1386 |     dependencies:
1387 |       react: 19.0.0
1388 |       react-dom: 19.0.0(react@19.0.0)
1389 | 
1390 |   react-dom@19.0.0(react@19.0.0):
1391 |     dependencies:
1392 |       react: 19.0.0
1393 |       scheduler: 0.25.0
1394 | 
1395 |   react-draggable@4.4.6(react-dom@19.0.0(react@19.0.0))(react@19.0.0):
1396 |     dependencies:
1397 |       clsx: 1.2.1
1398 |       prop-types: 15.8.1
1399 |       react: 19.0.0
1400 |       react-dom: 19.0.0(react@19.0.0)
1401 | 
1402 |   react-is@16.13.1: {}
1403 | 
1404 |   react-refresh@0.14.2: {}
1405 | 
1406 |   react-rnd@10.4.13(react-dom@19.0.0(react@19.0.0))(react@19.0.0):
1407 |     dependencies:
1408 |       re-resizable: 6.10.3(react-dom@19.0.0(react@19.0.0))(react@19.0.0)
1409 |       react: 19.0.0
1410 |       react-dom: 19.0.0(react@19.0.0)
1411 |       react-draggable: 4.4.6(react-dom@19.0.0(react@19.0.0))(react@19.0.0)
1412 |       tslib: 2.6.2
1413 | 
1414 |   react@19.0.0: {}
1415 | 
1416 |   read-cache@1.0.0:
1417 |     dependencies:
1418 |       pify: 2.3.0
1419 | 
1420 |   resolve@1.22.9:
1421 |     dependencies:
1422 |       is-core-module: 2.16.0
1423 |       path-parse: 1.0.7
1424 |       supports-preserve-symlinks-flag: 1.0.0
1425 | 
1426 |   rollup@4.28.1:
1427 |     dependencies:
1428 |       '@types/estree': 1.0.6
1429 |     optionalDependencies:
1430 |       '@rollup/rollup-android-arm-eabi': 4.28.1
1431 |       '@rollup/rollup-android-arm64': 4.28.1
1432 |       '@rollup/rollup-darwin-arm64': 4.28.1
1433 |       '@rollup/rollup-darwin-x64': 4.28.1
1434 |       '@rollup/rollup-freebsd-arm64': 4.28.1
1435 |       '@rollup/rollup-freebsd-x64': 4.28.1
1436 |       '@rollup/rollup-linux-arm-gnueabihf': 4.28.1
1437 |       '@rollup/rollup-linux-arm-musleabihf': 4.28.1
1438 |       '@rollup/rollup-linux-arm64-gnu': 4.28.1
1439 |       '@rollup/rollup-linux-arm64-musl': 4.28.1
1440 |       '@rollup/rollup-linux-loongarch64-gnu': 4.28.1
1441 |       '@rollup/rollup-linux-powerpc64le-gnu': 4.28.1
1442 |       '@rollup/rollup-linux-riscv64-gnu': 4.28.1
1443 |       '@rollup/rollup-linux-s390x-gnu': 4.28.1
1444 |       '@rollup/rollup-linux-x64-gnu': 4.28.1
1445 |       '@rollup/rollup-linux-x64-musl': 4.28.1
1446 |       '@rollup/rollup-win32-arm64-msvc': 4.28.1
1447 |       '@rollup/rollup-win32-ia32-msvc': 4.28.1
1448 |       '@rollup/rollup-win32-x64-msvc': 4.28.1
1449 |       fsevents: 2.3.3
1450 | 
1451 |   scheduler@0.25.0: {}
1452 | 
1453 |   semver@6.3.1: {}
1454 | 
1455 |   source-map-js@1.2.1: {}
1456 | 
1457 |   supports-preserve-symlinks-flag@1.0.0: {}
1458 | 
1459 |   tslib@2.6.2: {}
1460 | 
1461 |   typescript@5.7.2: {}
1462 | 
1463 |   undici-types@6.19.8: {}
1464 | 
1465 |   update-browserslist-db@1.1.1(browserslist@4.24.3):
1466 |     dependencies:
1467 |       browserslist: 4.24.3
1468 |       escalade: 3.2.0
1469 |       picocolors: 1.1.1
1470 | 
1471 |   vite@5.4.11(@types/node@20.17.10):
1472 |     dependencies:
1473 |       esbuild: 0.21.5
1474 |       postcss: 8.4.49
1475 |       rollup: 4.28.1
1476 |     optionalDependencies:
1477 |       '@types/node': 20.17.10
1478 |       fsevents: 2.3.3
1479 | 
1480 |   yallist@3.1.1: {}
1481 | 


--------------------------------------------------------------------------------
/src/components/AreaHighlight.tsx:
--------------------------------------------------------------------------------
 1 | import React, { Component } from "react";
 2 | 
 3 | import { Rnd } from "react-rnd";
 4 | import { getPageFromElement } from "../lib/pdfjs-dom";
 5 | 
 6 | import styles from "../style/AreaHighlight.module.css";
 7 | 
 8 | import type { LTWHP, ViewportHighlight } from "../types";
 9 | 
10 | interface Props {
11 |   highlight: ViewportHighlight;
12 |   onChange: (rect: LTWHP) => void;
13 |   isScrolledTo: boolean;
14 | }
15 | 
16 | export class AreaHighlight extends Component<Props> {
17 |   render() {
18 |     const { highlight, onChange, isScrolledTo, ...otherProps } = this.props;
19 | 
20 |     return (
21 |       <div
22 |         className={`${styles.areaHighlight} ${
23 |           isScrolledTo ? styles.scrolledTo : ""
24 |         }`}
25 |       >
26 |         <Rnd
27 |           className={styles.part}
28 |           onDragStop={(_, data) => {
29 |             const boundingRect: LTWHP = {
30 |               ...highlight.position.boundingRect,
31 |               top: data.y,
32 |               left: data.x,
33 |             };
34 | 
35 |             onChange(boundingRect);
36 |           }}
37 |           onResizeStop={(_mouseEvent, _direction, ref, _delta, position) => {
38 |             const boundingRect: LTWHP = {
39 |               top: position.y,
40 |               left: position.x,
41 |               width: ref.offsetWidth,
42 |               height: ref.offsetHeight,
43 |               pageNumber: getPageFromElement(ref)?.number || -1,
44 |             };
45 | 
46 |             onChange(boundingRect);
47 |           }}
48 |           position={{
49 |             x: highlight.position.boundingRect.left,
50 |             y: highlight.position.boundingRect.top,
51 |           }}
52 |           size={{
53 |             width: highlight.position.boundingRect.width,
54 |             height: highlight.position.boundingRect.height,
55 |           }}
56 |           onClick={(event: Event) => {
57 |             event.stopPropagation();
58 |             event.preventDefault();
59 |           }}
60 |           {...otherProps}
61 |         />
62 |       </div>
63 |     );
64 |   }
65 | }
66 | 
67 | export default AreaHighlight;
68 | 


--------------------------------------------------------------------------------
/src/components/Highlight.tsx:
--------------------------------------------------------------------------------
 1 | import React, { Component } from "react";
 2 | 
 3 | import styles from "../style/Highlight.module.css";
 4 | 
 5 | import type { LTWHP } from "../types.js";
 6 | 
 7 | interface Props {
 8 |   position: {
 9 |     boundingRect: LTWHP;
10 |     rects: Array<LTWHP>;
11 |   };
12 |   onClick?: () => void;
13 |   onMouseOver?: () => void;
14 |   onMouseOut?: () => void;
15 |   comment: {
16 |     emoji: string;
17 |     text: string;
18 |   };
19 |   isScrolledTo: boolean;
20 | }
21 | 
22 | export class Highlight extends Component<Props> {
23 |   render() {
24 |     const {
25 |       position,
26 |       onClick,
27 |       onMouseOver,
28 |       onMouseOut,
29 |       comment,
30 |       isScrolledTo,
31 |     } = this.props;
32 | 
33 |     const { rects, boundingRect } = position;
34 | 
35 |     return (
36 |       <div
37 |         className={`Highlight ${styles.highlight} ${isScrolledTo ? styles.scrolledTo : ""}`}
38 |       >
39 |         {comment ? (
40 |           <div
41 |             className={`Highlight__emoji ${styles.emoji}`}
42 |             style={{
43 |               left: 20,
44 |               top: boundingRect.top,
45 |             }}
46 |           >
47 |             {comment.emoji}
48 |           </div>
49 |         ) : null}
50 |         <div className={`Highlight__parts ${styles.parts}`}>
51 |           {rects.map((rect, index) => (
52 |             <div
53 |               onMouseOver={onMouseOver}
54 |               onMouseOut={onMouseOut}
55 |               onClick={onClick}
56 |               // biome-ignore lint/suspicious/noArrayIndexKey: We can use position hash at some point in future
57 |               key={index}
58 |               style={rect}
59 |               className={`Highlight__part ${styles.part}`}
60 |             />
61 |           ))}
62 |         </div>
63 |       </div>
64 |     );
65 |   }
66 | }
67 | 
68 | export default Highlight;
69 | 


--------------------------------------------------------------------------------
/src/components/HighlightLayer.tsx:
--------------------------------------------------------------------------------
 1 | import React, { type JSX } from "react";
 2 | import { viewportToScaled } from "../lib/coordinates";
 3 | import type {
 4 |   IHighlight,
 5 |   LTWH,
 6 |   LTWHP,
 7 |   Position,
 8 |   Scaled,
 9 |   ScaledPosition,
10 | } from "../types";
11 | 
12 | import type { PDFViewer } from "pdfjs-dist/web/pdf_viewer.mjs";
13 | import type { T_ViewportHighlight } from "./PdfHighlighter";
14 | 
15 | interface HighlightLayerProps<T_HT> {
16 |   highlightsByPage: { [pageNumber: string]: Array<T_HT> };
17 |   pageNumber: string;
18 |   scrolledToHighlightId: string;
19 |   highlightTransform: (
20 |     highlight: T_ViewportHighlight<T_HT>,
21 |     index: number,
22 |     setTip: (
23 |       highlight: T_ViewportHighlight<T_HT>,
24 |       callback: (highlight: T_ViewportHighlight<T_HT>) => JSX.Element,
25 |     ) => void,
26 |     hideTip: () => void,
27 |     viewportToScaled: (rect: LTWHP) => Scaled,
28 |     screenshot: (position: LTWH) => string,
29 |     isScrolledTo: boolean,
30 |   ) => JSX.Element;
31 |   tip: {
32 |     highlight: T_ViewportHighlight<T_HT>;
33 |     callback: (highlight: T_ViewportHighlight<T_HT>) => JSX.Element;
34 |   } | null;
35 |   scaledPositionToViewport: (scaledPosition: ScaledPosition) => Position;
36 |   hideTipAndSelection: () => void;
37 |   viewer: PDFViewer;
38 |   screenshot: (position: LTWH, pageNumber: number) => string;
39 |   showTip: (highlight: T_ViewportHighlight<T_HT>, content: JSX.Element) => void;
40 |   setTip: (state: {
41 |     highlight: T_ViewportHighlight<T_HT>;
42 |     callback: (highlight: T_ViewportHighlight<T_HT>) => JSX.Element;
43 |   }) => void;
44 | }
45 | 
46 | export function HighlightLayer<T_HT extends IHighlight>({
47 |   highlightsByPage,
48 |   scaledPositionToViewport,
49 |   pageNumber,
50 |   scrolledToHighlightId,
51 |   highlightTransform,
52 |   tip,
53 |   hideTipAndSelection,
54 |   viewer,
55 |   screenshot,
56 |   showTip,
57 |   setTip,
58 | }: HighlightLayerProps<T_HT>) {
59 |   const currentHighlights = highlightsByPage[String(pageNumber)] || [];
60 |   return (
61 |     <div>
62 |       {currentHighlights.map((highlight, index) => {
63 |         const viewportHighlight: T_ViewportHighlight<T_HT> = {
64 |           ...highlight,
65 |           position: scaledPositionToViewport(highlight.position),
66 |         };
67 | 
68 |         if (tip && tip.highlight.id === String(highlight.id)) {
69 |           showTip(tip.highlight, tip.callback(viewportHighlight));
70 |         }
71 | 
72 |         const isScrolledTo = Boolean(scrolledToHighlightId === highlight.id);
73 | 
74 |         return highlightTransform(
75 |           viewportHighlight,
76 |           index,
77 |           (highlight, callback) => {
78 |             setTip({ highlight, callback });
79 |             showTip(highlight, callback(highlight));
80 |           },
81 |           hideTipAndSelection,
82 |           (rect) => {
83 |             const viewport = viewer.getPageView(
84 |               (rect.pageNumber || Number.parseInt(pageNumber)) - 1,
85 |             ).viewport;
86 | 
87 |             return viewportToScaled(rect, viewport);
88 |           },
89 |           (boundingRect) =>
90 |             screenshot(boundingRect, Number.parseInt(pageNumber)),
91 |           isScrolledTo,
92 |         );
93 |       })}
94 |     </div>
95 |   );
96 | }
97 | 


--------------------------------------------------------------------------------
/src/components/MouseMonitor.tsx:
--------------------------------------------------------------------------------
 1 | import React, { Component, type JSX } from "react";
 2 | 
 3 | interface Props {
 4 |   onMoveAway: () => void;
 5 |   paddingX: number;
 6 |   paddingY: number;
 7 |   children: JSX.Element;
 8 | }
 9 | 
10 | class MouseMonitor extends Component<Props> {
11 |   container: HTMLDivElement | null = null;
12 |   unsubscribe = () => {};
13 | 
14 |   onMouseMove = (event: MouseEvent) => {
15 |     if (!this.container) {
16 |       return;
17 |     }
18 | 
19 |     const { onMoveAway, paddingX, paddingY } = this.props;
20 | 
21 |     const { clientX, clientY } = event;
22 | 
23 |     // TODO: see if possible to optimize
24 |     const { left, top, width, height } = this.container.getBoundingClientRect();
25 | 
26 |     const inBoundsX =
27 |       clientX > left - paddingX && clientX < left + width + paddingX;
28 |     const inBoundsY =
29 |       clientY > top - paddingY && clientY < top + height + paddingY;
30 | 
31 |     const isNear = inBoundsX && inBoundsY;
32 | 
33 |     if (!isNear) {
34 |       onMoveAway();
35 |     }
36 |   };
37 | 
38 |   attachRef = (ref: HTMLDivElement | null) => {
39 |     this.container = ref;
40 |     this.unsubscribe();
41 | 
42 |     if (ref) {
43 |       const { ownerDocument: doc } = ref;
44 |       doc.addEventListener("mousemove", this.onMouseMove);
45 |       this.unsubscribe = () => {
46 |         doc.removeEventListener("mousemove", this.onMouseMove);
47 |       };
48 |     }
49 |   };
50 | 
51 |   render() {
52 |     // eslint-disable-next-line
53 |     const { onMoveAway, paddingX, paddingY, children, ...restProps } =
54 |       this.props;
55 | 
56 |     return (
57 |       <div ref={this.attachRef}>{React.cloneElement(children, restProps)}</div>
58 |     );
59 |   }
60 | }
61 | 
62 | export default MouseMonitor;
63 | 


--------------------------------------------------------------------------------
/src/components/MouseSelection.tsx:
--------------------------------------------------------------------------------
  1 | import React, { Component } from "react";
  2 | 
  3 | import { isHTMLElement } from "../lib/pdfjs-dom";
  4 | import styles from "../style/MouseSelection.module.css";
  5 | 
  6 | import type { LTWH } from "../types.js";
  7 | 
  8 | interface Coords {
  9 |   x: number;
 10 |   y: number;
 11 | }
 12 | 
 13 | interface State {
 14 |   locked: boolean;
 15 |   start: Coords | null;
 16 |   end: Coords | null;
 17 | }
 18 | 
 19 | interface Props {
 20 |   onSelection: (
 21 |     startTarget: HTMLElement,
 22 |     boundingRect: LTWH,
 23 |     resetSelection: () => void,
 24 |   ) => void;
 25 |   onDragStart: () => void;
 26 |   onDragEnd: () => void;
 27 |   shouldStart: (event: MouseEvent) => boolean;
 28 |   onChange: (isVisible: boolean) => void;
 29 | }
 30 | 
 31 | class MouseSelection extends Component<Props, State> {
 32 |   state: State = {
 33 |     locked: false,
 34 |     start: null,
 35 |     end: null,
 36 |   };
 37 | 
 38 |   root?: HTMLElement;
 39 | 
 40 |   reset = () => {
 41 |     const { onDragEnd } = this.props;
 42 | 
 43 |     onDragEnd();
 44 |     this.setState({ start: null, end: null, locked: false });
 45 |   };
 46 | 
 47 |   getBoundingRect(start: Coords, end: Coords): LTWH {
 48 |     return {
 49 |       left: Math.min(end.x, start.x),
 50 |       top: Math.min(end.y, start.y),
 51 | 
 52 |       width: Math.abs(end.x - start.x),
 53 |       height: Math.abs(end.y - start.y),
 54 |     };
 55 |   }
 56 | 
 57 |   componentDidUpdate() {
 58 |     const { onChange } = this.props;
 59 |     const { start, end } = this.state;
 60 | 
 61 |     const isVisible = Boolean(start && end);
 62 | 
 63 |     onChange(isVisible);
 64 |   }
 65 | 
 66 |   componentDidMount() {
 67 |     if (!this.root) {
 68 |       return;
 69 |     }
 70 | 
 71 |     const { onSelection, onDragStart, onDragEnd, shouldStart } = this.props;
 72 | 
 73 |     const container = this.root.parentElement;
 74 |     if (!container || !isHTMLElement(container)) {
 75 |       return;
 76 |     }
 77 | 
 78 |     let containerBoundingRect: DOMRect | null = null;
 79 | 
 80 |     const containerCoords = (pageX: number, pageY: number) => {
 81 |       if (!containerBoundingRect) {
 82 |         containerBoundingRect = container.getBoundingClientRect();
 83 |       }
 84 | 
 85 |       return {
 86 |         x: pageX - containerBoundingRect.left + container.scrollLeft,
 87 |         y:
 88 |           pageY -
 89 |           containerBoundingRect.top +
 90 |           container.scrollTop -
 91 |           window.scrollY,
 92 |       };
 93 |     };
 94 | 
 95 |     container.addEventListener("mousemove", (event: MouseEvent) => {
 96 |       const { start, locked } = this.state;
 97 | 
 98 |       if (!start || locked) {
 99 |         return;
100 |       }
101 | 
102 |       this.setState({
103 |         ...this.state,
104 |         end: containerCoords(event.pageX, event.pageY),
105 |       });
106 |     });
107 | 
108 |     container.addEventListener("mousedown", (event: MouseEvent) => {
109 |       if (!shouldStart(event)) {
110 |         this.reset();
111 |         return;
112 |       }
113 | 
114 |       const startTarget = event.target;
115 |       if (!(startTarget instanceof Element) || !isHTMLElement(startTarget)) {
116 |         return;
117 |       }
118 | 
119 |       onDragStart();
120 | 
121 |       this.setState({
122 |         start: containerCoords(event.pageX, event.pageY),
123 |         end: null,
124 |         locked: false,
125 |       });
126 | 
127 |       const onMouseUp = (event: MouseEvent): void => {
128 |         // emulate listen once
129 |         event.currentTarget?.removeEventListener(
130 |           "mouseup",
131 |           onMouseUp as EventListener,
132 |         );
133 | 
134 |         const { start } = this.state;
135 | 
136 |         if (!start) {
137 |           return;
138 |         }
139 | 
140 |         const end = containerCoords(event.pageX, event.pageY);
141 | 
142 |         const boundingRect = this.getBoundingRect(start, end);
143 | 
144 |         if (
145 |           !(event.target instanceof Element) ||
146 |           !isHTMLElement(event.target) ||
147 |           !container.contains(event.target) ||
148 |           !this.shouldRender(boundingRect)
149 |         ) {
150 |           this.reset();
151 |           return;
152 |         }
153 | 
154 |         this.setState(
155 |           {
156 |             end,
157 |             locked: true,
158 |           },
159 |           () => {
160 |             const { start, end } = this.state;
161 | 
162 |             if (!start || !end) {
163 |               return;
164 |             }
165 | 
166 |             if (
167 |               event.target instanceof Element &&
168 |               isHTMLElement(event.target)
169 |             ) {
170 |               onSelection(startTarget, boundingRect, this.reset);
171 | 
172 |               onDragEnd();
173 |             }
174 |           },
175 |         );
176 |       };
177 | 
178 |       const { ownerDocument: doc } = container;
179 |       if (doc.body) {
180 |         doc.body.addEventListener("mouseup", onMouseUp);
181 |       }
182 |     });
183 |   }
184 | 
185 |   shouldRender(boundingRect: LTWH) {
186 |     return boundingRect.width >= 1 && boundingRect.height >= 1;
187 |   }
188 | 
189 |   render() {
190 |     const { start, end } = this.state;
191 | 
192 |     return (
193 |       <div
194 |         ref={(node) => {
195 |           if (!node) {
196 |             return;
197 |           }
198 |           this.root = node;
199 |         }}
200 |       >
201 |         {start && end ? (
202 |           <div
203 |             className={styles.mouseSelection}
204 |             style={this.getBoundingRect(start, end)}
205 |           />
206 |         ) : null}
207 |       </div>
208 |     );
209 |   }
210 | }
211 | 
212 | export default MouseSelection;
213 | 


--------------------------------------------------------------------------------
/src/components/PdfHighlighter.tsx:
--------------------------------------------------------------------------------
  1 | import type { JSX } from "react";
  2 | import styles from "../style/PdfHighlighter.module.css";
  3 | 
  4 | import debounce from "debounce";
  5 | import type { PDFDocumentProxy } from "pdfjs-dist";
  6 | import type { EventBus, PDFViewer } from "pdfjs-dist/legacy/web/pdf_viewer.mjs";
  7 | import React, {
  8 |   type PointerEventHandler,
  9 |   PureComponent,
 10 |   type RefObject,
 11 | } from "react";
 12 | import { type Root, createRoot } from "react-dom/client";
 13 | import { scaledToViewport, viewportToScaled } from "../lib/coordinates";
 14 | import getAreaAsPng from "../lib/get-area-as-png";
 15 | import getBoundingRect from "../lib/get-bounding-rect";
 16 | import getClientRects from "../lib/get-client-rects";
 17 | import {
 18 |   findOrCreateContainerLayer,
 19 |   getPageFromElement,
 20 |   getPagesFromRange,
 21 |   getWindow,
 22 |   isHTMLElement,
 23 | } from "../lib/pdfjs-dom";
 24 | import type {
 25 |   IHighlight,
 26 |   LTWH,
 27 |   LTWHP,
 28 |   Position,
 29 |   Scaled,
 30 |   ScaledPosition,
 31 | } from "../types";
 32 | import { HighlightLayer } from "./HighlightLayer";
 33 | import MouseSelection from "./MouseSelection";
 34 | import TipContainer from "./TipContainer";
 35 | 
 36 | export type T_ViewportHighlight<T_HT> = { position: Position } & T_HT;
 37 | 
 38 | interface State<T_HT> {
 39 |   ghostHighlight: {
 40 |     position: ScaledPosition;
 41 |     content?: { text?: string; image?: string };
 42 |   } | null;
 43 |   isCollapsed: boolean;
 44 |   range: Range | null;
 45 |   tip: {
 46 |     highlight: T_ViewportHighlight<T_HT>;
 47 |     callback: (highlight: T_ViewportHighlight<T_HT>) => JSX.Element;
 48 |   } | null;
 49 |   tipPosition: Position | null;
 50 |   tipChildren: JSX.Element | null;
 51 |   isAreaSelectionInProgress: boolean;
 52 |   scrolledToHighlightId: string;
 53 | }
 54 | 
 55 | interface Props<T_HT> {
 56 |   highlightTransform: (
 57 |     highlight: T_ViewportHighlight<T_HT>,
 58 |     index: number,
 59 |     setTip: (
 60 |       highlight: T_ViewportHighlight<T_HT>,
 61 |       callback: (highlight: T_ViewportHighlight<T_HT>) => JSX.Element,
 62 |     ) => void,
 63 |     hideTip: () => void,
 64 |     viewportToScaled: (rect: LTWHP) => Scaled,
 65 |     screenshot: (position: LTWH) => string,
 66 |     isScrolledTo: boolean,
 67 |   ) => JSX.Element;
 68 |   highlights: Array<T_HT>;
 69 |   onScrollChange: () => void;
 70 |   scrollRef: (scrollTo: (highlight: T_HT) => void) => void;
 71 |   pdfDocument: PDFDocumentProxy;
 72 |   pdfScaleValue: string;
 73 |   onSelectionFinished: (
 74 |     position: ScaledPosition,
 75 |     content: { text?: string; image?: string },
 76 |     hideTipAndSelection: () => void,
 77 |     transformSelection: () => void,
 78 |   ) => JSX.Element | null;
 79 |   enableAreaSelection: (event: MouseEvent) => boolean;
 80 | }
 81 | 
 82 | const EMPTY_ID = "empty-id";
 83 | 
 84 | export class PdfHighlighter<T_HT extends IHighlight> extends PureComponent<
 85 |   Props<T_HT>,
 86 |   State<T_HT>
 87 | > {
 88 |   static defaultProps = {
 89 |     pdfScaleValue: "auto",
 90 |   };
 91 | 
 92 |   state: State<T_HT> = {
 93 |     ghostHighlight: null,
 94 |     isCollapsed: true,
 95 |     range: null,
 96 |     scrolledToHighlightId: EMPTY_ID,
 97 |     isAreaSelectionInProgress: false,
 98 |     tip: null,
 99 |     tipPosition: null,
100 |     tipChildren: null,
101 |   };
102 | 
103 |   viewer!: PDFViewer;
104 | 
105 |   resizeObserver: ResizeObserver | null = null;
106 |   containerNode?: HTMLDivElement | null = null;
107 |   containerNodeRef: RefObject<HTMLDivElement | null>;
108 |   highlightRoots: {
109 |     [page: number]: { reactRoot: Root; container: Element };
110 |   } = {};
111 |   unsubscribe = () => {};
112 | 
113 |   constructor(props: Props<T_HT>) {
114 |     super(props);
115 |     if (typeof ResizeObserver !== "undefined") {
116 |       this.resizeObserver = new ResizeObserver(this.debouncedScaleValue);
117 |     }
118 |     this.containerNodeRef = React.createRef<HTMLDivElement | null>();
119 |   }
120 | 
121 |   componentDidMount() {
122 |     this.init();
123 |   }
124 | 
125 |   attachRef = (eventBus: EventBus) => {
126 |     const { resizeObserver: observer } = this;
127 |     this.containerNode = this.containerNodeRef.current;
128 |     this.unsubscribe();
129 | 
130 |     if (this.containerNode) {
131 |       const { ownerDocument: doc } = this.containerNode;
132 |       eventBus.on("textlayerrendered", this.onTextLayerRendered);
133 |       eventBus.on("pagesinit", this.onDocumentReady);
134 |       doc.addEventListener("selectionchange", this.onSelectionChange);
135 |       doc.addEventListener("keydown", this.handleKeyDown);
136 |       doc.defaultView?.addEventListener("resize", this.debouncedScaleValue);
137 |       if (observer) observer.observe(this.containerNode);
138 | 
139 |       this.unsubscribe = () => {
140 |         eventBus.off("pagesinit", this.onDocumentReady);
141 |         eventBus.off("textlayerrendered", this.onTextLayerRendered);
142 |         doc.removeEventListener("selectionchange", this.onSelectionChange);
143 |         doc.removeEventListener("keydown", this.handleKeyDown);
144 |         doc.defaultView?.removeEventListener(
145 |           "resize",
146 |           this.debouncedScaleValue,
147 |         );
148 |         if (observer) observer.disconnect();
149 |       };
150 |     }
151 |   };
152 | 
153 |   componentDidUpdate(prevProps: Props<T_HT>) {
154 |     if (prevProps.pdfDocument !== this.props.pdfDocument) {
155 |       this.init();
156 |       return;
157 |     }
158 |     if (prevProps.highlights !== this.props.highlights) {
159 |       this.renderHighlightLayers();
160 |     }
161 |   }
162 | 
163 |   async init() {
164 |     const { pdfDocument } = this.props;
165 |     const pdfjs = await import("pdfjs-dist/web/pdf_viewer.mjs");
166 | 
167 |     const eventBus = new pdfjs.EventBus();
168 |     const linkService = new pdfjs.PDFLinkService({
169 |       eventBus,
170 |       externalLinkTarget: 2,
171 |     });
172 | 
173 |     if (!this.containerNodeRef.current) {
174 |       throw new Error("!");
175 |     }
176 | 
177 |     this.viewer =
178 |       this.viewer ||
179 |       new pdfjs.PDFViewer({
180 |         container: this.containerNodeRef.current,
181 |         eventBus: eventBus,
182 |         // enhanceTextSelection: true, // deprecated. https://github.com/mozilla/pdf.js/issues/9943#issuecomment-409369485
183 |         textLayerMode: 2,
184 |         removePageBorders: true,
185 |         linkService: linkService,
186 |       });
187 | 
188 |     linkService.setDocument(pdfDocument);
189 |     linkService.setViewer(this.viewer);
190 |     this.viewer.setDocument(pdfDocument);
191 | 
192 |     this.attachRef(eventBus);
193 |   }
194 | 
195 |   componentWillUnmount() {
196 |     this.unsubscribe();
197 | 
198 |     // Clean up all highlight roots
199 |     for (const { reactRoot } of Object.values(this.highlightRoots)) {
200 |       reactRoot.unmount();
201 |     }
202 |     this.highlightRoots = {};
203 |   }
204 | 
205 |   findOrCreateHighlightLayer(page: number) {
206 |     const { textLayer } = this.viewer.getPageView(page - 1) || {};
207 | 
208 |     if (!textLayer) {
209 |       return null;
210 |     }
211 | 
212 |     return findOrCreateContainerLayer(
213 |       textLayer.div,
214 |       `PdfHighlighter__highlight-layer ${styles.highlightLayer}`,
215 |       ".PdfHighlighter__highlight-layer",
216 |     );
217 |   }
218 | 
219 |   groupHighlightsByPage(highlights: Array<T_HT>): {
220 |     [pageNumber: string]: Array<T_HT>;
221 |   } {
222 |     const { ghostHighlight } = this.state;
223 | 
224 |     const allHighlights = [...highlights, ghostHighlight].filter(
225 |       Boolean,
226 |     ) as T_HT[];
227 | 
228 |     const pageNumbers = new Set<number>();
229 |     for (const highlight of allHighlights) {
230 |       pageNumbers.add(highlight.position.pageNumber);
231 |       for (const rect of highlight.position.rects) {
232 |         if (rect.pageNumber) {
233 |           pageNumbers.add(rect.pageNumber);
234 |         }
235 |       }
236 |     }
237 | 
238 |     const groupedHighlights: Record<number, T_HT[]> = {};
239 | 
240 |     for (const pageNumber of pageNumbers) {
241 |       groupedHighlights[pageNumber] = groupedHighlights[pageNumber] || [];
242 |       for (const highlight of allHighlights) {
243 |         const pageSpecificHighlight = {
244 |           ...highlight,
245 |           position: {
246 |             pageNumber,
247 |             boundingRect: highlight.position.boundingRect,
248 |             rects: [],
249 |             usePdfCoordinates: highlight.position.usePdfCoordinates,
250 |           } as ScaledPosition,
251 |         };
252 |         let anyRectsOnPage = false;
253 |         for (const rect of highlight.position.rects) {
254 |           if (
255 |             pageNumber === (rect.pageNumber || highlight.position.pageNumber)
256 |           ) {
257 |             pageSpecificHighlight.position.rects.push(rect);
258 |             anyRectsOnPage = true;
259 |           }
260 |         }
261 |         if (anyRectsOnPage || pageNumber === highlight.position.pageNumber) {
262 |           groupedHighlights[pageNumber].push(pageSpecificHighlight);
263 |         }
264 |       }
265 |     }
266 | 
267 |     return groupedHighlights;
268 |   }
269 | 
270 |   showTip(highlight: T_ViewportHighlight<T_HT>, content: JSX.Element) {
271 |     const { isCollapsed, ghostHighlight, isAreaSelectionInProgress } =
272 |       this.state;
273 | 
274 |     const highlightInProgress = !isCollapsed || ghostHighlight;
275 | 
276 |     if (highlightInProgress || isAreaSelectionInProgress) {
277 |       return;
278 |     }
279 | 
280 |     this.setTip(highlight.position, content);
281 |   }
282 | 
283 |   scaledPositionToViewport({
284 |     pageNumber,
285 |     boundingRect,
286 |     rects,
287 |     usePdfCoordinates,
288 |   }: ScaledPosition): Position {
289 |     const viewport = this.viewer.getPageView(pageNumber - 1).viewport;
290 | 
291 |     return {
292 |       boundingRect: scaledToViewport(boundingRect, viewport, usePdfCoordinates),
293 |       rects: (rects || []).map((rect) =>
294 |         scaledToViewport(rect, viewport, usePdfCoordinates),
295 |       ),
296 |       pageNumber,
297 |     };
298 |   }
299 | 
300 |   viewportPositionToScaled({
301 |     pageNumber,
302 |     boundingRect,
303 |     rects,
304 |   }: Position): ScaledPosition {
305 |     const viewport = this.viewer.getPageView(pageNumber - 1).viewport;
306 | 
307 |     return {
308 |       boundingRect: viewportToScaled(boundingRect, viewport),
309 |       rects: (rects || []).map((rect) => viewportToScaled(rect, viewport)),
310 |       pageNumber,
311 |     };
312 |   }
313 | 
314 |   screenshot(position: LTWH, pageNumber: number) {
315 |     const canvas = this.viewer.getPageView(pageNumber - 1).canvas;
316 | 
317 |     return getAreaAsPng(canvas, position);
318 |   }
319 | 
320 |   hideTipAndSelection = () => {
321 |     this.setState({
322 |       tipPosition: null,
323 |       tipChildren: null,
324 |     });
325 | 
326 |     this.setState({ ghostHighlight: null, tip: null }, () =>
327 |       this.renderHighlightLayers(),
328 |     );
329 |   };
330 | 
331 |   setTip(position: Position, inner: JSX.Element | null) {
332 |     this.setState({
333 |       tipPosition: position,
334 |       tipChildren: inner,
335 |     });
336 |   }
337 | 
338 |   renderTip = () => {
339 |     const { tipPosition, tipChildren } = this.state;
340 |     if (!tipPosition) return null;
341 | 
342 |     const { boundingRect, pageNumber } = tipPosition;
343 |     const page = {
344 |       node: this.viewer.getPageView((boundingRect.pageNumber || pageNumber) - 1)
345 |         .div,
346 |       pageNumber: boundingRect.pageNumber || pageNumber,
347 |     };
348 | 
349 |     const pageBoundingClientRect = page.node.getBoundingClientRect();
350 | 
351 |     const pageBoundingRect = {
352 |       bottom: pageBoundingClientRect.bottom,
353 |       height: pageBoundingClientRect.height,
354 |       left: pageBoundingClientRect.left,
355 |       right: pageBoundingClientRect.right,
356 |       top: pageBoundingClientRect.top,
357 |       width: pageBoundingClientRect.width,
358 |       x: pageBoundingClientRect.x,
359 |       y: pageBoundingClientRect.y,
360 |       pageNumber: page.pageNumber,
361 |     };
362 | 
363 |     return (
364 |       <TipContainer
365 |         scrollTop={this.viewer.container.scrollTop}
366 |         pageBoundingRect={pageBoundingRect}
367 |         style={{
368 |           left:
369 |             page.node.offsetLeft + boundingRect.left + boundingRect.width / 2,
370 |           top: boundingRect.top + page.node.offsetTop,
371 |           bottom: boundingRect.top + page.node.offsetTop + boundingRect.height,
372 |         }}
373 |       >
374 |         {tipChildren}
375 |       </TipContainer>
376 |     );
377 |   };
378 | 
379 |   onTextLayerRendered = () => {
380 |     this.renderHighlightLayers();
381 |   };
382 | 
383 |   scrollTo = (highlight: T_HT) => {
384 |     const { pageNumber, boundingRect, usePdfCoordinates } = highlight.position;
385 | 
386 |     this.viewer.container.removeEventListener("scroll", this.onScroll);
387 | 
388 |     const pageViewport = this.viewer.getPageView(pageNumber - 1).viewport;
389 | 
390 |     const scrollMargin = 10;
391 | 
392 |     this.viewer.scrollPageIntoView({
393 |       pageNumber,
394 |       destArray: [
395 |         null,
396 |         { name: "XYZ" },
397 |         ...pageViewport.convertToPdfPoint(
398 |           0,
399 |           scaledToViewport(boundingRect, pageViewport, usePdfCoordinates).top -
400 |             scrollMargin,
401 |         ),
402 |         0,
403 |       ],
404 |     });
405 | 
406 |     this.setState(
407 |       {
408 |         scrolledToHighlightId: highlight.id,
409 |       },
410 |       () => this.renderHighlightLayers(),
411 |     );
412 | 
413 |     // wait for scrolling to finish
414 |     setTimeout(() => {
415 |       this.viewer.container.addEventListener("scroll", this.onScroll);
416 |     }, 100);
417 |   };
418 | 
419 |   onDocumentReady = () => {
420 |     const { scrollRef } = this.props;
421 | 
422 |     this.handleScaleValue();
423 | 
424 |     scrollRef(this.scrollTo);
425 |   };
426 | 
427 |   onSelectionChange = () => {
428 |     const container = this.containerNode;
429 |     if (!container) {
430 |       return;
431 |     }
432 | 
433 |     const selection = getWindow(container).getSelection();
434 |     if (!selection) {
435 |       return;
436 |     }
437 | 
438 |     const range = selection.rangeCount > 0 ? selection.getRangeAt(0) : null;
439 | 
440 |     if (selection.isCollapsed) {
441 |       this.setState({ isCollapsed: true });
442 |       return;
443 |     }
444 | 
445 |     if (
446 |       !range ||
447 |       !container ||
448 |       !container.contains(range.commonAncestorContainer)
449 |     ) {
450 |       return;
451 |     }
452 | 
453 |     this.setState({
454 |       isCollapsed: false,
455 |       range,
456 |     });
457 | 
458 |     this.debouncedAfterSelection();
459 |   };
460 | 
461 |   onScroll = () => {
462 |     const { onScrollChange } = this.props;
463 | 
464 |     onScrollChange();
465 | 
466 |     this.setState(
467 |       {
468 |         scrolledToHighlightId: EMPTY_ID,
469 |       },
470 |       () => this.renderHighlightLayers(),
471 |     );
472 | 
473 |     this.viewer.container.removeEventListener("scroll", this.onScroll);
474 |   };
475 | 
476 |   onMouseDown: PointerEventHandler = (event) => {
477 |     if (!(event.target instanceof Element) || !isHTMLElement(event.target)) {
478 |       return;
479 |     }
480 | 
481 |     if (event.target.closest("#PdfHighlighter__tip-container")) {
482 |       return;
483 |     }
484 | 
485 |     this.hideTipAndSelection();
486 |   };
487 | 
488 |   handleKeyDown = (event: KeyboardEvent) => {
489 |     if (event.code === "Escape") {
490 |       this.hideTipAndSelection();
491 |     }
492 |   };
493 | 
494 |   afterSelection = () => {
495 |     const { onSelectionFinished } = this.props;
496 | 
497 |     const { isCollapsed, range } = this.state;
498 | 
499 |     if (!range || isCollapsed) {
500 |       return;
501 |     }
502 | 
503 |     const pages = getPagesFromRange(range);
504 | 
505 |     if (!pages || pages.length === 0) {
506 |       return;
507 |     }
508 | 
509 |     const rects = getClientRects(range, pages);
510 | 
511 |     if (rects.length === 0) {
512 |       return;
513 |     }
514 | 
515 |     const boundingRect = getBoundingRect(rects);
516 | 
517 |     const viewportPosition: Position = {
518 |       boundingRect,
519 |       rects,
520 |       pageNumber: pages[0].number,
521 |     };
522 | 
523 |     const content = {
524 |       text: range.toString(),
525 |     };
526 |     const scaledPosition = this.viewportPositionToScaled(viewportPosition);
527 | 
528 |     this.setTip(
529 |       viewportPosition,
530 |       onSelectionFinished(
531 |         scaledPosition,
532 |         content,
533 |         () => this.hideTipAndSelection(),
534 |         () =>
535 |           this.setState(
536 |             {
537 |               ghostHighlight: { position: scaledPosition },
538 |             },
539 |             () => this.renderHighlightLayers(),
540 |           ),
541 |       ),
542 |     );
543 |   };
544 | 
545 |   debouncedAfterSelection: () => void = debounce(this.afterSelection, 500);
546 | 
547 |   toggleTextSelection(flag: boolean) {
548 |     if (!this.viewer.viewer) {
549 |       return;
550 |     }
551 |     this.viewer.viewer.classList.toggle(styles.disableSelection, flag);
552 |   }
553 | 
554 |   handleScaleValue = () => {
555 |     if (this.viewer) {
556 |       this.viewer.currentScaleValue = this.props.pdfScaleValue; //"page-width";
557 |     }
558 |   };
559 | 
560 |   debouncedScaleValue: () => void = debounce(this.handleScaleValue, 500);
561 | 
562 |   render() {
563 |     const { onSelectionFinished, enableAreaSelection } = this.props;
564 | 
565 |     return (
566 |       <div onPointerDown={this.onMouseDown}>
567 |         <div
568 |           ref={this.containerNodeRef}
569 |           className={styles.container}
570 |           onContextMenu={(e) => e.preventDefault()}
571 |         >
572 |           <div className="pdfViewer" />
573 |           {this.renderTip()}
574 |           {typeof enableAreaSelection === "function" ? (
575 |             <MouseSelection
576 |               onDragStart={() => this.toggleTextSelection(true)}
577 |               onDragEnd={() => this.toggleTextSelection(false)}
578 |               onChange={(isVisible) =>
579 |                 this.setState({ isAreaSelectionInProgress: isVisible })
580 |               }
581 |               shouldStart={(event) =>
582 |                 enableAreaSelection(event) &&
583 |                 event.target instanceof Element &&
584 |                 isHTMLElement(event.target) &&
585 |                 Boolean(event.target.closest(".page"))
586 |               }
587 |               onSelection={(startTarget, boundingRect, resetSelection) => {
588 |                 const page = getPageFromElement(startTarget);
589 | 
590 |                 if (!page) {
591 |                   return;
592 |                 }
593 | 
594 |                 const pageBoundingRect = {
595 |                   ...boundingRect,
596 |                   top: boundingRect.top - page.node.offsetTop,
597 |                   left: boundingRect.left - page.node.offsetLeft,
598 |                   pageNumber: page.number,
599 |                 };
600 | 
601 |                 const viewportPosition = {
602 |                   boundingRect: pageBoundingRect,
603 |                   rects: [],
604 |                   pageNumber: page.number,
605 |                 };
606 | 
607 |                 const scaledPosition =
608 |                   this.viewportPositionToScaled(viewportPosition);
609 | 
610 |                 const image = this.screenshot(
611 |                   pageBoundingRect,
612 |                   pageBoundingRect.pageNumber,
613 |                 );
614 | 
615 |                 this.setTip(
616 |                   viewportPosition,
617 |                   onSelectionFinished(
618 |                     scaledPosition,
619 |                     { image },
620 |                     () => this.hideTipAndSelection(),
621 |                     () => {
622 |                       console.log("setting ghost highlight", scaledPosition);
623 |                       this.setState(
624 |                         {
625 |                           ghostHighlight: {
626 |                             position: scaledPosition,
627 |                             content: { image },
628 |                           },
629 |                         },
630 |                         () => {
631 |                           resetSelection();
632 |                           this.renderHighlightLayers();
633 |                         },
634 |                       );
635 |                     },
636 |                   ),
637 |                 );
638 |               }}
639 |             />
640 |           ) : null}
641 |         </div>
642 |       </div>
643 |     );
644 |   }
645 | 
646 |   private renderHighlightLayers() {
647 |     const { pdfDocument } = this.props;
648 | 
649 |     for (let pageNumber = 1; pageNumber <= pdfDocument.numPages; pageNumber++) {
650 |       const highlightLayer = this.findOrCreateHighlightLayer(pageNumber);
651 |       if (highlightLayer) {
652 |         // Check if the layer is still connected to the document
653 |         if (!highlightLayer.isConnected) {
654 |           // If not connected, clean up the old root
655 |           if (this.highlightRoots[pageNumber]) {
656 |             this.highlightRoots[pageNumber].reactRoot.unmount();
657 |             delete this.highlightRoots[pageNumber];
658 |           }
659 |           continue;
660 |         }
661 | 
662 |         // Create root only if it doesn't exist for this page
663 |         if (!this.highlightRoots[pageNumber]) {
664 |           const reactRoot = createRoot(highlightLayer);
665 |           this.highlightRoots[pageNumber] = {
666 |             reactRoot,
667 |             container: highlightLayer,
668 |           };
669 |         }
670 | 
671 |         // Use existing root to render
672 |         this.renderHighlightLayer(
673 |           this.highlightRoots[pageNumber].reactRoot,
674 |           pageNumber,
675 |         );
676 |       }
677 |     }
678 |   }
679 | 
680 |   private renderHighlightLayer(root: Root, pageNumber: number) {
681 |     const { highlightTransform, highlights } = this.props;
682 |     const { tip, scrolledToHighlightId } = this.state;
683 |     root.render(
684 |       <HighlightLayer
685 |         highlightsByPage={this.groupHighlightsByPage(highlights)}
686 |         pageNumber={pageNumber.toString()}
687 |         scrolledToHighlightId={scrolledToHighlightId}
688 |         highlightTransform={highlightTransform}
689 |         tip={tip}
690 |         scaledPositionToViewport={this.scaledPositionToViewport.bind(this)}
691 |         hideTipAndSelection={this.hideTipAndSelection.bind(this)}
692 |         viewer={this.viewer}
693 |         screenshot={this.screenshot.bind(this)}
694 |         showTip={this.showTip.bind(this)}
695 |         setTip={(tip) => {
696 |           this.setState({ tip });
697 |         }}
698 |       />,
699 |     );
700 |   }
701 | }
702 | 


--------------------------------------------------------------------------------
/src/components/PdfLoader.tsx:
--------------------------------------------------------------------------------
  1 | import React, { Component, type JSX } from "react";
  2 | 
  3 | import { GlobalWorkerOptions, getDocument } from "pdfjs-dist";
  4 | import type { PDFDocumentProxy } from "pdfjs-dist";
  5 | 
  6 | interface Props {
  7 |   /** See `GlobalWorkerOptionsType`. */
  8 |   workerSrc: string;
  9 | 
 10 |   url: string;
 11 |   beforeLoad: JSX.Element;
 12 |   errorMessage?: JSX.Element;
 13 |   children: (pdfDocument: PDFDocumentProxy) => JSX.Element;
 14 |   onError?: (error: Error) => void;
 15 |   cMapUrl?: string;
 16 |   cMapPacked?: boolean;
 17 | }
 18 | 
 19 | interface State {
 20 |   pdfDocument: PDFDocumentProxy | null;
 21 |   error: Error | null;
 22 | }
 23 | 
 24 | export class PdfLoader extends Component<Props, State> {
 25 |   state: State = {
 26 |     pdfDocument: null,
 27 |     error: null,
 28 |   };
 29 | 
 30 |   static defaultProps = {
 31 |     workerSrc: "https://unpkg.com/pdfjs-dist@4.9.155/build/pdf.worker.min.mjs",
 32 |   };
 33 | 
 34 |   documentRef = React.createRef<HTMLElement>();
 35 | 
 36 |   componentDidMount() {
 37 |     this.load();
 38 |   }
 39 | 
 40 |   componentWillUnmount() {
 41 |     const { pdfDocument: discardedDocument } = this.state;
 42 |     if (discardedDocument) {
 43 |       discardedDocument.destroy();
 44 |     }
 45 |   }
 46 | 
 47 |   componentDidUpdate({ url: prevUrl }: Props) {
 48 |     if (this.props.url !== prevUrl) {
 49 |       this.load();
 50 |     }
 51 |   }
 52 | 
 53 |   componentDidCatch(error: Error) {
 54 |     console.error("[PdfLoader] Error caught:", error);
 55 |     const { onError } = this.props;
 56 | 
 57 |     if (onError) {
 58 |       onError(error);
 59 |     }
 60 | 
 61 |     this.setState({ pdfDocument: null, error });
 62 |   }
 63 | 
 64 |   load() {
 65 |     const { ownerDocument = document } = this.documentRef.current || {};
 66 |     const { url, cMapUrl, cMapPacked, workerSrc } = this.props;
 67 |     const { pdfDocument: discardedDocument } = this.state;
 68 | 
 69 |     this.setState({ pdfDocument: null, error: null });
 70 | 
 71 |     if (typeof workerSrc === "string") {
 72 |       GlobalWorkerOptions.workerSrc = workerSrc;
 73 |     }
 74 | 
 75 |     Promise.resolve()
 76 |       .then(() => {
 77 |         if (discardedDocument) {
 78 |           return discardedDocument.destroy();
 79 |         }
 80 |       })
 81 |       .then(() => {
 82 |         if (!url) {
 83 |           return;
 84 |         }
 85 | 
 86 |         const document = {
 87 |           ...this.props,
 88 |           ownerDocument,
 89 |           cMapUrl,
 90 |           cMapPacked,
 91 |         };
 92 | 
 93 |         return getDocument(document).promise.then((pdfDocument) => {
 94 |           this.setState({ pdfDocument });
 95 |         });
 96 |       })
 97 |       .catch((e) => {
 98 |         console.error("[PdfLoader] Error loading PDF:", e);
 99 |         this.componentDidCatch(e);
100 |       });
101 |   }
102 | 
103 |   render() {
104 |     const { children, beforeLoad } = this.props;
105 |     const { pdfDocument, error } = this.state;
106 |     return (
107 |       <>
108 |         <span ref={this.documentRef} />
109 |         {error
110 |           ? this.renderError()
111 |           : !pdfDocument || !children
112 |             ? beforeLoad
113 |             : children(pdfDocument)}
114 |       </>
115 |     );
116 |   }
117 | 
118 |   renderError() {
119 |     const { errorMessage } = this.props;
120 |     if (errorMessage) {
121 |       return React.cloneElement(errorMessage, { error: this.state.error });
122 |     }
123 | 
124 |     return null;
125 |   }
126 | }
127 | 
128 | export default PdfLoader;
129 | 


--------------------------------------------------------------------------------
/src/components/Popup.tsx:
--------------------------------------------------------------------------------
 1 | import React, { Component, type JSX } from "react";
 2 | 
 3 | import MouseMonitor from "./MouseMonitor";
 4 | 
 5 | interface Props {
 6 |   onMouseOver: (content: JSX.Element) => void;
 7 |   popupContent: JSX.Element;
 8 |   onMouseOut: () => void;
 9 |   children: JSX.Element;
10 | }
11 | 
12 | interface State {
13 |   mouseIn: boolean;
14 | }
15 | 
16 | export class Popup extends Component<Props, State> {
17 |   state: State = {
18 |     mouseIn: false,
19 |   };
20 | 
21 |   render() {
22 |     const { onMouseOver, popupContent, onMouseOut } = this.props;
23 | 
24 |     return (
25 |       <div
26 |         onMouseOver={() => {
27 |           this.setState({ mouseIn: true });
28 | 
29 |           onMouseOver(
30 |             <MouseMonitor
31 |               onMoveAway={() => {
32 |                 if (this.state.mouseIn) {
33 |                   return;
34 |                 }
35 | 
36 |                 onMouseOut();
37 |               }}
38 |               paddingX={60}
39 |               paddingY={30}
40 |             >
41 |               {popupContent}
42 |             </MouseMonitor>,
43 |           );
44 |         }}
45 |         onMouseOut={() => {
46 |           this.setState({ mouseIn: false });
47 |         }}
48 |       >
49 |         {this.props.children}
50 |       </div>
51 |     );
52 |   }
53 | }
54 | 
55 | export default Popup;
56 | 


--------------------------------------------------------------------------------
/src/components/Tip.tsx:
--------------------------------------------------------------------------------
  1 | import React, { Component } from "react";
  2 | 
  3 | import styles from "../style/Tip.module.css";
  4 | 
  5 | interface State {
  6 |   compact: boolean;
  7 |   text: string;
  8 |   emoji: string;
  9 | }
 10 | 
 11 | interface Props {
 12 |   onConfirm: (comment: { text: string; emoji: string }) => void;
 13 |   onOpen: () => void;
 14 |   onUpdate?: () => void;
 15 | }
 16 | 
 17 | export class Tip extends Component<Props, State> {
 18 |   state: State = {
 19 |     compact: true,
 20 |     text: "",
 21 |     emoji: "",
 22 |   };
 23 | 
 24 |   // for TipContainer
 25 |   componentDidUpdate(nextProps: Props, nextState: State) {
 26 |     const { onUpdate } = this.props;
 27 | 
 28 |     if (onUpdate && this.state.compact !== nextState.compact) {
 29 |       onUpdate();
 30 |     }
 31 |   }
 32 | 
 33 |   render() {
 34 |     const { onConfirm, onOpen } = this.props;
 35 |     const { compact, text, emoji } = this.state;
 36 | 
 37 |     return (
 38 |       <div>
 39 |         {compact ? (
 40 |           <div
 41 |             className={styles.compact}
 42 |             onClick={() => {
 43 |               onOpen();
 44 |               this.setState({ compact: false });
 45 |             }}
 46 |           >
 47 |             Add highlight
 48 |           </div>
 49 |         ) : (
 50 |           <form
 51 |             className={styles.card}
 52 |             onSubmit={(event) => {
 53 |               event.preventDefault();
 54 |               onConfirm({ text, emoji });
 55 |             }}
 56 |           >
 57 |             <div>
 58 |               <textarea
 59 |                 placeholder="Your comment"
 60 |                 // biome-ignore lint/a11y/noAutofocus: This is an example app
 61 |                 autoFocus
 62 |                 value={text}
 63 |                 onChange={(event) =>
 64 |                   this.setState({ text: event.target.value })
 65 |                 }
 66 |                 ref={(node) => {
 67 |                   if (node) {
 68 |                     node.focus();
 69 |                   }
 70 |                 }}
 71 |               />
 72 |               <div>
 73 |                 {["💩", "😱", "😍", "🔥", "😳", "⚠️"].map((_emoji) => (
 74 |                   <label key={_emoji}>
 75 |                     <input
 76 |                       checked={emoji === _emoji}
 77 |                       type="radio"
 78 |                       name="emoji"
 79 |                       value={_emoji}
 80 |                       onChange={(event) =>
 81 |                         this.setState({ emoji: event.target.value })
 82 |                       }
 83 |                     />
 84 |                     {_emoji}
 85 |                   </label>
 86 |                 ))}
 87 |               </div>
 88 |             </div>
 89 |             <div>
 90 |               <input type="submit" value="Save" />
 91 |             </div>
 92 |           </form>
 93 |         )}
 94 |       </div>
 95 |     );
 96 |   }
 97 | }
 98 | 
 99 | export default Tip;
100 | 


--------------------------------------------------------------------------------
/src/components/TipContainer.tsx:
--------------------------------------------------------------------------------
  1 | import React, { Component, type JSX } from "react";
  2 | import styles from "../style/TipContainer.module.css";
  3 | import type { LTWHP } from "../types";
  4 | 
  5 | interface State {
  6 |   height: number;
  7 |   width: number;
  8 | }
  9 | 
 10 | interface Props {
 11 |   children: JSX.Element | null;
 12 |   style: { top: number; left: number; bottom: number };
 13 |   scrollTop: number;
 14 |   pageBoundingRect: LTWHP;
 15 | }
 16 | 
 17 | const clamp = (value: number, left: number, right: number) =>
 18 |   Math.min(Math.max(value, left), right);
 19 | 
 20 | class TipContainer extends Component<Props, State> {
 21 |   state: State = {
 22 |     height: 0,
 23 |     width: 0,
 24 |   };
 25 | 
 26 |   node: HTMLDivElement | null = null;
 27 | 
 28 |   componentDidUpdate(nextProps: Props) {
 29 |     if (this.props.children !== nextProps.children) {
 30 |       this.updatePosition();
 31 |     }
 32 |   }
 33 | 
 34 |   componentDidMount() {
 35 |     setTimeout(this.updatePosition, 0);
 36 |   }
 37 | 
 38 |   updatePosition = () => {
 39 |     if (!this.node) {
 40 |       return;
 41 |     }
 42 | 
 43 |     const { offsetHeight, offsetWidth } = this.node;
 44 | 
 45 |     this.setState({
 46 |       height: offsetHeight,
 47 |       width: offsetWidth,
 48 |     });
 49 |   };
 50 | 
 51 |   render() {
 52 |     const { children, style, scrollTop, pageBoundingRect } = this.props;
 53 | 
 54 |     const { height, width } = this.state;
 55 | 
 56 |     const isStyleCalculationInProgress = width === 0 && height === 0;
 57 | 
 58 |     const shouldMove = style.top - height - 5 < scrollTop;
 59 | 
 60 |     const top = shouldMove ? style.bottom + 5 : style.top - height - 5;
 61 | 
 62 |     const left = clamp(
 63 |       style.left - width / 2,
 64 |       0,
 65 |       pageBoundingRect.width - width,
 66 |     );
 67 | 
 68 |     const childrenWithProps = React.Children.map(children, (child) =>
 69 |       child != null
 70 |         ? React.cloneElement(child, {
 71 |             onUpdate: () => {
 72 |               this.setState(
 73 |                 {
 74 |                   width: 0,
 75 |                   height: 0,
 76 |                 },
 77 |                 () => {
 78 |                   setTimeout(this.updatePosition, 0);
 79 |                 },
 80 |               );
 81 |             },
 82 |             popup: {
 83 |               position: shouldMove ? "below" : "above",
 84 |             },
 85 |           })
 86 |         : null,
 87 |     );
 88 | 
 89 |     return (
 90 |       <div
 91 |         id="PdfHighlighter__tip-container"
 92 |         className={styles.tipContainer}
 93 |         style={{
 94 |           visibility: isStyleCalculationInProgress ? "hidden" : "visible",
 95 |           top,
 96 |           left,
 97 |         }}
 98 |         ref={(node) => {
 99 |           this.node = node;
100 |         }}
101 |       >
102 |         {childrenWithProps}
103 |       </div>
104 |     );
105 |   }
106 | }
107 | 
108 | export default TipContainer;
109 | 


--------------------------------------------------------------------------------
/src/index.ts:
--------------------------------------------------------------------------------
 1 | import "./style/index.css";
 2 | 
 3 | export { PdfHighlighter } from "./components/PdfHighlighter";
 4 | export { Tip } from "./components/Tip";
 5 | export { Highlight } from "./components/Highlight";
 6 | export { Popup } from "./components/Popup";
 7 | export { AreaHighlight } from "./components/AreaHighlight";
 8 | export { PdfLoader } from "./components/PdfLoader";
 9 | 
10 | export { scaledToViewport, viewportToScaled } from "./lib/coordinates";
11 | export { default as getBoundingRect } from "./lib/get-bounding-rect";
12 | export { default as getClientRects } from "./lib/get-client-rects";
13 | export { default as getAreaAsPng } from "./lib/get-area-as-png";
14 | export {
15 |   findOrCreateContainerLayer,
16 |   getPageFromElement,
17 |   getPagesFromRange,
18 |   getWindow,
19 |   isHTMLElement,
20 | } from "./lib/pdfjs-dom";
21 | 
22 | export type {
23 |   LTWH,
24 |   LTWHP,
25 |   Scaled,
26 |   Position,
27 |   ScaledPosition,
28 |   Content,
29 |   HighlightContent,
30 |   Comment,
31 |   HighlightComment,
32 |   NewHighlight,
33 |   IHighlight,
34 |   ViewportHighlight,
35 |   Viewport,
36 |   Page,
37 | } from "./types";
38 | 


--------------------------------------------------------------------------------
/src/lib/coordinates.ts:
--------------------------------------------------------------------------------
 1 | // "viewport" rectangle is { top, left, width, height }
 2 | 
 3 | // "scaled" means that data structure stores (0, 1) coordinates.
 4 | // for clarity reasons I decided not to store actual (0, 1) coordinates, but
 5 | // provide width and height, so user can compute ratio himself if needed
 6 | 
 7 | import type { LTWHP, Scaled, Viewport } from "../types";
 8 | 
 9 | interface WIDTH_HEIGHT {
10 |   width: number;
11 |   height: number;
12 | }
13 | 
14 | export const viewportToScaled = (
15 |   rect: LTWHP,
16 |   { width, height }: WIDTH_HEIGHT,
17 | ): Scaled => {
18 |   return {
19 |     x1: rect.left,
20 |     y1: rect.top,
21 | 
22 |     x2: rect.left + rect.width,
23 |     y2: rect.top + rect.height,
24 | 
25 |     width,
26 |     height,
27 | 
28 |     pageNumber: rect.pageNumber,
29 |   };
30 | };
31 | 
32 | const pdfToViewport = (pdf: Scaled, viewport: Viewport): LTWHP => {
33 |   const [x1, y1, x2, y2] = viewport.convertToViewportRectangle([
34 |     pdf.x1,
35 |     pdf.y1,
36 |     pdf.x2,
37 |     pdf.y2,
38 |   ]);
39 | 
40 |   return {
41 |     left: Math.min(x1, x2),
42 |     top: Math.min(y1, y2),
43 | 
44 |     width: Math.abs(x2 - x1),
45 |     height: Math.abs(y1 - y2),
46 | 
47 |     pageNumber: pdf.pageNumber,
48 |   };
49 | };
50 | 
51 | export const scaledToViewport = (
52 |   scaled: Scaled,
53 |   viewport: Viewport,
54 |   usePdfCoordinates = false,
55 | ): LTWHP => {
56 |   const { width, height } = viewport;
57 | 
58 |   if (usePdfCoordinates) {
59 |     return pdfToViewport(scaled, viewport);
60 |   }
61 | 
62 |   if (scaled.x1 === undefined) {
63 |     throw new Error("You are using old position format, please update");
64 |   }
65 | 
66 |   const x1 = (width * scaled.x1) / scaled.width;
67 |   const y1 = (height * scaled.y1) / scaled.height;
68 | 
69 |   const x2 = (width * scaled.x2) / scaled.width;
70 |   const y2 = (height * scaled.y2) / scaled.height;
71 | 
72 |   return {
73 |     left: x1,
74 |     top: y1,
75 |     width: x2 - x1,
76 |     height: y2 - y1,
77 |     pageNumber: scaled.pageNumber,
78 |   };
79 | };
80 | 


--------------------------------------------------------------------------------
/src/lib/get-area-as-png.ts:
--------------------------------------------------------------------------------
 1 | import type { LTWHP } from "../types.js";
 2 | import { isHTMLCanvasElement } from "./pdfjs-dom";
 3 | 
 4 | const getAreaAsPNG = (canvas: HTMLCanvasElement, position: LTWHP): string => {
 5 |   const { left, top, width, height } = position;
 6 | 
 7 |   const doc = canvas ? canvas.ownerDocument : null;
 8 |   // @TODO: cache this?
 9 |   const newCanvas = doc?.createElement("canvas");
10 | 
11 |   if (!newCanvas || !isHTMLCanvasElement(newCanvas)) {
12 |     return "";
13 |   }
14 | 
15 |   newCanvas.width = width;
16 |   newCanvas.height = height;
17 | 
18 |   const newCanvasContext = newCanvas.getContext("2d");
19 | 
20 |   if (!newCanvasContext || !canvas) {
21 |     return "";
22 |   }
23 | 
24 |   const dpr: number = window.devicePixelRatio;
25 | 
26 |   newCanvasContext.drawImage(
27 |     canvas,
28 |     left * dpr,
29 |     top * dpr,
30 |     width * dpr,
31 |     height * dpr,
32 |     0,
33 |     0,
34 |     width,
35 |     height,
36 |   );
37 | 
38 |   return newCanvas.toDataURL("image/png");
39 | };
40 | 
41 | export default getAreaAsPNG;
42 | 


--------------------------------------------------------------------------------
/src/lib/get-bounding-rect.ts:
--------------------------------------------------------------------------------
 1 | import type { LTWHP } from "../types.js";
 2 | 
 3 | const getBoundingRect = (clientRects: Array<LTWHP>): LTWHP => {
 4 |   const rects = Array.from(clientRects).map((rect) => {
 5 |     const { left, top, width, height, pageNumber } = rect;
 6 | 
 7 |     const X0 = left;
 8 |     const X1 = left + width;
 9 | 
10 |     const Y0 = top;
11 |     const Y1 = top + height;
12 | 
13 |     return { X0, X1, Y0, Y1, pageNumber };
14 |   });
15 | 
16 |   let firstPageNumber = Number.MAX_SAFE_INTEGER;
17 | 
18 |   for (const rect of rects) {
19 |     firstPageNumber = Math.min(
20 |       firstPageNumber,
21 |       rect.pageNumber ?? firstPageNumber,
22 |     );
23 |   }
24 | 
25 |   const rectsWithSizeOnFirstPage = rects.filter(
26 |     (rect) =>
27 |       (rect.X0 > 0 || rect.X1 > 0 || rect.Y0 > 0 || rect.Y1 > 0) &&
28 |       rect.pageNumber === firstPageNumber,
29 |   );
30 | 
31 |   const optimal = rectsWithSizeOnFirstPage.reduce((res, rect) => {
32 |     return {
33 |       X0: Math.min(res.X0, rect.X0),
34 |       X1: Math.max(res.X1, rect.X1),
35 | 
36 |       Y0: Math.min(res.Y0, rect.Y0),
37 |       Y1: Math.max(res.Y1, rect.Y1),
38 | 
39 |       pageNumber: firstPageNumber,
40 |     };
41 |   }, rectsWithSizeOnFirstPage[0]);
42 | 
43 |   const { X0, X1, Y0, Y1, pageNumber } = optimal;
44 | 
45 |   return {
46 |     left: X0,
47 |     top: Y0,
48 |     width: X1 - X0,
49 |     height: Y1 - Y0,
50 |     pageNumber,
51 |   };
52 | };
53 | 
54 | export default getBoundingRect;
55 | 


--------------------------------------------------------------------------------
/src/lib/get-client-rects.ts:
--------------------------------------------------------------------------------
 1 | import type { LTWHP, Page } from "../types.js";
 2 | 
 3 | import optimizeClientRects from "./optimize-client-rects";
 4 | 
 5 | const isClientRectInsidePageRect = (clientRect: DOMRect, pageRect: DOMRect) => {
 6 |   if (clientRect.top < pageRect.top) {
 7 |     return false;
 8 |   }
 9 |   if (clientRect.bottom > pageRect.bottom) {
10 |     return false;
11 |   }
12 |   if (clientRect.right > pageRect.right) {
13 |     return false;
14 |   }
15 |   if (clientRect.left < pageRect.left) {
16 |     return false;
17 |   }
18 | 
19 |   return true;
20 | };
21 | 
22 | const getClientRects = (
23 |   range: Range,
24 |   pages: Page[],
25 |   shouldOptimize = true,
26 | ): Array<LTWHP> => {
27 |   const clientRects = Array.from(range.getClientRects());
28 | 
29 |   const rects: LTWHP[] = [];
30 | 
31 |   for (const clientRect of clientRects) {
32 |     for (const page of pages) {
33 |       const pageRect = page.node.getBoundingClientRect();
34 | 
35 |       if (
36 |         isClientRectInsidePageRect(clientRect, pageRect) &&
37 |         clientRect.width > 0 &&
38 |         clientRect.height > 0 &&
39 |         clientRect.width < pageRect.width &&
40 |         clientRect.height < pageRect.height
41 |       ) {
42 |         const highlightedRect = {
43 |           top: clientRect.top + page.node.scrollTop - pageRect.top,
44 |           left: clientRect.left + page.node.scrollLeft - pageRect.left,
45 |           width: clientRect.width,
46 |           height: clientRect.height,
47 |           pageNumber: page.number,
48 |         } as LTWHP;
49 | 
50 |         rects.push(highlightedRect);
51 |       }
52 |     }
53 |   }
54 | 
55 |   return shouldOptimize ? optimizeClientRects(rects) : rects;
56 | };
57 | 
58 | export default getClientRects;
59 | 


--------------------------------------------------------------------------------
/src/lib/optimize-client-rects.ts:
--------------------------------------------------------------------------------
 1 | import type { LTWHP } from "../types.js";
 2 | 
 3 | const sort = (rects: Array<LTWHP>) =>
 4 |   rects.sort((A, B) => {
 5 |     const top = (A.pageNumber || 0) * A.top - (B.pageNumber || 0) * B.top;
 6 | 
 7 |     if (top === 0) {
 8 |       return A.left - B.left;
 9 |     }
10 | 
11 |     return top;
12 |   });
13 | 
14 | const overlaps = (A: LTWHP, B: LTWHP) =>
15 |   A.pageNumber === B.pageNumber &&
16 |   A.left <= B.left &&
17 |   B.left <= A.left + A.width;
18 | 
19 | const sameLine = (A: LTWHP, B: LTWHP, yMargin = 5) =>
20 |   A.pageNumber === B.pageNumber &&
21 |   Math.abs(A.top - B.top) < yMargin &&
22 |   Math.abs(A.height - B.height) < yMargin;
23 | 
24 | const inside = (A: LTWHP, B: LTWHP) =>
25 |   A.pageNumber === B.pageNumber &&
26 |   A.top > B.top &&
27 |   A.left > B.left &&
28 |   A.top + A.height < B.top + B.height &&
29 |   A.left + A.width < B.left + B.width;
30 | 
31 | const nextTo = (A: LTWHP, B: LTWHP, xMargin = 10) => {
32 |   const Aright = A.left + A.width;
33 |   const Bright = B.left + B.width;
34 | 
35 |   return (
36 |     A.pageNumber === B.pageNumber &&
37 |     A.left <= B.left &&
38 |     Aright <= Bright &&
39 |     B.left - Aright <= xMargin
40 |   );
41 | };
42 | 
43 | const extendWidth = (A: LTWHP, B: LTWHP) => {
44 |   // extend width of A to cover B
45 |   A.width = Math.max(B.width - A.left + B.left, A.width);
46 | };
47 | 
48 | const optimizeClientRects = (clientRects: Array<LTWHP>): Array<LTWHP> => {
49 |   const rects = sort(clientRects);
50 | 
51 |   const toRemove = new Set();
52 | 
53 |   const firstPass = rects.filter((rect) => {
54 |     return rects.every((otherRect) => {
55 |       return !inside(rect, otherRect);
56 |     });
57 |   });
58 | 
59 |   let passCount = 0;
60 | 
61 |   while (passCount <= 2) {
62 |     for (const A of firstPass) {
63 |       for (const B of firstPass) {
64 |         if (A === B || toRemove.has(A) || toRemove.has(B)) {
65 |           continue;
66 |         }
67 | 
68 |         if (!sameLine(A, B)) {
69 |           continue;
70 |         }
71 | 
72 |         if (overlaps(A, B)) {
73 |           extendWidth(A, B);
74 |           A.height = Math.max(A.height, B.height);
75 | 
76 |           toRemove.add(B);
77 |         }
78 | 
79 |         if (nextTo(A, B)) {
80 |           extendWidth(A, B);
81 | 
82 |           toRemove.add(B);
83 |         }
84 |       }
85 |     }
86 |     passCount += 1;
87 |   }
88 | 
89 |   return firstPass.filter((rect) => !toRemove.has(rect));
90 | };
91 | 
92 | export default optimizeClientRects;
93 | 


--------------------------------------------------------------------------------
/src/lib/pdfjs-dom.ts:
--------------------------------------------------------------------------------
 1 | import type { Page } from "../types";
 2 | 
 3 | export const getDocument = (element: Element): Document =>
 4 |   element.ownerDocument || document;
 5 | 
 6 | export const getWindow = (element: Element): typeof window =>
 7 |   getDocument(element).defaultView || window;
 8 | 
 9 | export const isHTMLElement = (
10 |   element: Element | null,
11 | ): element is HTMLElement =>
12 |   element != null &&
13 |   (element instanceof HTMLElement ||
14 |     element instanceof getWindow(element).HTMLElement);
15 | 
16 | export const isHTMLCanvasElement = (element: Element) =>
17 |   element instanceof HTMLCanvasElement ||
18 |   element instanceof getWindow(element).HTMLCanvasElement;
19 | 
20 | export const getPageFromElement = (target: HTMLElement): Page | null => {
21 |   const node = target.closest(".page");
22 | 
23 |   if (!isHTMLElement(node)) {
24 |     return null;
25 |   }
26 | 
27 |   const number = Number(node.dataset.pageNumber);
28 | 
29 |   return { node, number } as Page;
30 | };
31 | 
32 | export const getPagesFromRange = (range: Range): Page[] => {
33 |   const startParentElement = range.startContainer.parentElement;
34 |   const endParentElement = range.endContainer.parentElement;
35 | 
36 |   if (!isHTMLElement(startParentElement) || !isHTMLElement(endParentElement)) {
37 |     return [];
38 |   }
39 | 
40 |   const startPage = getPageFromElement(startParentElement);
41 |   const endPage = getPageFromElement(endParentElement);
42 | 
43 |   if (!startPage?.number || !endPage?.number) {
44 |     return [];
45 |   }
46 | 
47 |   if (startPage.number === endPage.number) {
48 |     return [startPage];
49 |   }
50 | 
51 |   if (startPage.number === endPage.number - 1) {
52 |     return [startPage, endPage];
53 |   }
54 | 
55 |   const pages: Page[] = [];
56 | 
57 |   let currentPageNumber = startPage.number;
58 | 
59 |   const document = startPage.node.ownerDocument;
60 | 
61 |   while (currentPageNumber <= endPage.number) {
62 |     const currentPage = getPageFromElement(
63 |       document.querySelector(
64 |         `[data-page-number='${currentPageNumber}'`,
65 |       ) as HTMLElement,
66 |     );
67 |     if (currentPage) {
68 |       pages.push(currentPage);
69 |     }
70 |     currentPageNumber++;
71 |   }
72 | 
73 |   return pages;
74 | };
75 | 
76 | export const findOrCreateContainerLayer = (
77 |   container: HTMLElement,
78 |   className: string,
79 |   selector?: string,
80 | ) => {
81 |   const doc = getDocument(container);
82 |   let layer = container.querySelector(selector ? selector : `.${className}`);
83 | 
84 |   if (!layer) {
85 |     layer = doc.createElement("div");
86 |     layer.className = className;
87 |     container.appendChild(layer);
88 |   }
89 | 
90 |   return layer;
91 | };
92 | 


--------------------------------------------------------------------------------
/src/style/AreaHighlight.module.css:
--------------------------------------------------------------------------------
 1 | .areaHighlight {
 2 |   border: 1px solid #333;
 3 |   background-color: rgba(252, 232, 151, 1.0);
 4 |   opacity: 1;
 5 |   mix-blend-mode: multiply;
 6 | }
 7 | 
 8 | .part {
 9 |   cursor: pointer;
10 |   position: absolute;
11 |   background: rgba(255, 226, 143, 1);
12 |   transition: background 0.3s;
13 | }
14 | 
15 | .scrolledTo .part {
16 |   background: #ff4141;
17 | }


--------------------------------------------------------------------------------
/src/style/Highlight.module.css:
--------------------------------------------------------------------------------
 1 | .highlight {
 2 |   position: absolute;
 3 | }
 4 | 
 5 | .emoji {
 6 |   position: absolute;
 7 |   color: black;
 8 |   opacity: 1;
 9 |   font-size: 28px;
10 | }
11 | 
12 | .parts {
13 |   opacity: 1;
14 | }
15 | 
16 | .part {
17 |   cursor: pointer;
18 |   position: absolute;
19 |   background: rgba(255, 226, 143, 1);
20 |   transition: background 0.3s;
21 | }
22 | 
23 | .scrolledTo .part {
24 |   background: #ff4141;
25 | }


--------------------------------------------------------------------------------
/src/style/MouseSelection.module.css:
--------------------------------------------------------------------------------
 1 | .mouseSelection {
 2 |   position: absolute;
 3 |   border: 1px dashed #333;
 4 |   background: rgba(252, 232, 151, 1);
 5 |   mix-blend-mode: multiply;
 6 | }
 7 | /* Internet Explorer support method */
 8 | @media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
 9 |   .mouseSelection {opacity: 0.5 }
10 | }
11 | 
12 | /* Microsoft Edge Browser 12+ (All) - @supports method */
13 | @supports (-ms-ime-align:auto) {
14 |   .mouseSelection {opacity: 0.5 }
15 | }
16 | 


--------------------------------------------------------------------------------
/src/style/PdfHighlighter.module.css:
--------------------------------------------------------------------------------
 1 | .container {
 2 |   position: absolute;
 3 |   overflow: auto;
 4 |   width: 100%;
 5 |   height: 100%;
 6 | }
 7 | 
 8 | .highlightLayer {
 9 |   position: absolute;
10 |   z-index: 3;
11 |   left: 0;
12 | }
13 | 
14 | .tipContainer {
15 |   z-index: 6;
16 |   position: absolute;
17 | }
18 | 
19 | .disableSelection {
20 |   user-select: none;
21 |   pointer-events: none;
22 | }
23 | 


--------------------------------------------------------------------------------
/src/style/Tip.module.css:
--------------------------------------------------------------------------------
 1 | .compact {
 2 |   cursor: pointer;
 3 |   background-color: #3d464d;
 4 |   border: 1px solid rgba(255, 255, 255, 0.25);
 5 |   color: white;
 6 |   padding: 5px 10px;
 7 |   border-radius: 3px;
 8 | }
 9 | 
10 | .card {
11 |   padding: 10px;
12 |   background: #fff;
13 |   background-clip: padding-box;
14 |   border: 1px solid #e8e8e8;
15 |   border-radius: 4px;
16 |   box-shadow: 0 2px 4px rgba(37, 40, 43, 0.2);
17 | }
18 | 
19 | .card textarea {
20 |   font-size: 16px;
21 |   width: 200px;
22 |   height: 70px;
23 | }
24 | 
25 | .card input[type="submit"] {
26 |   margin-top: 5px;
27 |   font-size: large;
28 | }


--------------------------------------------------------------------------------
/src/style/TipContainer.module.css:
--------------------------------------------------------------------------------
1 | .tipContainer {
2 |     z-index: 6;
3 |     position: absolute;
4 | }


--------------------------------------------------------------------------------
/src/style/index.css:
--------------------------------------------------------------------------------
 1 | @import "pdfjs-dist/web/pdf_viewer.css";
 2 | @import "./pdf_viewer.css";
 3 | 
 4 | .Highlight__popup {
 5 |     background-color: #3d464d;
 6 |     border: 1px solid rgba(255, 255, 255, 0.25);
 7 |     color: white;
 8 |     padding: 0.5rem 1rem;
 9 |     border-radius: 3px;
10 |     max-width: 300px;
11 |     max-height: 100px;
12 |     overflow-y: scroll;
13 | }


--------------------------------------------------------------------------------
/src/style/pdf_viewer.css:
--------------------------------------------------------------------------------
 1 | /* overrides for pdf_viewer.css from PDF.JS web viewer */
 2 | 
 3 | .textLayer {
 4 |   z-index: 2;
 5 |   opacity: 1;
 6 |   mix-blend-mode: multiply;
 7 |   display: flex;
 8 | }
 9 | 
10 | .annotationLayer {
11 |   position: absolute;
12 |   top: 0;
13 | 
14 |   z-index: 3;
15 | }
16 | 
17 | html
18 |   body
19 |   .textLayer
20 |   > div:not(.PdfHighlighter__highlight-layer):not(.Highlight):not(.Highlight__emoji) {
21 |   opacity: 1;
22 |   mix-blend-mode: multiply;
23 | }
24 | 
25 | .textLayer ::selection {
26 |   background: rgba(252, 232, 151, 1);
27 |   mix-blend-mode: multiply;
28 | }
29 | 
30 | @media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
31 |   .textLayer {opacity: 0.5;}
32 | }
33 | 
34 | /* Internet Explorer support method */
35 | @media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
36 |   .textLayer {opacity: 0.5 }
37 | }
38 | 
39 | /* Microsoft Edge Browser 12+ (All) - @supports method */
40 | @supports (-ms-ime-align:auto) {
41 |   .textLayer {opacity: 0.5 }
42 | }
43 | 


--------------------------------------------------------------------------------
/src/types.ts:
--------------------------------------------------------------------------------
 1 | export interface LTWH {
 2 |   left: number;
 3 |   top: number;
 4 |   width: number;
 5 |   height: number;
 6 | }
 7 | 
 8 | export interface LTWHP extends LTWH {
 9 |   pageNumber?: number;
10 | }
11 | 
12 | export interface Scaled {
13 |   x1: number;
14 |   y1: number;
15 | 
16 |   x2: number;
17 |   y2: number;
18 | 
19 |   width: number;
20 |   height: number;
21 | 
22 |   pageNumber?: number;
23 | }
24 | 
25 | export interface Position {
26 |   boundingRect: LTWHP;
27 |   rects: Array<LTWHP>;
28 |   pageNumber: number;
29 | }
30 | 
31 | export interface ScaledPosition {
32 |   boundingRect: Scaled;
33 |   rects: Array<Scaled>;
34 |   pageNumber: number;
35 |   usePdfCoordinates?: boolean;
36 | }
37 | 
38 | export interface Content {
39 |   text?: string;
40 |   image?: string;
41 | }
42 | 
43 | export interface HighlightContent {
44 |   content: Content;
45 | }
46 | 
47 | export interface Comment {
48 |   text: string;
49 |   emoji: string;
50 | }
51 | 
52 | export interface HighlightComment {
53 |   comment: Comment;
54 | }
55 | 
56 | export interface NewHighlight extends HighlightContent, HighlightComment {
57 |   position: ScaledPosition;
58 | }
59 | 
60 | export interface IHighlight extends NewHighlight {
61 |   id: string;
62 | }
63 | 
64 | export interface ViewportHighlight extends HighlightContent, HighlightComment {
65 |   position: Position;
66 | }
67 | 
68 | export interface Viewport {
69 |   convertToPdfPoint: (x: number, y: number) => Array<number>;
70 |   convertToViewportRectangle: (pdfRectangle: Array<number>) => Array<number>;
71 |   width: number;
72 |   height: number;
73 | }
74 | 
75 | export interface Page {
76 |   node: HTMLElement;
77 |   number: number;
78 | }
79 | 


--------------------------------------------------------------------------------
/tsconfig.json:
--------------------------------------------------------------------------------
 1 | {
 2 |   "compilerOptions": {
 3 |     "target": "ES2018",
 4 |     "module": "ESNext",
 5 |     "lib": ["ES2018", "DOM"],
 6 |     "moduleResolution": "Node",
 7 |     "strict": true,
 8 |     "sourceMap": true,
 9 |     "esModuleInterop": true,
10 |     "noUnusedLocals": true,
11 |     "noUnusedParameters": false,
12 |     "noImplicitReturns": true,
13 |     "jsx": "react",
14 |     "outDir": "./dist",
15 |     "isolatedModules": true,
16 |     "declaration": true
17 |   },
18 |   "include": ["./src", "./decs.d.ts"]
19 | }
20 | 


--------------------------------------------------------------------------------
/vite.config.ts:
--------------------------------------------------------------------------------
 1 | import ts from "@rollup/plugin-typescript";
 2 | import { defineConfig } from "vite";
 3 | 
 4 | export default defineConfig({
 5 |   build: {
 6 |     lib: {
 7 |       entry: "./src/index.ts",
 8 |       name: "ReactPdfHighlighter",
 9 |       fileName: (format) => `index.${format}.js`,
10 |       formats: ["es", "cjs"],
11 |     },
12 |     rollupOptions: {
13 |       external: [
14 |         "react",
15 |         "react-dom",
16 |         "react/jsx-runtime",
17 |         /^react\/.*/,
18 |         /^react-dom\/.*/,
19 |       ],
20 |       plugins: [ts()],
21 |     },
22 |   },
23 | });
24 | 


--------------------------------------------------------------------------------