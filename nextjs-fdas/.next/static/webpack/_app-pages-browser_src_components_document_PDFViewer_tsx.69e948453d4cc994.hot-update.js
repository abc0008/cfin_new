"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("_app-pages-browser_src_components_document_PDFViewer_tsx",{

/***/ "(app-pages-browser)/./src/components/document/PDFViewer.tsx":
/*!***********************************************!*\
  !*** ./src/components/document/PDFViewer.tsx ***!
  \***********************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PDFViewer: function() { return /* binding */ PDFViewer; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _barrel_optimize_names_AlertCircle_File_Loader2_lucide_react__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! __barrel_optimize__?names=AlertCircle,File,Loader2!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/loader-circle.js\");\n/* harmony import */ var _barrel_optimize_names_AlertCircle_File_Loader2_lucide_react__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! __barrel_optimize__?names=AlertCircle,File,Loader2!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/circle-alert.js\");\n/* harmony import */ var _barrel_optimize_names_AlertCircle_File_Loader2_lucide_react__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! __barrel_optimize__?names=AlertCircle,File,Loader2!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/file.js\");\n/* harmony import */ var react_pdf_highlighter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-pdf-highlighter */ \"(app-pages-browser)/./node_modules/react-pdf-highlighter/dist/esm/index.js\");\n/* harmony import */ var _lib_api_documents__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/api/documents */ \"(app-pages-browser)/./src/lib/api/documents.ts\");\n/* harmony import */ var _lib_pdf_citationService__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/pdf/citationService */ \"(app-pages-browser)/./src/lib/pdf/citationService.ts\");\n/* __next_internal_client_entry_do_not_use__ PDFViewer auto */ \nvar _s = $RefreshSig$();\n\n\n\n\n\nfunction PDFViewer(param) {\n    let { document, isLoading, error, onCitationCreate, onCitationClick, aiHighlights = [], onCitationsLoaded, pdfUrl: propsPdfUrl, highlightId, renderingQuality = \"medium\", pageBufferSize = 5 } = param;\n    _s();\n    const [currentPage, setCurrentPage] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(1);\n    const [userHighlights, setUserHighlights] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [pdfUrl, setPdfUrl] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(propsPdfUrl || null);\n    const [errorState, setErrorState] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(error || null);\n    const [loadingState, setLoadingState] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [documentCitations, setDocumentCitations] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [totalPages, setTotalPages] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    const [visiblePages, setVisiblePages] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [loadedPages, setLoadedPages] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(new Set());\n    const [renderScale, setRenderScale] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(renderingQuality === \"low\" ? 1.0 : renderingQuality === \"medium\" ? 1.5 : 2.0);\n    const [isBrowser, setIsBrowser] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [currentPdfDocument, setCurrentPdfDocument] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const scrollViewerRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const cleanupRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(()=>{});\n    // Convert citations to highlights format\n    const citationHighlights = documentCitations.map(_lib_pdf_citationService__WEBPACK_IMPORTED_MODULE_4__.convertCitationToHighlight);\n    // Combine AI-generated highlights with user highlights and citation highlights\n    const allHighlights = [\n        ...userHighlights,\n        ...aiHighlights,\n        ...citationHighlights\n    ];\n    // Memory management: Page visibility tracking\n    const onVisiblePagesChanged = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((pages)=>{\n        setVisiblePages(pages);\n        // Only keep a buffer of pages in memory\n        const pagesToKeep = new Set();\n        // Add currently visible pages\n        pages.forEach((page)=>pagesToKeep.add(page));\n        // Add buffer pages (before and after visible pages)\n        const halfBuffer = Math.floor(pageBufferSize / 2);\n        pages.forEach((page)=>{\n            for(let i = 1; i <= halfBuffer; i++){\n                if (page - i > 0) pagesToKeep.add(page - i);\n                if (page + i <= totalPages) pagesToKeep.add(page + i);\n            }\n        });\n        // Update loaded pages state\n        setLoadedPages(pagesToKeep);\n    }, [\n        pageBufferSize,\n        totalPages\n    ]);\n    // Handle PDF document loading completion\n    const handleDocumentLoadSuccess = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((pdfDocument)=>{\n        setTotalPages(pdfDocument.numPages);\n        // Store cleanup function\n        cleanupRef.current = ()=>{\n            // Attempt to clean up PDF.js worker\n            if (pdfDocument && typeof pdfDocument.cleanup === \"function\") {\n                pdfDocument.cleanup();\n            }\n            // Clear page caches and destroy document\n            if (pdfDocument && typeof pdfDocument.destroy === \"function\") {\n                pdfDocument.destroy();\n            }\n            // Additional cleanup for any WebWorkers\n            if (window.pdfjsLib && window.pdfjsLib.GlobalWorkerOptions) {\n                // Force garbage collection on workers\n                console.log(\"PDF.js workers scheduled for cleanup\");\n            }\n        };\n    }, []);\n    // Define scrollToHighlight callback - IMPORTANT: must be defined before useEffect that uses it\n    const scrollToHighlight = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((highlightId)=>{\n        const highlight = allHighlights.find((h)=>h.id === highlightId);\n        if (highlight && scrollViewerRef.current) {\n            // Set current page to the highlight's page\n            setCurrentPage(highlight.position.pageNumber);\n            // Add a visual indicator by adding a temporary \"focus\" highlight\n            const existingIndex = userHighlights.findIndex((h)=>h.id === highlightId + \"-focus\");\n            if (existingIndex >= 0) {\n                // Remove the previous focus highlight\n                const updatedHighlights = [\n                    ...userHighlights\n                ];\n                updatedHighlights.splice(existingIndex, 1);\n                setUserHighlights(updatedHighlights);\n            }\n            // Add a new focus highlight (larger than the original highlight)\n            const focusHighlight = {\n                ...highlight,\n                id: highlightId + \"-focus\",\n                comment: {\n                    text: \"Focus highlight\",\n                    emoji: \"\\uD83D\\uDD0D\"\n                },\n                position: {\n                    ...highlight.position,\n                    rects: highlight.position.rects.map((rect)=>({\n                            ...rect,\n                            x1: rect.x1 - 5,\n                            y1: rect.y1 - 5,\n                            x2: rect.x2 + 5,\n                            y2: rect.y2 + 5,\n                            width: rect.width + 10,\n                            height: rect.height + 10\n                        }))\n                }\n            };\n            setUserHighlights((prev)=>[\n                    ...prev,\n                    focusHighlight\n                ]);\n            // Remove the focus highlight after a few seconds\n            setTimeout(()=>{\n                setUserHighlights((prev)=>prev.filter((h)=>h.id !== highlightId + \"-focus\"));\n            }, 3000);\n            // Try to scroll to the highlight using PdfHighlighter's method\n            if (scrollViewerRef.current) {\n                scrollViewerRef.current(highlight);\n            }\n            return true;\n        }\n        return false;\n    }, [\n        allHighlights,\n        userHighlights\n    ]);\n    // Handler for adding highlights\n    const addHighlight = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((highlight)=>{\n        setUserHighlights((prev)=>[\n                ...prev,\n                highlight\n            ]);\n        // If onCitationCreate callback exists, create a citation object\n        if (onCitationCreate && document) {\n            const citation = (0,_lib_pdf_citationService__WEBPACK_IMPORTED_MODULE_4__.convertHighlightToCitation)(highlight, document.metadata.id);\n            onCitationCreate(citation);\n        }\n    }, [\n        document,\n        onCitationCreate\n    ]);\n    // Handler for highlight click\n    const handleHighlightClick = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((highlight)=>{\n        if (onCitationClick) {\n            // Find the corresponding citation if it exists\n            const citation = documentCitations.find((c)=>c.highlightId === highlight.id);\n            if (citation) {\n                onCitationClick(citation);\n            } else {\n                onCitationClick(highlight);\n            }\n        }\n    }, [\n        documentCitations,\n        onCitationClick\n    ]);\n    // Set isBrowser to true once component mounts - always declare hooks in the same order\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        setIsBrowser(true);\n    }, []);\n    // Get document URL from props or fetch it when document changes\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!isBrowser) return;\n        if (propsPdfUrl) {\n            setPdfUrl(propsPdfUrl);\n            setErrorState(null);\n        } else if (document) {\n            const fetchDocumentUrl = async ()=>{\n                setLoadingState(\"Retrieving document URL...\");\n                try {\n                    const url = await _lib_api_documents__WEBPACK_IMPORTED_MODULE_3__.documentsApi.getDocumentUrl(document.metadata.id);\n                    setPdfUrl(url);\n                    setErrorState(null);\n                    setLoadingState(null);\n                } catch (error) {\n                    console.error(\"Error fetching document URL:\", error);\n                    setErrorState(\"Failed to retrieve document URL. Please try again later.\");\n                    setLoadingState(null);\n                }\n            };\n            fetchDocumentUrl();\n        } else {\n            setPdfUrl(null);\n        }\n    }, [\n        document,\n        propsPdfUrl,\n        isBrowser\n    ]);\n    // Fetch citations when document changes\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!isBrowser || !document) return;\n        const fetchCitations = async ()=>{\n            try {\n                setLoadingState(\"Loading document citations...\");\n                const citations = await _lib_api_documents__WEBPACK_IMPORTED_MODULE_3__.documentsApi.getDocumentCitations(document.metadata.id);\n                setDocumentCitations(citations);\n                // Convert citations to highlights and notify parent\n                const highlightsFromCitations = citations.map(_lib_pdf_citationService__WEBPACK_IMPORTED_MODULE_4__.convertCitationToHighlight);\n                if (onCitationsLoaded) {\n                    onCitationsLoaded(highlightsFromCitations);\n                }\n                setLoadingState(null);\n            } catch (error) {\n                console.error(\"Error fetching document citations:\", error);\n                // Don't set error state here as we still want to show the document even if citations fail\n                setLoadingState(null);\n            }\n        };\n        fetchCitations();\n    }, [\n        document,\n        onCitationsLoaded,\n        isBrowser\n    ]);\n    // Scroll to highlight when highlightId changes\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (highlightId && allHighlights.length > 0) {\n            const highlight = allHighlights.find((h)=>h.id === highlightId);\n            if (highlight) {\n                // Scroll to the highlight\n                scrollToHighlight(highlightId);\n            }\n        }\n    }, [\n        highlightId,\n        allHighlights,\n        scrollToHighlight\n    ]);\n    // Update render scale when renderingQuality changes\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!isBrowser) return;\n        setRenderScale(renderingQuality === \"low\" ? 1.0 : renderingQuality === \"medium\" ? 1.5 : 2.0);\n    }, [\n        renderingQuality,\n        isBrowser\n    ]);\n    // Cleanup on unmount\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        return ()=>{\n            console.log(\"PDFViewer unmounting, cleaning up resources\");\n            // Execute cleanup function\n            cleanupRef.current();\n            // Clean up blob URLs\n            (0,_lib_api_documents__WEBPACK_IMPORTED_MODULE_3__.cleanupBlobUrls)();\n            // Clear memory\n            setUserHighlights([]);\n            setDocumentCitations([]);\n            setPdfUrl(null);\n        };\n    }, []);\n    // Handle when PDF document is set\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (currentPdfDocument) {\n            handleDocumentLoadSuccess(currentPdfDocument);\n        }\n    }, [\n        currentPdfDocument,\n        handleDocumentLoadSuccess\n    ]);\n    // Skip rendering until we're in the browser\n    if (!isBrowser) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"h-full flex items-center justify-center\",\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"text-center\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_AlertCircle_File_Loader2_lucide_react__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n                        className: \"h-12 w-12 text-primary animate-spin mx-auto\"\n                    }, void 0, false, {\n                        fileName: \"/Users/alexcardell/AlexCoding_Local/cfin/nextjs-fdas/src/components/document/PDFViewer.tsx\",\n                        lineNumber: 314,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        className: \"mt-2 text-sm text-muted-foreground font-avenir-pro\",\n                        children: \"Loading PDF viewer...\"\n                    }, void 0, false, {\n                        fileName: \"/Users/alexcardell/AlexCoding_Local/cfin/nextjs-fdas/src/components/document/PDFViewer.tsx\",\n                        lineNumber: 315,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/alexcardell/AlexCoding_Local/cfin/nextjs-fdas/src/components/document/PDFViewer.tsx\",\n                lineNumber: 313,\n                columnNumber: 9\n            }, this)\n        }, void 0, false, {\n            fileName: \"/Users/alexcardell/AlexCoding_Local/cfin/nextjs-fdas/src/components/document/PDFViewer.tsx\",\n            lineNumber: 312,\n            columnNumber: 7\n        }, this);\n    }\n    if (isLoading || loadingState) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"h-full flex items-center justify-center\",\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"text-center\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_AlertCircle_File_Loader2_lucide_react__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n                        className: \"h-12 w-12 text-primary animate-spin mx-auto\"\n                    }, void 0, false, {\n                        fileName: \"/Users/alexcardell/AlexCoding_Local/cfin/nextjs-fdas/src/components/document/PDFViewer.tsx\",\n                        lineNumber: 325,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        className: \"mt-2 text-sm text-muted-foreground font-avenir-pro\",\n                        children: loadingState || \"Loading document...\"\n                    }, void 0, false, {\n                        fileName: \"/Users/alexcardell/AlexCoding_Local/cfin/nextjs-fdas/src/components/document/PDFViewer.tsx\",\n                        lineNumber: 326,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/alexcardell/AlexCoding_Local/cfin/nextjs-fdas/src/components/document/PDFViewer.tsx\",\n                lineNumber: 324,\n                columnNumber: 9\n            }, this)\n        }, void 0, false, {\n            fileName: \"/Users/alexcardell/AlexCoding_Local/cfin/nextjs-fdas/src/components/document/PDFViewer.tsx\",\n            lineNumber: 323,\n            columnNumber: 7\n        }, this);\n    }\n    // Use the error prop if provided, otherwise use the internal error state\n    if (errorState) {\n        // Show a user-friendly error if the PDF cannot be loaded\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"h-full flex items-center justify-center\",\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"text-center\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_AlertCircle_File_Loader2_lucide_react__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n                        className: \"h-12 w-12 text-red-500 mx-auto\"\n                    }, void 0, false, {\n                        fileName: \"/Users/alexcardell/AlexCoding_Local/cfin/nextjs-fdas/src/components/document/PDFViewer.tsx\",\n                        lineNumber: 338,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                        className: \"mt-2 text-lg font-semibold text-gray-900\",\n                        children: \"Unable to load PDF\"\n                    }, void 0, false, {\n                        fileName: \"/Users/alexcardell/AlexCoding_Local/cfin/nextjs-fdas/src/components/document/PDFViewer.tsx\",\n                        lineNumber: 339,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        className: \"mt-2 text-sm text-gray-500\",\n                        children: \"The original PDF file could not be retrieved. Interactive highlighting and citation features are unavailable.\"\n                    }, void 0, false, {\n                        fileName: \"/Users/alexcardell/AlexCoding_Local/cfin/nextjs-fdas/src/components/document/PDFViewer.tsx\",\n                        lineNumber: 340,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        className: \"mt-2 text-sm text-gray-400\",\n                        children: \"If you need to view the document text, please contact support or try re-uploading the original PDF.\"\n                    }, void 0, false, {\n                        fileName: \"/Users/alexcardell/AlexCoding_Local/cfin/nextjs-fdas/src/components/document/PDFViewer.tsx\",\n                        lineNumber: 343,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/alexcardell/AlexCoding_Local/cfin/nextjs-fdas/src/components/document/PDFViewer.tsx\",\n                lineNumber: 337,\n                columnNumber: 9\n            }, this)\n        }, void 0, false, {\n            fileName: \"/Users/alexcardell/AlexCoding_Local/cfin/nextjs-fdas/src/components/document/PDFViewer.tsx\",\n            lineNumber: 336,\n            columnNumber: 7\n        }, this);\n    }\n    if (!document || !pdfUrl) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"h-full flex items-center justify-center\",\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"text-center\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_AlertCircle_File_Loader2_lucide_react__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n                        className: \"h-12 w-12 text-gray-400 mx-auto\"\n                    }, void 0, false, {\n                        fileName: \"/Users/alexcardell/AlexCoding_Local/cfin/nextjs-fdas/src/components/document/PDFViewer.tsx\",\n                        lineNumber: 355,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                        className: \"mt-2 text-sm font-medium text-gray-900\",\n                        children: \"No document loaded\"\n                    }, void 0, false, {\n                        fileName: \"/Users/alexcardell/AlexCoding_Local/cfin/nextjs-fdas/src/components/document/PDFViewer.tsx\",\n                        lineNumber: 356,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        className: \"mt-1 text-sm text-gray-500\",\n                        children: \"Upload a document to view it here\"\n                    }, void 0, false, {\n                        fileName: \"/Users/alexcardell/AlexCoding_Local/cfin/nextjs-fdas/src/components/document/PDFViewer.tsx\",\n                        lineNumber: 357,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/alexcardell/AlexCoding_Local/cfin/nextjs-fdas/src/components/document/PDFViewer.tsx\",\n                lineNumber: 354,\n                columnNumber: 9\n            }, this)\n        }, void 0, false, {\n            fileName: \"/Users/alexcardell/AlexCoding_Local/cfin/nextjs-fdas/src/components/document/PDFViewer.tsx\",\n            lineNumber: 353,\n            columnNumber: 7\n        }, this);\n    }\n    // Render highlight element with popup\n    const renderHighlight = (highlight, index, setTip, hideTip, viewportToScaled, screenshot, isScrolledTo)=>{\n        var _highlight_comment, _highlight_comment1;\n        const isTextHighlight = !Boolean(highlight.content && highlight.content.image);\n        // Determine highlight type and color\n        const isAIHighlight = highlight.isAICitation || aiHighlights.some((h)=>h.id === highlight.id);\n        const highlightColor = isAIHighlight ? \"bg-accent/30\" : \"bg-primary/30\";\n        const triggerHighlightClick = ()=>handleHighlightClick(highlight);\n        const popupContent = /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"\".concat(isAIHighlight ? \"bg-accent text-accent-foreground\" : \"bg-primary text-primary-foreground\", \" text-sm p-2 rounded shadow cursor-pointer\"),\n            onClick: triggerHighlightClick,\n            children: isAIHighlight ? \"AI Citation: \" + (((_highlight_comment = highlight.comment) === null || _highlight_comment === void 0 ? void 0 : _highlight_comment.text) || \"Referenced in conversation\") : ((_highlight_comment1 = highlight.comment) === null || _highlight_comment1 === void 0 ? void 0 : _highlight_comment1.text) || \"User Highlight\"\n        }, void 0, false, {\n            fileName: \"/Users/alexcardell/AlexCoding_Local/cfin/nextjs-fdas/src/components/document/PDFViewer.tsx\",\n            lineNumber: 382,\n            columnNumber: 7\n        }, this);\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_pdf_highlighter__WEBPACK_IMPORTED_MODULE_2__.Popup, {\n            popupContent: popupContent,\n            onMouseOver: (popupContent)=>setTip(highlight, ()=>popupContent),\n            onMouseOut: hideTip,\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                onClick: triggerHighlightClick,\n                className: \"cursor-pointer\",\n                children: isTextHighlight ? // Using any type to avoid type errors with the Highlight component\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_pdf_highlighter__WEBPACK_IMPORTED_MODULE_2__.Highlight, {\n                    isScrolledTo: isScrolledTo,\n                    position: highlight.position,\n                    comment: highlight.comment\n                }, void 0, false, {\n                    fileName: \"/Users/alexcardell/AlexCoding_Local/cfin/nextjs-fdas/src/components/document/PDFViewer.tsx\",\n                    lineNumber: 402,\n                    columnNumber: 13\n                }, this) : // Using any type to avoid type errors with the AreaHighlight component\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_pdf_highlighter__WEBPACK_IMPORTED_MODULE_2__.AreaHighlight, {\n                    isScrolledTo: isScrolledTo,\n                    highlight: highlight,\n                    onChange: ()=>{}\n                }, void 0, false, {\n                    fileName: \"/Users/alexcardell/AlexCoding_Local/cfin/nextjs-fdas/src/components/document/PDFViewer.tsx\",\n                    lineNumber: 409,\n                    columnNumber: 13\n                }, this)\n            }, void 0, false, {\n                fileName: \"/Users/alexcardell/AlexCoding_Local/cfin/nextjs-fdas/src/components/document/PDFViewer.tsx\",\n                lineNumber: 399,\n                columnNumber: 9\n            }, this)\n        }, index, false, {\n            fileName: \"/Users/alexcardell/AlexCoding_Local/cfin/nextjs-fdas/src/components/document/PDFViewer.tsx\",\n            lineNumber: 393,\n            columnNumber: 7\n        }, this);\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"h-full bg-gray-50 flex flex-col relative\",\n        children: [\n            document && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"p-4 border-b border-gray-200\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                        className: \"text-lg font-medium text-gray-900\",\n                        children: document.metadata.filename\n                    }, void 0, false, {\n                        fileName: \"/Users/alexcardell/AlexCoding_Local/cfin/nextjs-fdas/src/components/document/PDFViewer.tsx\",\n                        lineNumber: 424,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"mt-1 flex flex-col sm:flex-row sm:flex-wrap sm:mt-0 sm:space-x-6\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"mt-2 flex items-center text-sm text-gray-500\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_AlertCircle_File_Loader2_lucide_react__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n                                        className: \"flex-shrink-0 mr-1.5 h-5 w-5 text-gray-400\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/alexcardell/AlexCoding_Local/cfin/nextjs-fdas/src/components/document/PDFViewer.tsx\",\n                                        lineNumber: 427,\n                                        columnNumber: 15\n                                    }, this),\n                                    document.metadata.mimeType\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/alexcardell/AlexCoding_Local/cfin/nextjs-fdas/src/components/document/PDFViewer.tsx\",\n                                lineNumber: 426,\n                                columnNumber: 13\n                            }, this),\n                            document.confidenceScore !== undefined && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"mt-2 flex items-center text-sm text-gray-500\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        className: \"mr-1.5\",\n                                        children: \"Confidence:\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/alexcardell/AlexCoding_Local/cfin/nextjs-fdas/src/components/document/PDFViewer.tsx\",\n                                        lineNumber: 432,\n                                        columnNumber: 17\n                                    }, this),\n                                    Math.round(document.confidenceScore * 100),\n                                    \"%\"\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/alexcardell/AlexCoding_Local/cfin/nextjs-fdas/src/components/document/PDFViewer.tsx\",\n                                lineNumber: 431,\n                                columnNumber: 15\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/alexcardell/AlexCoding_Local/cfin/nextjs-fdas/src/components/document/PDFViewer.tsx\",\n                        lineNumber: 425,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/alexcardell/AlexCoding_Local/cfin/nextjs-fdas/src/components/document/PDFViewer.tsx\",\n                lineNumber: 423,\n                columnNumber: 9\n            }, this),\n            pdfUrl && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex-1 overflow-auto\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_pdf_highlighter__WEBPACK_IMPORTED_MODULE_2__.PdfLoader, {\n                    url: pdfUrl,\n                    beforeLoad: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"p-4\",\n                        children: \"Loading PDF...\"\n                    }, void 0, false, {\n                        fileName: \"/Users/alexcardell/AlexCoding_Local/cfin/nextjs-fdas/src/components/document/PDFViewer.tsx\",\n                        lineNumber: 444,\n                        columnNumber: 25\n                    }, void 0),\n                    onError: (error)=>{\n                        console.error(\"Error loading PDF:\", error);\n                        setErrorState(\"Failed to load PDF. The file might be corrupted or password protected.\");\n                    },\n                    cMapUrl: \"https://unpkg.com/pdfjs-dist@2.16.105/cmaps/\",\n                    cMapPacked: true,\n                    workerSrc: \"https://unpkg.com/pdfjs-dist@2.16.105/build/pdf.worker.min.js\",\n                    children: (pdfDocument)=>{\n                        // Update document in state after render without using hooks\n                        // This is a safe approach that doesn't violate hook rules\n                        // We use a regular function and setTimeout to defer the state update\n                        if (pdfDocument) {\n                            // Use setTimeout to move state update out of render phase\n                            setTimeout(()=>{\n                                setCurrentPdfDocument(pdfDocument);\n                            }, 0);\n                        }\n                        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_pdf_highlighter__WEBPACK_IMPORTED_MODULE_2__.PdfHighlighter, {\n                            pdfDocument: pdfDocument,\n                            enableAreaSelection: (event)=>event.altKey,\n                            onScrollChange: onVisiblePagesChanged,\n                            scrollRef: (scrollTo)=>{\n                                scrollViewerRef.current = scrollTo;\n                            },\n                            onSelectionFinished: (position, content, hideTipAndSelection, transformSelection)=>{\n                                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"bg-white p-2 border border-gray-300 rounded shadow-md\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"flex justify-between mb-2\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                children: \"Add Highlight\"\n                                            }, void 0, false, {\n                                                fileName: \"/Users/alexcardell/AlexCoding_Local/cfin/nextjs-fdas/src/components/document/PDFViewer.tsx\",\n                                                lineNumber: 481,\n                                                columnNumber: 27\n                                            }, void 0),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                className: \"text-primary hover:text-primary/80 px-3 py-1 rounded text-sm font-avenir-pro\",\n                                                onClick: ()=>{\n                                                    const highlightId = \"highlight-\".concat(Date.now());\n                                                    addHighlight({\n                                                        id: highlightId,\n                                                        content,\n                                                        position,\n                                                        comment: {\n                                                            text: \"User highlight\",\n                                                            emoji: \"✍️\"\n                                                        }\n                                                    });\n                                                    hideTipAndSelection();\n                                                },\n                                                children: \"Save\"\n                                            }, void 0, false, {\n                                                fileName: \"/Users/alexcardell/AlexCoding_Local/cfin/nextjs-fdas/src/components/document/PDFViewer.tsx\",\n                                                lineNumber: 482,\n                                                columnNumber: 27\n                                            }, void 0)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/Users/alexcardell/AlexCoding_Local/cfin/nextjs-fdas/src/components/document/PDFViewer.tsx\",\n                                        lineNumber: 480,\n                                        columnNumber: 25\n                                    }, void 0)\n                                }, void 0, false, {\n                                    fileName: \"/Users/alexcardell/AlexCoding_Local/cfin/nextjs-fdas/src/components/document/PDFViewer.tsx\",\n                                    lineNumber: 479,\n                                    columnNumber: 23\n                                }, void 0);\n                            },\n                            highlights: allHighlights,\n                            highlightTransform: renderHighlight,\n                            pdfScaleValue: renderScale.toString()\n                        }, void 0, false, {\n                            fileName: \"/Users/alexcardell/AlexCoding_Local/cfin/nextjs-fdas/src/components/document/PDFViewer.tsx\",\n                            lineNumber: 465,\n                            columnNumber: 17\n                        }, this);\n                    }\n                }, void 0, false, {\n                    fileName: \"/Users/alexcardell/AlexCoding_Local/cfin/nextjs-fdas/src/components/document/PDFViewer.tsx\",\n                    lineNumber: 442,\n                    columnNumber: 11\n                }, this)\n            }, void 0, false, {\n                fileName: \"/Users/alexcardell/AlexCoding_Local/cfin/nextjs-fdas/src/components/document/PDFViewer.tsx\",\n                lineNumber: 441,\n                columnNumber: 9\n            }, this),\n            totalPages > 50 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"absolute bottom-4 right-4 bg-white rounded-md shadow p-2 text-xs z-10 border border-gray-200\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"mb-1 font-medium\",\n                        children: \"Performance Options\"\n                    }, void 0, false, {\n                        fileName: \"/Users/alexcardell/AlexCoding_Local/cfin/nextjs-fdas/src/components/document/PDFViewer.tsx\",\n                        lineNumber: 517,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex space-x-2\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                className: \"px-2 py-1 rounded \".concat(renderingQuality === \"low\" ? \"bg-indigo-600 text-white\" : \"bg-gray-200\"),\n                                onClick: ()=>setRenderScale(1.0),\n                                children: \"Low\"\n                            }, void 0, false, {\n                                fileName: \"/Users/alexcardell/AlexCoding_Local/cfin/nextjs-fdas/src/components/document/PDFViewer.tsx\",\n                                lineNumber: 519,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                className: \"px-2 py-1 rounded \".concat(renderingQuality === \"medium\" ? \"bg-indigo-600 text-white\" : \"bg-gray-200\"),\n                                onClick: ()=>setRenderScale(1.5),\n                                children: \"Medium\"\n                            }, void 0, false, {\n                                fileName: \"/Users/alexcardell/AlexCoding_Local/cfin/nextjs-fdas/src/components/document/PDFViewer.tsx\",\n                                lineNumber: 525,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                className: \"px-2 py-1 rounded \".concat(renderingQuality === \"high\" ? \"bg-indigo-600 text-white\" : \"bg-gray-200\"),\n                                onClick: ()=>setRenderScale(2.0),\n                                children: \"High\"\n                            }, void 0, false, {\n                                fileName: \"/Users/alexcardell/AlexCoding_Local/cfin/nextjs-fdas/src/components/document/PDFViewer.tsx\",\n                                lineNumber: 531,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/alexcardell/AlexCoding_Local/cfin/nextjs-fdas/src/components/document/PDFViewer.tsx\",\n                        lineNumber: 518,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/alexcardell/AlexCoding_Local/cfin/nextjs-fdas/src/components/document/PDFViewer.tsx\",\n                lineNumber: 516,\n                columnNumber: 9\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/alexcardell/AlexCoding_Local/cfin/nextjs-fdas/src/components/document/PDFViewer.tsx\",\n        lineNumber: 421,\n        columnNumber: 5\n    }, this);\n}\n_s(PDFViewer, \"udbHqps7paQ9oLTUfgluoGDBuNI=\");\n_c = PDFViewer;\nvar _c;\n$RefreshReg$(_c, \"PDFViewer\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9jb21wb25lbnRzL2RvY3VtZW50L1BERlZpZXdlci50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBRXdFO0FBQ2Q7QUFVM0I7QUFDcUM7QUFDK0I7QUF1QjVGLFNBQVNpQixVQUFVLEtBWVQ7UUFaUyxFQUN4QkMsUUFBUSxFQUNSQyxTQUFTLEVBQ1RDLEtBQUssRUFDTEMsZ0JBQWdCLEVBQ2hCQyxlQUFlLEVBQ2ZDLGVBQWUsRUFBRSxFQUNqQkMsaUJBQWlCLEVBQ2pCQyxRQUFRQyxXQUFXLEVBQ25CQyxXQUFXLEVBQ1hDLG1CQUFtQixRQUFRLEVBQzNCQyxpQkFBaUIsQ0FBQyxFQUNILEdBWlM7O0lBYXhCLE1BQU0sQ0FBQ0MsYUFBYUMsZUFBZSxHQUFHOUIsK0NBQVFBLENBQUM7SUFDL0MsTUFBTSxDQUFDK0IsZ0JBQWdCQyxrQkFBa0IsR0FBR2hDLCtDQUFRQSxDQUFlLEVBQUU7SUFDckUsTUFBTSxDQUFDd0IsUUFBUVMsVUFBVSxHQUFHakMsK0NBQVFBLENBQWdCeUIsZUFBZTtJQUNuRSxNQUFNLENBQUNTLFlBQVlDLGNBQWMsR0FBR25DLCtDQUFRQSxDQUFnQm1CLFNBQVM7SUFDckUsTUFBTSxDQUFDaUIsY0FBY0MsZ0JBQWdCLEdBQUdyQywrQ0FBUUEsQ0FBZ0I7SUFDaEUsTUFBTSxDQUFDc0MsbUJBQW1CQyxxQkFBcUIsR0FBR3ZDLCtDQUFRQSxDQUFhLEVBQUU7SUFDekUsTUFBTSxDQUFDd0MsWUFBWUMsY0FBYyxHQUFHekMsK0NBQVFBLENBQVM7SUFDckQsTUFBTSxDQUFDMEMsY0FBY0MsZ0JBQWdCLEdBQUczQywrQ0FBUUEsQ0FBVyxFQUFFO0lBQzdELE1BQU0sQ0FBQzRDLGFBQWFDLGVBQWUsR0FBRzdDLCtDQUFRQSxDQUFjLElBQUk4QztJQUNoRSxNQUFNLENBQUNDLGFBQWFDLGVBQWUsR0FBR2hELCtDQUFRQSxDQUM1QzJCLHFCQUFxQixRQUFRLE1BQzdCQSxxQkFBcUIsV0FBVyxNQUFN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Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQVFiO0dBdmZnQmhDO0tBQUFBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL3NyYy9jb21wb25lbnRzL2RvY3VtZW50L1BERlZpZXdlci50c3g/YTYwMSJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCc7XG5cbmltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSwgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlUmVmIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgRmlsZSwgTG9hZGVyMiwgQWxlcnRDaXJjbGUgfSBmcm9tICdsdWNpZGUtcmVhY3QnO1xuaW1wb3J0IHsgUHJvY2Vzc2VkRG9jdW1lbnQsIENpdGF0aW9uIH0gZnJvbSAnQC90eXBlcyc7XG5pbXBvcnQge1xuICBQZGZMb2FkZXIsXG4gIFBkZkhpZ2hsaWdodGVyLFxuICBIaWdobGlnaHQsXG4gIFBvcHVwLFxuICBBcmVhSGlnaGxpZ2h0LFxuICBJSGlnaGxpZ2h0LFxuICBMVFdIUCBcbn0gZnJvbSBcInJlYWN0LXBkZi1oaWdobGlnaHRlclwiO1xuaW1wb3J0IHsgZG9jdW1lbnRzQXBpLCBjbGVhbnVwQmxvYlVybHMgfSBmcm9tICdAL2xpYi9hcGkvZG9jdW1lbnRzJztcbmltcG9ydCB7IGNvbnZlcnRDaXRhdGlvblRvSGlnaGxpZ2h0LCBjb252ZXJ0SGlnaGxpZ2h0VG9DaXRhdGlvbiB9IGZyb20gJ0AvbGliL3BkZi9jaXRhdGlvblNlcnZpY2UnO1xuXG4vLyBBZGQgUERGLmpzIHR5cGUgZGVjbGFyYXRpb25cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIFdpbmRvdyB7XG4gICAgcGRmanNMaWI/OiBhbnk7XG4gIH1cbn1cblxuaW50ZXJmYWNlIFBERlZpZXdlclByb3BzIHtcbiAgZG9jdW1lbnQ/OiBQcm9jZXNzZWREb2N1bWVudDtcbiAgaXNMb2FkaW5nPzogYm9vbGVhbjtcbiAgZXJyb3I/OiBzdHJpbmc7XG4gIG9uQ2l0YXRpb25DcmVhdGU/OiAoY2l0YXRpb246IE9taXQ8Q2l0YXRpb24sICdpZCc+KSA9PiB2b2lkO1xuICBvbkNpdGF0aW9uQ2xpY2s/OiAoY2l0YXRpb246IENpdGF0aW9uIHwgSUhpZ2hsaWdodCkgPT4gdm9pZDtcbiAgYWlIaWdobGlnaHRzPzogSUhpZ2hsaWdodFtdO1xuICBvbkNpdGF0aW9uc0xvYWRlZD86IChjaXRhdGlvbnM6IElIaWdobGlnaHRbXSkgPT4gdm9pZDtcbiAgcGRmVXJsPzogc3RyaW5nO1xuICBoaWdobGlnaHRJZD86IHN0cmluZyB8IG51bGw7XG4gIHJlbmRlcmluZ1F1YWxpdHk/OiAnbG93JyB8ICdtZWRpdW0nIHwgJ2hpZ2gnO1xuICBwYWdlQnVmZmVyU2l6ZT86IG51bWJlcjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIFBERlZpZXdlcih7IFxuICBkb2N1bWVudCwgXG4gIGlzTG9hZGluZywgXG4gIGVycm9yLCBcbiAgb25DaXRhdGlvbkNyZWF0ZSwgXG4gIG9uQ2l0YXRpb25DbGljayxcbiAgYWlIaWdobGlnaHRzID0gW10sIFxuICBvbkNpdGF0aW9uc0xvYWRlZCxcbiAgcGRmVXJsOiBwcm9wc1BkZlVybCxcbiAgaGlnaGxpZ2h0SWQsXG4gIHJlbmRlcmluZ1F1YWxpdHkgPSAnbWVkaXVtJyxcbiAgcGFnZUJ1ZmZlclNpemUgPSA1XG59OiBQREZWaWV3ZXJQcm9wcykge1xuICBjb25zdCBbY3VycmVudFBhZ2UsIHNldEN1cnJlbnRQYWdlXSA9IHVzZVN0YXRlKDEpO1xuICBjb25zdCBbdXNlckhpZ2hsaWdodHMsIHNldFVzZXJIaWdobGlnaHRzXSA9IHVzZVN0YXRlPElIaWdobGlnaHRbXT4oW10pO1xuICBjb25zdCBbcGRmVXJsLCBzZXRQZGZVcmxdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4ocHJvcHNQZGZVcmwgfHwgbnVsbCk7XG4gIGNvbnN0IFtlcnJvclN0YXRlLCBzZXRFcnJvclN0YXRlXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KGVycm9yIHx8IG51bGwpO1xuICBjb25zdCBbbG9hZGluZ1N0YXRlLCBzZXRMb2FkaW5nU3RhdGVdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtkb2N1bWVudENpdGF0aW9ucywgc2V0RG9jdW1lbnRDaXRhdGlvbnNdID0gdXNlU3RhdGU8Q2l0YXRpb25bXT4oW10pO1xuICBjb25zdCBbdG90YWxQYWdlcywgc2V0VG90YWxQYWdlc10gPSB1c2VTdGF0ZTxudW1iZXI+KDApO1xuICBjb25zdCBbdmlzaWJsZVBhZ2VzLCBzZXRWaXNpYmxlUGFnZXNdID0gdXNlU3RhdGU8bnVtYmVyW10+KFtdKTtcbiAgY29uc3QgW2xvYWRlZFBhZ2VzLCBzZXRMb2FkZWRQYWdlc10gPSB1c2VTdGF0ZTxTZXQ8bnVtYmVyPj4obmV3IFNldCgpKTtcbiAgY29uc3QgW3JlbmRlclNjYWxlLCBzZXRSZW5kZXJTY2FsZV0gPSB1c2VTdGF0ZTxudW1iZXI+KFxuICAgIHJlbmRlcmluZ1F1YWxpdHkgPT09ICdsb3cnID8gMS4wIDogXG4gICAgcmVuZGVyaW5nUXVhbGl0eSA9PT0gJ21lZGl1bScgPyAxLjUgOiAyLjBcbiAgKTtcbiAgY29uc3QgW2lzQnJvd3Nlciwgc2V0SXNCcm93c2VyXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgXG4gIGNvbnN0IFtjdXJyZW50UGRmRG9jdW1lbnQsIHNldEN1cnJlbnRQZGZEb2N1bWVudF0gPSB1c2VTdGF0ZTxhbnk+KG51bGwpO1xuICBjb25zdCBzY3JvbGxWaWV3ZXJSZWYgPSB1c2VSZWY8KChoaWdobGlnaHQ6IElIaWdobGlnaHQpID0+IHZvaWQpIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IGNsZWFudXBSZWYgPSB1c2VSZWY8KCkgPT4gdm9pZD4oKCkgPT4ge30pO1xuICBcbiAgLy8gQ29udmVydCBjaXRhdGlvbnMgdG8gaGlnaGxpZ2h0cyBmb3JtYXRcbiAgY29uc3QgY2l0YXRpb25IaWdobGlnaHRzID0gZG9jdW1lbnRDaXRhdGlvbnMubWFwKGNvbnZlcnRDaXRhdGlvblRvSGlnaGxpZ2h0KTtcbiAgXG4gIC8vIENvbWJpbmUgQUktZ2VuZXJhdGVkIGhpZ2hsaWdodHMgd2l0aCB1c2VyIGhpZ2hsaWdodHMgYW5kIGNpdGF0aW9uIGhpZ2hsaWdodHNcbiAgY29uc3QgYWxsSGlnaGxpZ2h0cyA9IFsuLi51c2VySGlnaGxpZ2h0cywgLi4uYWlIaWdobGlnaHRzLCAuLi5jaXRhdGlvbkhpZ2hsaWdodHNdO1xuICBcbiAgLy8gTWVtb3J5IG1hbmFnZW1lbnQ6IFBhZ2UgdmlzaWJpbGl0eSB0cmFja2luZ1xuICBjb25zdCBvblZpc2libGVQYWdlc0NoYW5nZWQgPSB1c2VDYWxsYmFjaygocGFnZXM6IG51bWJlcltdKSA9PiB7XG4gICAgc2V0VmlzaWJsZVBhZ2VzKHBhZ2VzKTtcbiAgICBcbiAgICAvLyBPbmx5IGtlZXAgYSBidWZmZXIgb2YgcGFnZXMgaW4gbWVtb3J5XG4gICAgY29uc3QgcGFnZXNUb0tlZXAgPSBuZXcgU2V0PG51bWJlcj4oKTtcbiAgICBcbiAgICAvLyBBZGQgY3VycmVudGx5IHZpc2libGUgcGFnZXNcbiAgICBwYWdlcy5mb3JFYWNoKHBhZ2UgPT4gcGFnZXNUb0tlZXAuYWRkKHBhZ2UpKTtcbiAgICBcbiAgICAvLyBBZGQgYnVmZmVyIHBhZ2VzIChiZWZvcmUgYW5kIGFmdGVyIHZpc2libGUgcGFnZXMpXG4gICAgY29uc3QgaGFsZkJ1ZmZlciA9IE1hdGguZmxvb3IocGFnZUJ1ZmZlclNpemUgLyAyKTtcbiAgICBwYWdlcy5mb3JFYWNoKHBhZ2UgPT4ge1xuICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gaGFsZkJ1ZmZlcjsgaSsrKSB7XG4gICAgICAgIGlmIChwYWdlIC0gaSA+IDApIHBhZ2VzVG9LZWVwLmFkZChwYWdlIC0gaSk7XG4gICAgICAgIGlmIChwYWdlICsgaSA8PSB0b3RhbFBhZ2VzKSBwYWdlc1RvS2VlcC5hZGQocGFnZSArIGkpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIC8vIFVwZGF0ZSBsb2FkZWQgcGFnZXMgc3RhdGVcbiAgICBzZXRMb2FkZWRQYWdlcyhwYWdlc1RvS2VlcCk7XG4gICAgXG4gIH0sIFtwYWdlQnVmZmVyU2l6ZSwgdG90YWxQYWdlc10pO1xuICBcbiAgLy8gSGFuZGxlIFBERiBkb2N1bWVudCBsb2FkaW5nIGNvbXBsZXRpb25cbiAgY29uc3QgaGFuZGxlRG9jdW1lbnRMb2FkU3VjY2VzcyA9IHVzZUNhbGxiYWNrKChwZGZEb2N1bWVudDogYW55KSA9PiB7XG4gICAgc2V0VG90YWxQYWdlcyhwZGZEb2N1bWVudC5udW1QYWdlcyk7XG4gICAgXG4gICAgLy8gU3RvcmUgY2xlYW51cCBmdW5jdGlvblxuICAgIGNsZWFudXBSZWYuY3VycmVudCA9ICgpID0+IHtcbiAgICAgIC8vIEF0dGVtcHQgdG8gY2xlYW4gdXAgUERGLmpzIHdvcmtlclxuICAgICAgaWYgKHBkZkRvY3VtZW50ICYmIHR5cGVvZiBwZGZEb2N1bWVudC5jbGVhbnVwID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHBkZkRvY3VtZW50LmNsZWFudXAoKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gQ2xlYXIgcGFnZSBjYWNoZXMgYW5kIGRlc3Ryb3kgZG9jdW1lbnRcbiAgICAgIGlmIChwZGZEb2N1bWVudCAmJiB0eXBlb2YgcGRmRG9jdW1lbnQuZGVzdHJveSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBwZGZEb2N1bWVudC5kZXN0cm95KCk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIEFkZGl0aW9uYWwgY2xlYW51cCBmb3IgYW55IFdlYldvcmtlcnNcbiAgICAgIGlmICh3aW5kb3cucGRmanNMaWIgJiYgd2luZG93LnBkZmpzTGliLkdsb2JhbFdvcmtlck9wdGlvbnMpIHtcbiAgICAgICAgLy8gRm9yY2UgZ2FyYmFnZSBjb2xsZWN0aW9uIG9uIHdvcmtlcnNcbiAgICAgICAgY29uc29sZS5sb2coJ1BERi5qcyB3b3JrZXJzIHNjaGVkdWxlZCBmb3IgY2xlYW51cCcpO1xuICAgICAgfVxuICAgIH07XG4gIH0sIFtdKTtcbiAgXG4gIC8vIERlZmluZSBzY3JvbGxUb0hpZ2hsaWdodCBjYWxsYmFjayAtIElNUE9SVEFOVDogbXVzdCBiZSBkZWZpbmVkIGJlZm9yZSB1c2VFZmZlY3QgdGhhdCB1c2VzIGl0XG4gIGNvbnN0IHNjcm9sbFRvSGlnaGxpZ2h0ID0gdXNlQ2FsbGJhY2soKGhpZ2hsaWdodElkOiBzdHJpbmcpID0+IHtcbiAgICBjb25zdCBoaWdobGlnaHQgPSBhbGxIaWdobGlnaHRzLmZpbmQoaCA9PiBoLmlkID09PSBoaWdobGlnaHRJZCk7XG4gICAgaWYgKGhpZ2hsaWdodCAmJiBzY3JvbGxWaWV3ZXJSZWYuY3VycmVudCkge1xuICAgICAgLy8gU2V0IGN1cnJlbnQgcGFnZSB0byB0aGUgaGlnaGxpZ2h0J3MgcGFnZVxuICAgICAgc2V0Q3VycmVudFBhZ2UoaGlnaGxpZ2h0LnBvc2l0aW9uLnBhZ2VOdW1iZXIpO1xuICAgICAgXG4gICAgICAvLyBBZGQgYSB2aXN1YWwgaW5kaWNhdG9yIGJ5IGFkZGluZyBhIHRlbXBvcmFyeSBcImZvY3VzXCIgaGlnaGxpZ2h0XG4gICAgICBjb25zdCBleGlzdGluZ0luZGV4ID0gdXNlckhpZ2hsaWdodHMuZmluZEluZGV4KGggPT4gaC5pZCA9PT0gaGlnaGxpZ2h0SWQgKyAnLWZvY3VzJyk7XG4gICAgICBpZiAoZXhpc3RpbmdJbmRleCA+PSAwKSB7XG4gICAgICAgIC8vIFJlbW92ZSB0aGUgcHJldmlvdXMgZm9jdXMgaGlnaGxpZ2h0XG4gICAgICAgIGNvbnN0IHVwZGF0ZWRIaWdobGlnaHRzID0gWy4uLnVzZXJIaWdobGlnaHRzXTtcbiAgICAgICAgdXBkYXRlZEhpZ2hsaWdodHMuc3BsaWNlKGV4aXN0aW5nSW5kZXgsIDEpO1xuICAgICAgICBzZXRVc2VySGlnaGxpZ2h0cyh1cGRhdGVkSGlnaGxpZ2h0cyk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIEFkZCBhIG5ldyBmb2N1cyBoaWdobGlnaHQgKGxhcmdlciB0aGFuIHRoZSBvcmlnaW5hbCBoaWdobGlnaHQpXG4gICAgICBjb25zdCBmb2N1c0hpZ2hsaWdodCA9IHtcbiAgICAgICAgLi4uaGlnaGxpZ2h0LFxuICAgICAgICBpZDogaGlnaGxpZ2h0SWQgKyAnLWZvY3VzJyxcbiAgICAgICAgY29tbWVudDoge1xuICAgICAgICAgIHRleHQ6IFwiRm9jdXMgaGlnaGxpZ2h0XCIsXG4gICAgICAgICAgZW1vamk6IFwi8J+UjVwiXG4gICAgICAgIH0sXG4gICAgICAgIHBvc2l0aW9uOiB7XG4gICAgICAgICAgLi4uaGlnaGxpZ2h0LnBvc2l0aW9uLFxuICAgICAgICAgIHJlY3RzOiBoaWdobGlnaHQucG9zaXRpb24ucmVjdHMubWFwKHJlY3QgPT4gKHtcbiAgICAgICAgICAgIC4uLnJlY3QsXG4gICAgICAgICAgICB4MTogcmVjdC54MSAtIDUsXG4gICAgICAgICAgICB5MTogcmVjdC55MSAtIDUsXG4gICAgICAgICAgICB4MjogcmVjdC54MiArIDUsXG4gICAgICAgICAgICB5MjogcmVjdC55MiArIDUsXG4gICAgICAgICAgICB3aWR0aDogcmVjdC53aWR0aCArIDEwLFxuICAgICAgICAgICAgaGVpZ2h0OiByZWN0LmhlaWdodCArIDEwXG4gICAgICAgICAgfSkpXG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBcbiAgICAgIHNldFVzZXJIaWdobGlnaHRzKHByZXYgPT4gWy4uLnByZXYsIGZvY3VzSGlnaGxpZ2h0XSk7XG4gICAgICBcbiAgICAgIC8vIFJlbW92ZSB0aGUgZm9jdXMgaGlnaGxpZ2h0IGFmdGVyIGEgZmV3IHNlY29uZHNcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBzZXRVc2VySGlnaGxpZ2h0cyhwcmV2ID0+IHByZXYuZmlsdGVyKGggPT4gaC5pZCAhPT0gaGlnaGxpZ2h0SWQgKyAnLWZvY3VzJykpO1xuICAgICAgfSwgMzAwMCk7XG4gICAgICBcbiAgICAgIC8vIFRyeSB0byBzY3JvbGwgdG8gdGhlIGhpZ2hsaWdodCB1c2luZyBQZGZIaWdobGlnaHRlcidzIG1ldGhvZFxuICAgICAgaWYgKHNjcm9sbFZpZXdlclJlZi5jdXJyZW50KSB7XG4gICAgICAgIHNjcm9sbFZpZXdlclJlZi5jdXJyZW50KGhpZ2hsaWdodCk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH0sIFthbGxIaWdobGlnaHRzLCB1c2VySGlnaGxpZ2h0c10pO1xuICBcbiAgLy8gSGFuZGxlciBmb3IgYWRkaW5nIGhpZ2hsaWdodHNcbiAgY29uc3QgYWRkSGlnaGxpZ2h0ID0gdXNlQ2FsbGJhY2soKGhpZ2hsaWdodDogSUhpZ2hsaWdodCkgPT4ge1xuICAgIHNldFVzZXJIaWdobGlnaHRzKHByZXYgPT4gWy4uLnByZXYsIGhpZ2hsaWdodF0pO1xuICAgIFxuICAgIC8vIElmIG9uQ2l0YXRpb25DcmVhdGUgY2FsbGJhY2sgZXhpc3RzLCBjcmVhdGUgYSBjaXRhdGlvbiBvYmplY3RcbiAgICBpZiAob25DaXRhdGlvbkNyZWF0ZSAmJiBkb2N1bWVudCkge1xuICAgICAgY29uc3QgY2l0YXRpb24gPSBjb252ZXJ0SGlnaGxpZ2h0VG9DaXRhdGlvbihoaWdobGlnaHQsIGRvY3VtZW50Lm1ldGFkYXRhLmlkKTtcbiAgICAgIG9uQ2l0YXRpb25DcmVhdGUoY2l0YXRpb24pO1xuICAgIH1cbiAgfSwgW2RvY3VtZW50LCBvbkNpdGF0aW9uQ3JlYXRlXSk7XG4gIFxuICAvLyBIYW5kbGVyIGZvciBoaWdobGlnaHQgY2xpY2tcbiAgY29uc3QgaGFuZGxlSGlnaGxpZ2h0Q2xpY2sgPSB1c2VDYWxsYmFjaygoaGlnaGxpZ2h0OiBJSGlnaGxpZ2h0KSA9PiB7XG4gICAgaWYgKG9uQ2l0YXRpb25DbGljaykge1xuICAgICAgLy8gRmluZCB0aGUgY29ycmVzcG9uZGluZyBjaXRhdGlvbiBpZiBpdCBleGlzdHNcbiAgICAgIGNvbnN0IGNpdGF0aW9uID0gZG9jdW1lbnRDaXRhdGlvbnMuZmluZChjID0+IGMuaGlnaGxpZ2h0SWQgPT09IGhpZ2hsaWdodC5pZCk7XG4gICAgICBpZiAoY2l0YXRpb24pIHtcbiAgICAgICAgb25DaXRhdGlvbkNsaWNrKGNpdGF0aW9uKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG9uQ2l0YXRpb25DbGljayhoaWdobGlnaHQpO1xuICAgICAgfVxuICAgIH1cbiAgfSwgW2RvY3VtZW50Q2l0YXRpb25zLCBvbkNpdGF0aW9uQ2xpY2tdKTtcbiAgXG4gIC8vIFNldCBpc0Jyb3dzZXIgdG8gdHJ1ZSBvbmNlIGNvbXBvbmVudCBtb3VudHMgLSBhbHdheXMgZGVjbGFyZSBob29rcyBpbiB0aGUgc2FtZSBvcmRlclxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHNldElzQnJvd3Nlcih0cnVlKTtcbiAgfSwgW10pO1xuICBcbiAgLy8gR2V0IGRvY3VtZW50IFVSTCBmcm9tIHByb3BzIG9yIGZldGNoIGl0IHdoZW4gZG9jdW1lbnQgY2hhbmdlc1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghaXNCcm93c2VyKSByZXR1cm47XG4gICAgXG4gICAgaWYgKHByb3BzUGRmVXJsKSB7XG4gICAgICBzZXRQZGZVcmwocHJvcHNQZGZVcmwpO1xuICAgICAgc2V0RXJyb3JTdGF0ZShudWxsKTtcbiAgICB9IGVsc2UgaWYgKGRvY3VtZW50KSB7XG4gICAgICBjb25zdCBmZXRjaERvY3VtZW50VXJsID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICBzZXRMb2FkaW5nU3RhdGUoXCJSZXRyaWV2aW5nIGRvY3VtZW50IFVSTC4uLlwiKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCB1cmwgPSBhd2FpdCBkb2N1bWVudHNBcGkuZ2V0RG9jdW1lbnRVcmwoZG9jdW1lbnQubWV0YWRhdGEuaWQpO1xuICAgICAgICAgIHNldFBkZlVybCh1cmwpO1xuICAgICAgICAgIHNldEVycm9yU3RhdGUobnVsbCk7XG4gICAgICAgICAgc2V0TG9hZGluZ1N0YXRlKG51bGwpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBkb2N1bWVudCBVUkw6XCIsIGVycm9yKTtcbiAgICAgICAgICBzZXRFcnJvclN0YXRlKFwiRmFpbGVkIHRvIHJldHJpZXZlIGRvY3VtZW50IFVSTC4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci5cIik7XG4gICAgICAgICAgc2V0TG9hZGluZ1N0YXRlKG51bGwpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgXG4gICAgICBmZXRjaERvY3VtZW50VXJsKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNldFBkZlVybChudWxsKTtcbiAgICB9XG4gIH0sIFtkb2N1bWVudCwgcHJvcHNQZGZVcmwsIGlzQnJvd3Nlcl0pO1xuICBcbiAgLy8gRmV0Y2ggY2l0YXRpb25zIHdoZW4gZG9jdW1lbnQgY2hhbmdlc1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghaXNCcm93c2VyIHx8ICFkb2N1bWVudCkgcmV0dXJuO1xuICAgIFxuICAgIGNvbnN0IGZldGNoQ2l0YXRpb25zID0gYXN5bmMgKCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgc2V0TG9hZGluZ1N0YXRlKFwiTG9hZGluZyBkb2N1bWVudCBjaXRhdGlvbnMuLi5cIik7XG4gICAgICAgIGNvbnN0IGNpdGF0aW9ucyA9IGF3YWl0IGRvY3VtZW50c0FwaS5nZXREb2N1bWVudENpdGF0aW9ucyhkb2N1bWVudC5tZXRhZGF0YS5pZCk7XG4gICAgICAgIHNldERvY3VtZW50Q2l0YXRpb25zKGNpdGF0aW9ucyk7XG4gICAgICAgIFxuICAgICAgICAvLyBDb252ZXJ0IGNpdGF0aW9ucyB0byBoaWdobGlnaHRzIGFuZCBub3RpZnkgcGFyZW50XG4gICAgICAgIGNvbnN0IGhpZ2hsaWdodHNGcm9tQ2l0YXRpb25zID0gY2l0YXRpb25zLm1hcChjb252ZXJ0Q2l0YXRpb25Ub0hpZ2hsaWdodCk7XG4gICAgICAgIGlmIChvbkNpdGF0aW9uc0xvYWRlZCkge1xuICAgICAgICAgIG9uQ2l0YXRpb25zTG9hZGVkKGhpZ2hsaWdodHNGcm9tQ2l0YXRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgc2V0TG9hZGluZ1N0YXRlKG51bGwpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIGRvY3VtZW50IGNpdGF0aW9uczpcIiwgZXJyb3IpO1xuICAgICAgICAvLyBEb24ndCBzZXQgZXJyb3Igc3RhdGUgaGVyZSBhcyB3ZSBzdGlsbCB3YW50IHRvIHNob3cgdGhlIGRvY3VtZW50IGV2ZW4gaWYgY2l0YXRpb25zIGZhaWxcbiAgICAgICAgc2V0TG9hZGluZ1N0YXRlKG51bGwpO1xuICAgICAgfVxuICAgIH07XG4gICAgXG4gICAgZmV0Y2hDaXRhdGlvbnMoKTtcbiAgfSwgW2RvY3VtZW50LCBvbkNpdGF0aW9uc0xvYWRlZCwgaXNCcm93c2VyXSk7XG4gIFxuICAvLyBTY3JvbGwgdG8gaGlnaGxpZ2h0IHdoZW4gaGlnaGxpZ2h0SWQgY2hhbmdlc1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChoaWdobGlnaHRJZCAmJiBhbGxIaWdobGlnaHRzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IGhpZ2hsaWdodCA9IGFsbEhpZ2hsaWdodHMuZmluZChoID0+IGguaWQgPT09IGhpZ2hsaWdodElkKTtcbiAgICAgIGlmIChoaWdobGlnaHQpIHtcbiAgICAgICAgLy8gU2Nyb2xsIHRvIHRoZSBoaWdobGlnaHRcbiAgICAgICAgc2Nyb2xsVG9IaWdobGlnaHQoaGlnaGxpZ2h0SWQpO1xuICAgICAgfVxuICAgIH1cbiAgfSwgW2hpZ2hsaWdodElkLCBhbGxIaWdobGlnaHRzLCBzY3JvbGxUb0hpZ2hsaWdodF0pO1xuICBcbiAgLy8gVXBkYXRlIHJlbmRlciBzY2FsZSB3aGVuIHJlbmRlcmluZ1F1YWxpdHkgY2hhbmdlc1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghaXNCcm93c2VyKSByZXR1cm47XG4gICAgc2V0UmVuZGVyU2NhbGUoXG4gICAgICByZW5kZXJpbmdRdWFsaXR5ID09PSAnbG93JyA/IDEuMCA6IFxuICAgICAgcmVuZGVyaW5nUXVhbGl0eSA9PT0gJ21lZGl1bScgPyAxLjUgOiAyLjBcbiAgICApO1xuICB9LCBbcmVuZGVyaW5nUXVhbGl0eSwgaXNCcm93c2VyXSk7XG4gIFxuICAvLyBDbGVhbnVwIG9uIHVubW91bnRcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ1BERlZpZXdlciB1bm1vdW50aW5nLCBjbGVhbmluZyB1cCByZXNvdXJjZXMnKTtcbiAgICAgIFxuICAgICAgLy8gRXhlY3V0ZSBjbGVhbnVwIGZ1bmN0aW9uXG4gICAgICBjbGVhbnVwUmVmLmN1cnJlbnQoKTtcbiAgICAgIFxuICAgICAgLy8gQ2xlYW4gdXAgYmxvYiBVUkxzXG4gICAgICBjbGVhbnVwQmxvYlVybHMoKTtcbiAgICAgIFxuICAgICAgLy8gQ2xlYXIgbWVtb3J5XG4gICAgICBzZXRVc2VySGlnaGxpZ2h0cyhbXSk7XG4gICAgICBzZXREb2N1bWVudENpdGF0aW9ucyhbXSk7XG4gICAgICBzZXRQZGZVcmwobnVsbCk7XG4gICAgfTtcbiAgfSwgW10pO1xuICBcbiAgLy8gSGFuZGxlIHdoZW4gUERGIGRvY3VtZW50IGlzIHNldFxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChjdXJyZW50UGRmRG9jdW1lbnQpIHtcbiAgICAgIGhhbmRsZURvY3VtZW50TG9hZFN1Y2Nlc3MoY3VycmVudFBkZkRvY3VtZW50KTtcbiAgICB9XG4gIH0sIFtjdXJyZW50UGRmRG9jdW1lbnQsIGhhbmRsZURvY3VtZW50TG9hZFN1Y2Nlc3NdKTtcbiAgXG4gIC8vIFNraXAgcmVuZGVyaW5nIHVudGlsIHdlJ3JlIGluIHRoZSBicm93c2VyXG4gIGlmICghaXNCcm93c2VyKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaC1mdWxsIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1jZW50ZXJcIj5cbiAgICAgICAgICA8TG9hZGVyMiBjbGFzc05hbWU9XCJoLTEyIHctMTIgdGV4dC1wcmltYXJ5IGFuaW1hdGUtc3BpbiBteC1hdXRvXCIgLz5cbiAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtdC0yIHRleHQtc20gdGV4dC1tdXRlZC1mb3JlZ3JvdW5kIGZvbnQtYXZlbmlyLXByb1wiPkxvYWRpbmcgUERGIHZpZXdlci4uLjwvcD5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9XG5cbiAgaWYgKGlzTG9hZGluZyB8fCBsb2FkaW5nU3RhdGUpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJoLWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXJcIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWNlbnRlclwiPlxuICAgICAgICAgIDxMb2FkZXIyIGNsYXNzTmFtZT1cImgtMTIgdy0xMiB0ZXh0LXByaW1hcnkgYW5pbWF0ZS1zcGluIG14LWF1dG9cIiAvPlxuICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm10LTIgdGV4dC1zbSB0ZXh0LW11dGVkLWZvcmVncm91bmQgZm9udC1hdmVuaXItcHJvXCI+e2xvYWRpbmdTdGF0ZSB8fCBcIkxvYWRpbmcgZG9jdW1lbnQuLi5cIn08L3A+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxuXG4gIC8vIFVzZSB0aGUgZXJyb3IgcHJvcCBpZiBwcm92aWRlZCwgb3RoZXJ3aXNlIHVzZSB0aGUgaW50ZXJuYWwgZXJyb3Igc3RhdGVcbiAgaWYgKGVycm9yU3RhdGUpIHtcbiAgICAvLyBTaG93IGEgdXNlci1mcmllbmRseSBlcnJvciBpZiB0aGUgUERGIGNhbm5vdCBiZSBsb2FkZWRcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJoLWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXJcIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWNlbnRlclwiPlxuICAgICAgICAgIDxBbGVydENpcmNsZSBjbGFzc05hbWU9XCJoLTEyIHctMTIgdGV4dC1yZWQtNTAwIG14LWF1dG9cIiAvPlxuICAgICAgICAgIDxoMyBjbGFzc05hbWU9XCJtdC0yIHRleHQtbGcgZm9udC1zZW1pYm9sZCB0ZXh0LWdyYXktOTAwXCI+VW5hYmxlIHRvIGxvYWQgUERGPC9oMz5cbiAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtdC0yIHRleHQtc20gdGV4dC1ncmF5LTUwMFwiPlxuICAgICAgICAgICAgVGhlIG9yaWdpbmFsIFBERiBmaWxlIGNvdWxkIG5vdCBiZSByZXRyaWV2ZWQuIEludGVyYWN0aXZlIGhpZ2hsaWdodGluZyBhbmQgY2l0YXRpb24gZmVhdHVyZXMgYXJlIHVuYXZhaWxhYmxlLlxuICAgICAgICAgIDwvcD5cbiAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtdC0yIHRleHQtc20gdGV4dC1ncmF5LTQwMFwiPlxuICAgICAgICAgICAgSWYgeW91IG5lZWQgdG8gdmlldyB0aGUgZG9jdW1lbnQgdGV4dCwgcGxlYXNlIGNvbnRhY3Qgc3VwcG9ydCBvciB0cnkgcmUtdXBsb2FkaW5nIHRoZSBvcmlnaW5hbCBQREYuXG4gICAgICAgICAgPC9wPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cblxuICBpZiAoIWRvY3VtZW50IHx8ICFwZGZVcmwpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJoLWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXJcIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWNlbnRlclwiPlxuICAgICAgICAgIDxGaWxlIGNsYXNzTmFtZT1cImgtMTIgdy0xMiB0ZXh0LWdyYXktNDAwIG14LWF1dG9cIiAvPlxuICAgICAgICAgIDxoMyBjbGFzc05hbWU9XCJtdC0yIHRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTkwMFwiPk5vIGRvY3VtZW50IGxvYWRlZDwvaDM+XG4gICAgICAgICAgPHAgY2xhc3NOYW1lPVwibXQtMSB0ZXh0LXNtIHRleHQtZ3JheS01MDBcIj5VcGxvYWQgYSBkb2N1bWVudCB0byB2aWV3IGl0IGhlcmU8L3A+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxuXG4gIC8vIFJlbmRlciBoaWdobGlnaHQgZWxlbWVudCB3aXRoIHBvcHVwXG4gIGNvbnN0IHJlbmRlckhpZ2hsaWdodCA9IChcbiAgICBoaWdobGlnaHQ6IElIaWdobGlnaHQsXG4gICAgaW5kZXg6IG51bWJlcixcbiAgICBzZXRUaXA6IChoaWdobGlnaHQ6IElIaWdobGlnaHQsIGNhbGxiYWNrOiAoKSA9PiBKU1guRWxlbWVudCkgPT4gdm9pZCxcbiAgICBoaWRlVGlwOiAoKSA9PiB2b2lkLFxuICAgIHZpZXdwb3J0VG9TY2FsZWQ6IChyZWN0OiBMVFdIUCkgPT4gYW55LFxuICAgIHNjcmVlbnNob3Q6IChwb3NpdGlvbjogYW55KSA9PiBzdHJpbmcsXG4gICAgaXNTY3JvbGxlZFRvOiBib29sZWFuXG4gICkgPT4ge1xuICAgIGNvbnN0IGlzVGV4dEhpZ2hsaWdodCA9ICFCb29sZWFuKGhpZ2hsaWdodC5jb250ZW50ICYmIGhpZ2hsaWdodC5jb250ZW50LmltYWdlKTtcbiAgICBcbiAgICAvLyBEZXRlcm1pbmUgaGlnaGxpZ2h0IHR5cGUgYW5kIGNvbG9yXG4gICAgY29uc3QgaXNBSUhpZ2hsaWdodCA9IGhpZ2hsaWdodC5pc0FJQ2l0YXRpb24gfHwgYWlIaWdobGlnaHRzLnNvbWUoaCA9PiBoLmlkID09PSBoaWdobGlnaHQuaWQpO1xuICAgIGNvbnN0IGhpZ2hsaWdodENvbG9yID0gaXNBSUhpZ2hsaWdodCA/ICdiZy1hY2NlbnQvMzAnIDogJ2JnLXByaW1hcnkvMzAnO1xuICAgIFxuICAgIGNvbnN0IHRyaWdnZXJIaWdobGlnaHRDbGljayA9ICgpID0+IGhhbmRsZUhpZ2hsaWdodENsaWNrKGhpZ2hsaWdodCk7XG4gICAgXG4gICAgY29uc3QgcG9wdXBDb250ZW50ID0gKFxuICAgICAgPGRpdiBcbiAgICAgICAgY2xhc3NOYW1lPXtgJHtpc0FJSGlnaGxpZ2h0ID8gJ2JnLWFjY2VudCB0ZXh0LWFjY2VudC1mb3JlZ3JvdW5kJyA6ICdiZy1wcmltYXJ5IHRleHQtcHJpbWFyeS1mb3JlZ3JvdW5kJ30gdGV4dC1zbSBwLTIgcm91bmRlZCBzaGFkb3cgY3Vyc29yLXBvaW50ZXJgfVxuICAgICAgICBvbkNsaWNrPXt0cmlnZ2VySGlnaGxpZ2h0Q2xpY2t9XG4gICAgICA+XG4gICAgICAgIHtpc0FJSGlnaGxpZ2h0IFxuICAgICAgICAgID8gXCJBSSBDaXRhdGlvbjogXCIgKyAoaGlnaGxpZ2h0LmNvbW1lbnQ/LnRleHQgfHwgXCJSZWZlcmVuY2VkIGluIGNvbnZlcnNhdGlvblwiKSBcbiAgICAgICAgICA6IChoaWdobGlnaHQuY29tbWVudD8udGV4dCB8fCBcIlVzZXIgSGlnaGxpZ2h0XCIpfVxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgICBcbiAgICByZXR1cm4gKFxuICAgICAgPFBvcHVwXG4gICAgICAgIHBvcHVwQ29udGVudD17cG9wdXBDb250ZW50fVxuICAgICAgICBvbk1vdXNlT3Zlcj17cG9wdXBDb250ZW50ID0+IHNldFRpcChoaWdobGlnaHQsICgpID0+IHBvcHVwQ29udGVudCl9XG4gICAgICAgIG9uTW91c2VPdXQ9e2hpZGVUaXB9XG4gICAgICAgIGtleT17aW5kZXh9XG4gICAgICA+XG4gICAgICAgIDxkaXYgb25DbGljaz17dHJpZ2dlckhpZ2hsaWdodENsaWNrfSBjbGFzc05hbWU9XCJjdXJzb3ItcG9pbnRlclwiPlxuICAgICAgICAgIHtpc1RleHRIaWdobGlnaHQgPyAoXG4gICAgICAgICAgICAvLyBVc2luZyBhbnkgdHlwZSB0byBhdm9pZCB0eXBlIGVycm9ycyB3aXRoIHRoZSBIaWdobGlnaHQgY29tcG9uZW50XG4gICAgICAgICAgICA8SGlnaGxpZ2h0IFxuICAgICAgICAgICAgICBpc1Njcm9sbGVkVG89e2lzU2Nyb2xsZWRUb30gXG4gICAgICAgICAgICAgIHBvc2l0aW9uPXtoaWdobGlnaHQucG9zaXRpb24gYXMgYW55fVxuICAgICAgICAgICAgICBjb21tZW50PXtoaWdobGlnaHQuY29tbWVudH1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgKSA6IChcbiAgICAgICAgICAgIC8vIFVzaW5nIGFueSB0eXBlIHRvIGF2b2lkIHR5cGUgZXJyb3JzIHdpdGggdGhlIEFyZWFIaWdobGlnaHQgY29tcG9uZW50XG4gICAgICAgICAgICA8QXJlYUhpZ2hsaWdodFxuICAgICAgICAgICAgICBpc1Njcm9sbGVkVG89e2lzU2Nyb2xsZWRUb31cbiAgICAgICAgICAgICAgaGlnaGxpZ2h0PXtoaWdobGlnaHQgYXMgYW55fVxuICAgICAgICAgICAgICBvbkNoYW5nZT17KCkgPT4ge319XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9Qb3B1cD5cbiAgICApO1xuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJoLWZ1bGwgYmctZ3JheS01MCBmbGV4IGZsZXgtY29sIHJlbGF0aXZlXCI+XG4gICAgICB7ZG9jdW1lbnQgJiYgKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInAtNCBib3JkZXItYiBib3JkZXItZ3JheS0yMDBcIj5cbiAgICAgICAgICA8aDIgY2xhc3NOYW1lPVwidGV4dC1sZyBmb250LW1lZGl1bSB0ZXh0LWdyYXktOTAwXCI+e2RvY3VtZW50Lm1ldGFkYXRhLmZpbGVuYW1lfTwvaDI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC0xIGZsZXggZmxleC1jb2wgc206ZmxleC1yb3cgc206ZmxleC13cmFwIHNtOm10LTAgc206c3BhY2UteC02XCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTIgZmxleCBpdGVtcy1jZW50ZXIgdGV4dC1zbSB0ZXh0LWdyYXktNTAwXCI+XG4gICAgICAgICAgICAgIDxGaWxlIGNsYXNzTmFtZT1cImZsZXgtc2hyaW5rLTAgbXItMS41IGgtNSB3LTUgdGV4dC1ncmF5LTQwMFwiIC8+XG4gICAgICAgICAgICAgIHtkb2N1bWVudC5tZXRhZGF0YS5taW1lVHlwZX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAge2RvY3VtZW50LmNvbmZpZGVuY2VTY29yZSAhPT0gdW5kZWZpbmVkICYmIChcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC0yIGZsZXggaXRlbXMtY2VudGVyIHRleHQtc20gdGV4dC1ncmF5LTUwMFwiPlxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cIm1yLTEuNVwiPkNvbmZpZGVuY2U6PC9zcGFuPlxuICAgICAgICAgICAgICAgIHtNYXRoLnJvdW5kKGRvY3VtZW50LmNvbmZpZGVuY2VTY29yZSAqIDEwMCl9JVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cbiAgICAgIFxuICAgICAge3BkZlVybCAmJiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleC0xIG92ZXJmbG93LWF1dG9cIj5cbiAgICAgICAgICA8UGRmTG9hZGVyIFxuICAgICAgICAgICAgdXJsPXtwZGZVcmx9IFxuICAgICAgICAgICAgYmVmb3JlTG9hZD17PGRpdiBjbGFzc05hbWU9XCJwLTRcIj5Mb2FkaW5nIFBERi4uLjwvZGl2Pn1cbiAgICAgICAgICAgIG9uRXJyb3I9eyhlcnJvcikgPT4ge1xuICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgbG9hZGluZyBQREY6XCIsIGVycm9yKTtcbiAgICAgICAgICAgICAgc2V0RXJyb3JTdGF0ZShcIkZhaWxlZCB0byBsb2FkIFBERi4gVGhlIGZpbGUgbWlnaHQgYmUgY29ycnVwdGVkIG9yIHBhc3N3b3JkIHByb3RlY3RlZC5cIik7XG4gICAgICAgICAgICB9fVxuICAgICAgICAgICAgY01hcFVybD1cImh0dHBzOi8vdW5wa2cuY29tL3BkZmpzLWRpc3RAMi4xNi4xMDUvY21hcHMvXCJcbiAgICAgICAgICAgIGNNYXBQYWNrZWQ9e3RydWV9XG4gICAgICAgICAgICB3b3JrZXJTcmM9XCJodHRwczovL3VucGtnLmNvbS9wZGZqcy1kaXN0QDIuMTYuMTA1L2J1aWxkL3BkZi53b3JrZXIubWluLmpzXCJcbiAgICAgICAgICA+XG4gICAgICAgICAgICB7KHBkZkRvY3VtZW50KSA9PiB7XG4gICAgICAgICAgICAgIC8vIFVwZGF0ZSBkb2N1bWVudCBpbiBzdGF0ZSBhZnRlciByZW5kZXIgd2l0aG91dCB1c2luZyBob29rc1xuICAgICAgICAgICAgICAvLyBUaGlzIGlzIGEgc2FmZSBhcHByb2FjaCB0aGF0IGRvZXNuJ3QgdmlvbGF0ZSBob29rIHJ1bGVzXG4gICAgICAgICAgICAgIC8vIFdlIHVzZSBhIHJlZ3VsYXIgZnVuY3Rpb24gYW5kIHNldFRpbWVvdXQgdG8gZGVmZXIgdGhlIHN0YXRlIHVwZGF0ZVxuICAgICAgICAgICAgICBpZiAocGRmRG9jdW1lbnQpIHtcbiAgICAgICAgICAgICAgICAvLyBVc2Ugc2V0VGltZW91dCB0byBtb3ZlIHN0YXRlIHVwZGF0ZSBvdXQgb2YgcmVuZGVyIHBoYXNlXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICBzZXRDdXJyZW50UGRmRG9jdW1lbnQocGRmRG9jdW1lbnQpO1xuICAgICAgICAgICAgICAgIH0sIDApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxQZGZIaWdobGlnaHRlclxuICAgICAgICAgICAgICAgICAgcGRmRG9jdW1lbnQ9e3BkZkRvY3VtZW50fVxuICAgICAgICAgICAgICAgICAgZW5hYmxlQXJlYVNlbGVjdGlvbj17KGV2ZW50KSA9PiBldmVudC5hbHRLZXl9XG4gICAgICAgICAgICAgICAgICBvblNjcm9sbENoYW5nZT17b25WaXNpYmxlUGFnZXNDaGFuZ2VkIGFzIGFueX1cbiAgICAgICAgICAgICAgICAgIHNjcm9sbFJlZj17KHNjcm9sbFRvOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsVmlld2VyUmVmLmN1cnJlbnQgPSBzY3JvbGxUbztcbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICBvblNlbGVjdGlvbkZpbmlzaGVkPXsoXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uLFxuICAgICAgICAgICAgICAgICAgICBjb250ZW50LFxuICAgICAgICAgICAgICAgICAgICBoaWRlVGlwQW5kU2VsZWN0aW9uLFxuICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm1TZWxlY3Rpb25cbiAgICAgICAgICAgICAgICAgICkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctd2hpdGUgcC0yIGJvcmRlciBib3JkZXItZ3JheS0zMDAgcm91bmRlZCBzaGFkb3ctbWRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gbWItMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PkFkZCBIaWdobGlnaHQ8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ0ZXh0LXByaW1hcnkgaG92ZXI6dGV4dC1wcmltYXJ5LzgwIHB4LTMgcHktMSByb3VuZGVkIHRleHQtc20gZm9udC1hdmVuaXItcHJvXCIgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaGlnaGxpZ2h0SWQgPSBgaGlnaGxpZ2h0LSR7RGF0ZS5ub3coKX1gO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkSGlnaGxpZ2h0KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGhpZ2hsaWdodElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tbWVudDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IFwiVXNlciBoaWdobGlnaHRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbW9qaTogXCLinI3vuI9cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlkZVRpcEFuZFNlbGVjdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTYXZlXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgaGlnaGxpZ2h0cz17YWxsSGlnaGxpZ2h0c31cbiAgICAgICAgICAgICAgICAgIGhpZ2hsaWdodFRyYW5zZm9ybT17cmVuZGVySGlnaGxpZ2h0IGFzIGFueX1cbiAgICAgICAgICAgICAgICAgIHBkZlNjYWxlVmFsdWU9e3JlbmRlclNjYWxlLnRvU3RyaW5nKCl9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgPC9QZGZMb2FkZXI+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cbiAgICAgIFxuICAgICAgey8qIFBlcmZvcm1hbmNlIGNvbnRyb2xzIGZvciBsYXJnZSBQREZzICovfVxuICAgICAge3RvdGFsUGFnZXMgPiA1MCAmJiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgYm90dG9tLTQgcmlnaHQtNCBiZy13aGl0ZSByb3VuZGVkLW1kIHNoYWRvdyBwLTIgdGV4dC14cyB6LTEwIGJvcmRlciBib3JkZXItZ3JheS0yMDBcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1iLTEgZm9udC1tZWRpdW1cIj5QZXJmb3JtYW5jZSBPcHRpb25zPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IHNwYWNlLXgtMlwiPlxuICAgICAgICAgICAgPGJ1dHRvbiBcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgcHgtMiBweS0xIHJvdW5kZWQgJHtyZW5kZXJpbmdRdWFsaXR5ID09PSAnbG93JyA/ICdiZy1pbmRpZ28tNjAwIHRleHQtd2hpdGUnIDogJ2JnLWdyYXktMjAwJ31gfVxuICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRSZW5kZXJTY2FsZSgxLjApfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICBMb3dcbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgPGJ1dHRvbiBcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgcHgtMiBweS0xIHJvdW5kZWQgJHtyZW5kZXJpbmdRdWFsaXR5ID09PSAnbWVkaXVtJyA/ICdiZy1pbmRpZ28tNjAwIHRleHQtd2hpdGUnIDogJ2JnLWdyYXktMjAwJ31gfVxuICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRSZW5kZXJTY2FsZSgxLjUpfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICBNZWRpdW1cbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgPGJ1dHRvbiBcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgcHgtMiBweS0xIHJvdW5kZWQgJHtyZW5kZXJpbmdRdWFsaXR5ID09PSAnaGlnaCcgPyAnYmctaW5kaWdvLTYwMCB0ZXh0LXdoaXRlJyA6ICdiZy1ncmF5LTIwMCd9YH1cbiAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0UmVuZGVyU2NhbGUoMi4wKX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgSGlnaFxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cbiAgICA8L2Rpdj5cbiAgKTtcbn0iXSwibmFtZXMiOlsiUmVhY3QiLCJ1c2VTdGF0ZSIsInVzZUNhbGxiYWNrIiwidXNlRWZmZWN0IiwidXNlUmVmIiwiRmlsZSIsIkxvYWRlcjIiLCJBbGVydENpcmNsZSIsIlBkZkxvYWRlciIsIlBkZkhpZ2hsaWdodGVyIiwiSGlnaGxpZ2h0IiwiUG9wdXAiLCJBcmVhSGlnaGxpZ2h0IiwiZG9jdW1lbnRzQXBpIiwiY2xlYW51cEJsb2JVcmxzIiwiY29udmVydENpdGF0aW9uVG9IaWdobGlnaHQiLCJjb252ZXJ0SGlnaGxpZ2h0VG9DaXRhdGlvbiIsIlBERlZpZXdlciIsImRvY3VtZW50IiwiaXNMb2FkaW5nIiwiZXJyb3IiLCJvbkNpdGF0aW9uQ3JlYXRlIiwib25DaXRhdGlvbkNsaWNrIiwiYWlIaWdobGlnaHRzIiwib25DaXRhdGlvbnNMb2FkZWQiLCJwZGZVcmwiLCJwcm9wc1BkZlVybCIsImhpZ2hsaWdodElkIiwicmVuZGVyaW5nUXVhbGl0eSIsInBhZ2VCdWZmZXJTaXplIiwiY3VycmVudFBhZ2UiLCJzZXRDdXJyZW50UGFnZSIsInVzZXJIaWdobGlnaHRzIiwic2V0VXNlckhpZ2hsaWdodHMiLCJzZXRQZGZVcmwiLCJlcnJvclN0YXRlIiwic2V0RXJyb3JTdGF0ZSIsImxvYWRpbmdTdGF0ZSIsInNldExvYWRpbmdTdGF0ZSIsImRvY3VtZW50Q2l0YXRpb25zIiwic2V0RG9jdW1lbnRDaXRhdGlvbnMiLCJ0b3RhbFBhZ2VzIiwic2V0VG90YWxQYWdlcyIsInZpc2libGVQYWdlcyIsInNldFZpc2libGVQYWdlcyIsImxvYWRlZFBhZ2VzIiwic2V0TG9hZGVkUGFnZXMiLCJTZXQiLCJyZW5kZXJTY2FsZSIsInNldFJlbmRlclNjYWxlIiwiaXNCcm93c2VyIiwic2V0SXNCcm93c2VyIiwiY3VycmVudFBkZkRvY3VtZW50Iiwic2V0Q3VycmVudFBkZkRvY3VtZW50Iiwic2Nyb2xsVmlld2VyUmVmIiwiY2xlYW51cFJlZiIsImNpdGF0aW9uSGlnaGxpZ2h0cyIsIm1hcCIsImFsbEhpZ2hsaWdodHMiLCJvblZpc2libGVQYWdlc0NoYW5nZWQiLCJwYWdlcyIsInBhZ2VzVG9LZWVwIiwiZm9yRWFjaCIsInBhZ2UiLCJhZGQiLCJoYWxmQnVmZmVyIiwiTWF0aCIsImZsb29yIiwiaSIsImhhbmRsZURvY3VtZW50TG9hZFN1Y2Nlc3MiLCJwZGZEb2N1bWVudCIsIm51bVBhZ2VzIiwiY3VycmVudCIsImNsZWFudXAiLCJkZXN0cm95Iiwid2luZG93IiwicGRmanNMaWIiLCJHbG9iYWxXb3JrZXJPcHRpb25zIiwiY29uc29sZSIsImxvZyIsInNjcm9sbFRvSGlnaGxpZ2h0IiwiaGlnaGxpZ2h0IiwiZmluZCIsImgiLCJpZCIsInBvc2l0aW9uIiwicGFnZU51bWJlciIsImV4aXN0aW5nSW5kZXgiLCJmaW5kSW5kZXgiLCJ1cGRhdGVkSGlnaGxpZ2h0cyIsInNwbGljZSIsImZvY3VzSGlnaGxpZ2h0IiwiY29tbWVudCIsInRleHQiLCJlbW9qaSIsInJlY3RzIiwicmVjdCIsIngxIiwieTEiLCJ4MiIsInkyIiwid2lkdGgiLCJoZWlnaHQiLCJwcmV2Iiwic2V0VGltZW91dCIsImZpbHRlciIsImFkZEhpZ2hsaWdodCIsImNpdGF0aW9uIiwibWV0YWRhdGEiLCJoYW5kbGVIaWdobGlnaHRDbGljayIsImMiLCJmZXRjaERvY3VtZW50VXJsIiwidXJsIiwiZ2V0RG9jdW1lbnRVcmwiLCJmZXRjaENpdGF0aW9ucyIsImNpdGF0aW9ucyIsImdldERvY3VtZW50Q2l0YXRpb25zIiwiaGlnaGxpZ2h0c0Zyb21DaXRhdGlvbnMiLCJsZW5ndGgiLCJkaXYiLCJjbGFzc05hbWUiLCJwIiwiaDMiLCJyZW5kZXJIaWdobGlnaHQiLCJpbmRleCIsInNldFRpcCIsImhpZGVUaXAiLCJ2aWV3cG9ydFRvU2NhbGVkIiwic2NyZWVuc2hvdCIsImlzU2Nyb2xsZWRUbyIsImlzVGV4dEhpZ2hsaWdodCIsIkJvb2xlYW4iLCJjb250ZW50IiwiaW1hZ2UiLCJpc0FJSGlnaGxpZ2h0IiwiaXNBSUNpdGF0aW9uIiwic29tZSIsImhpZ2hsaWdodENvbG9yIiwidHJpZ2dlckhpZ2hsaWdodENsaWNrIiwicG9wdXBDb250ZW50Iiwib25DbGljayIsIm9uTW91c2VPdmVyIiwib25Nb3VzZU91dCIsIm9uQ2hhbmdlIiwiaDIiLCJmaWxlbmFtZSIsIm1pbWVUeXBlIiwiY29uZmlkZW5jZVNjb3JlIiwidW5kZWZpbmVkIiwic3BhbiIsInJvdW5kIiwiYmVmb3JlTG9hZCIsIm9uRXJyb3IiLCJjTWFwVXJsIiwiY01hcFBhY2tlZCIsIndvcmtlclNyYyIsImVuYWJsZUFyZWFTZWxlY3Rpb24iLCJldmVudCIsImFsdEtleSIsIm9uU2Nyb2xsQ2hhbmdlIiwic2Nyb2xsUmVmIiwic2Nyb2xsVG8iLCJvblNlbGVjdGlvbkZpbmlzaGVkIiwiaGlkZVRpcEFuZFNlbGVjdGlvbiIsInRyYW5zZm9ybVNlbGVjdGlvbiIsImJ1dHRvbiIsIkRhdGUiLCJub3ciLCJoaWdobGlnaHRzIiwiaGlnaGxpZ2h0VHJhbnNmb3JtIiwicGRmU2NhbGVWYWx1ZSIsInRvU3RyaW5nIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/components/document/PDFViewer.tsx\n"));

/***/ })

});