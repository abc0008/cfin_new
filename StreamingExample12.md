<Initial_Streaming_Response>
Let me provide a comprehensive analysis of the loan performance based on the financial data provided.
The loan portfolio has shown consistent growth and generally stable credit quality across the five quarters from 2024Q1 to 2025Q1. Here's my detailed analysis:
Growth Trends:
Total gross loans have grown steadily from $42,000M to $45,000M, representing a 7.1% increase over the five quarters
All loan categories show consistent growth, with C&I loans leading in absolute terms, growing from $16,800M to $18,000M
The growth appears well-distributed across all major loan categories, suggesting a balanced expansion strategy
Credit Quality:
The allowance for loan losses has increased gradually from $350M to $390M, keeping pace with portfolio growth
Non-performing assets have shown a moderate increase from $350M to $390M
Net charge-offs have increased slightly from $25M to $32M per quarter
The provision for credit losses has trended upward from $40M to $60M, suggesting some caution in the credit outlook
Let me provide some detailed visualizations to better illustrate these trends.
Let me provide a comprehensive analysis of the loan performance based on the financial data provided. The loan portfolio has shown consistent growth and generally stable credit quality across the five quarters from 2024Q1 to 2025Q1. Here's my detailed analysis: 1. Growth Trends: - Total gross loans have grown steadily from $42,000M to $45,000M, representing a 7.1% increase over the five quarters - All loan categories show consistent growth, with C&I loans leading in absolute terms, growing from $16,800M to $18,000M - The growth appears well-distributed across all major loan categories, suggesting a balanced expansion strategy 2. Credit Quality: - The allowance for loan losses has increased gradually from $350M to $390M, keeping pace with portfolio growth - Non-performing assets have shown a moderate increase from $350M to $390M - Net charge-offs have increased slightly from $25M to $32M per quarter - The provision for credit losses has trended upward from $40M to $60M, suggesting some caution in the credit outlook Let me provide some detailed visualizations to better illustrate these trends.
</Initial_Streaming_Response>

<Post_Visualization_Streaming_Response>
Key observations from the visualizations and metrics:
The line chart shows steady growth across all loan categories, with C&I loans maintaining the largest share of the portfolio.
The credit quality metrics table reveals moderate deterioration in asset quality:
Non-performing assets increased by 11.4%
Net charge-offs increased by 28%
Past due loans (90+ days) increased by 12.5%
The non-performing assets to total loans ratio stands at 0.867% as of 2025Q1, which remains within acceptable industry standards.
The latest quarter-over-quarter loan growth rate is 2.27%, indicating continued expansion of the loan portfolio.
While there are some signs of credit quality deterioration, the increases appear manageable relative to the portfolio's growth. The consistent increase in loan loss allowances suggests appropriate risk management practices are in place. The diversified growth across all loan categories also indicates a balanced approach to portfolio expansion.
Key observations from the visualizations and metrics: 1. The line chart shows steady growth across all loan categories, with C&I loans maintaining the largest share of the portfolio. 2. The credit quality metrics table reveals moderate deterioration in asset quality: - Non-performing assets increased by 11.4% - Net charge-offs increased by 28% - Past due loans (90+ days) increased by 12.5% 3. The non-performing assets to total loans ratio stands at 0.867% as of 2025Q1, which remains within acceptable industry standards. 4. The latest quarter-over-quarter loan growth rate is 2.27%, indicating continued expansion of the loan portfolio. While there are some signs of credit quality deterioration, the increases appear manageable relative to the portfolio's growth. The consistent increase in loan loss allowances suggests appropriate risk management practices are in place. The diversified growth across all loan categories also indicates a balanced approach to portfolio expansion.
</Post_Visualization_Streaming_Response>

<JavaScript_Console_Output>
[Info] Successfully preconnected to https://fonts.gstatic.com/
[Info] Successfully preconnected to https://fonts.googleapis.com/
[Error] Failed to load resource: the server responded with a status of 400 () (font, line 0)
[Error] Failed to load resource: the server responded with a status of 400 () (font, line 0)
[Log] ğŸŒ API Service Available
[Log] Use __apiService to access the API directly in the console
[Log] Sending POST request to http://localhost:8000/api/conversation
[Log] Sending POST request to http://localhost:8000/api/conversation
[Log] Created conversation session: 7fa7703f-60ab-43f5-a6f8-1ac887d3aa20
[Log] Created conversation session: â€“ "7fa7703f-60ab-43f5-a6f8-1ac887d3aa20"
[Log] Created conversation session: 5c70e839-f729-4766-b1a0-39c31646b713
[Log] Validating conversation exists: â€“ "7fa7703f-60ab-43f5-a6f8-1ac887d3aa20"
[Log] Sending GET request to http://localhost:8000/api/conversation/7fa7703f-60ab-43f5-a6f8-1ac887d3aa20
[Log] Starting WebSocket connection to: â€“ "ws://localhost:8000/ws/conversation/7fa7703f-60ab-43f5-a6f8-1ac887d3aa20"
[Log] Current isConnected state before connection: â€“ false
[Log] WebSocket onopen event fired for conversation: â€“ "7fa7703f-60ab-43f5-a6f8-1ac887d3aa20"
[Log] WebSocket connected and isConnected set to true for conversation: â€“ "7fa7703f-60ab-43f5-a6f8-1ac887d3aa20"
[Log] File selected: â€“ "Bank_5Q_Trend_Report.pdf"
[Log] Validating file: â€“ "Bank_5Q_Trend_Report.pdf"
[Log] File validation successful
[Log] Uploading document...
[Log] Upload progress: 0.00%, Stage: Starting upload
[Log] Uploading file to http://localhost:8000/api/documents/upload
[Log] Upload progress: 40.00%, Stage: Uploading file
[Log] Polling for document processing completion...
[Log] Upload progress: 40.00%, Stage: Processing document
[Log] Upload progress: 40.00%, Stage: Processing document
[Log] Sending GET request to http://localhost:8000/api/documents/d9984972-809b-4490-9b0b-2881d94f309c
[Log] Document status after attempt 1: processing
[Log] Upload progress: 40.27%, Stage: Processing document
[Log] Sending GET request to http://localhost:8000/api/documents/d9984972-809b-4490-9b0b-2881d94f309c
[Log] Document status after attempt 2: processing
[Log] Upload progress: 40.53%, Stage: Processing document
[Log] Sending GET request to http://localhost:8000/api/documents/d9984972-809b-4490-9b0b-2881d94f309c
[Log] Document status after attempt 3: processing
[Log] Upload progress: 40.80%, Stage: Processing document
[Log] Sending GET request to http://localhost:8000/api/documents/d9984972-809b-4490-9b0b-2881d94f309c
[Log] Document status after attempt 4: processing
[Log] Upload progress: 41.07%, Stage: Processing document
[Log] Sending GET request to http://localhost:8000/api/documents/d9984972-809b-4490-9b0b-2881d94f309c
[Log] Document status after attempt 5: processing
[Log] Upload progress: 41.33%, Stage: Processing document
[Log] Sending GET request to http://localhost:8000/api/documents/d9984972-809b-4490-9b0b-2881d94f309c
[Log] Document status after attempt 6: processing
[Log] Upload progress: 41.60%, Stage: Processing document
[Log] Sending GET request to http://localhost:8000/api/documents/d9984972-809b-4490-9b0b-2881d94f309c
[Log] Document status after attempt 7: processing
[Log] Upload progress: 41.87%, Stage: Processing document
[Log] Sending GET request to http://localhost:8000/api/documents/d9984972-809b-4490-9b0b-2881d94f309c
[Log] Document status after attempt 8: processing
[Log] Upload progress: 42.13%, Stage: Processing document
[Log] Sending GET request to http://localhost:8000/api/documents/d9984972-809b-4490-9b0b-2881d94f309c
[Log] Document status after attempt 9: processing
[Log] Upload progress: 42.40%, Stage: Processing document
[Log] Sending GET request to http://localhost:8000/api/documents/d9984972-809b-4490-9b0b-2881d94f309c
[Log] Document status after attempt 10: processing
[Log] Upload progress: 42.67%, Stage: Processing document
[Log] Sending GET request to http://localhost:8000/api/documents/d9984972-809b-4490-9b0b-2881d94f309c
[Log] Document status after attempt 11: processing
[Log] Upload progress: 42.93%, Stage: Processing document
[Log] Sending GET request to http://localhost:8000/api/documents/d9984972-809b-4490-9b0b-2881d94f309c
[Log] Document status after attempt 12: processing
[Log] Upload progress: 43.20%, Stage: Processing document
[Log] Sending GET request to http://localhost:8000/api/documents/d9984972-809b-4490-9b0b-2881d94f309c
[Log] Document status after attempt 13: processing
[Log] Upload progress: 43.47%, Stage: Processing document
[Log] Sending GET request to http://localhost:8000/api/documents/d9984972-809b-4490-9b0b-2881d94f309c
[Log] Document status after attempt 14: processing
[Log] Upload progress: 43.73%, Stage: Processing document
[Log] Sending GET request to http://localhost:8000/api/documents/d9984972-809b-4490-9b0b-2881d94f309c
[Log] Document status after attempt 15: completed
[Log] Verifying financial data...
[Log] Upload progress: 80.00%, Stage: Verifying financial data
[Log] Sending GET request to http://localhost:8000/api/documents/d9984972-809b-4490-9b0b-2881d94f309c/check-financial-data
[Log] Document needs financial data verification: â€“ "Document accepted for financial analysis"
[Log] Upload progress: 85.00%, Stage: Enhancing financial data
[Log] Sending GET request to http://localhost:8000/api/documents/d9984972-809b-4490-9b0b-2881d94f309c/check-financial-data
[Log] Sending POST request to http://localhost:8000/api/documents/d9984972-809b-4490-9b0b-2881d94f309c/verify-financial-data
[Log] Financial data verification result: â€“ {success: true, message: "Document content verified for analysis"}
[Log] Upload progress: 90.00%, Stage: Retrieving enhanced data
[Log] Sending GET request to http://localhost:8000/api/documents/d9984972-809b-4490-9b0b-2881d94f309c
[Log] Upload progress: 100.00%, Stage: Document ready
[Log] Document verification completed: â€“ {metadata: Object, contentType: "other", extractionTimestamp: "2025-06-23T05:35:15.265Z", â€¦}
{metadata: Object, contentType: "other", extractionTimestamp: "2025-06-23T05:35:15.265Z", periods: ["2024Q1", "2024Q2", "2024Q3", "2024Q4", "2025Q1"], extractedData: Object, â€¦}Object
[Log] Associating document d9984972-809b-4490-9b0b-2881d94f309c with conversation 7fa7703f-60ab-43f5-a6f8-1ac887d3aa20
[Log] Sending POST request to http://localhost:8000/api/conversation/7fa7703f-60ab-43f5-a6f8-1ac887d3aa20/document/d9984972-809b-4490-9b0b-2881d94f309c
[Log] Document d9984972-809b-4490-9b0b-2881d94f309c added to conversation 7fa7703f-60ab-43f5-a6f8-1ac887d3aa20
[Log] Document successfully associated with conversation
[Error] Source Map loading errors (x2)
[Error] Failed to load resource: the server responded with a status of 404 (Not Found) (types.js.map, line 0)
[Error] Failed to load resource: the server responded with a status of 404 (Not Found) (types.js.map, line 0)
[Log] PDFViewer unmounting, cleaning up resources
[Log] Sending GET request to http://localhost:8000/api/documents/d9984972-809b-4490-9b0b-2881d94f309c/citations
[Log] Deprecated API usage: The `enhanceTextSelection` functionality will be removed in the future. (x3)
[Log] Submit conditions: useStreaming=true, conversationId=7fa7703f-60ab-43f5-a6f8-1ac887d3aa20, isConnected=true
[Log] Using WebSocket streaming for message submission
[Log] ğŸ” State check on message_start: â€“ {messagePhase: null, activeMessageId: null, streamingMessageId: null, â€¦}
{messagePhase: null, activeMessageId: null, streamingMessageId: null, phaseTransitions: 0}Object
[Log] ğŸš€ Starting new message: b52d3c0a-f53e-45e4-abec-944cf1e2138f
[Log] ğŸ“ Building initial streaming: 3 chars
[Log] ğŸ“ Initial streaming update: 3 chars
[Log] ğŸ“ Building initial streaming: 76 chars
[Log] ğŸ“ Initial streaming update: 76 chars
[Log] ğŸ“ Building initial streaming: 121 chars
[Log] ğŸ“ Initial streaming update: 121 chars
[Log] ğŸ“ Building initial streaming: 170 chars
[Log] ğŸ“ Initial streaming update: 170 chars
[Log] ğŸ“ Building initial streaming: 220 chars
[Log] ğŸ“ Initial streaming update: 220 chars
[Log] ğŸ“ Building initial streaming: 240 chars
[Log] ğŸ“ Initial streaming update: 240 chars
[Log] ğŸ“ Building initial streaming: 273 chars
[Log] ğŸ“ Initial streaming update: 273 chars
[Log] ğŸ“ Building initial streaming: 306 chars
[Log] ğŸ“ Initial streaming update: 306 chars
[Log] ğŸ“ Building initial streaming: 330 chars
[Log] ğŸ“ Initial streaming update: 330 chars
[Log] ğŸ“ Building initial streaming: 347 chars
[Log] ğŸ“ Initial streaming update: 347 chars
[Log] ğŸ“ Building initial streaming: 382 chars
[Log] ğŸ“ Initial streaming update: 382 chars
[Log] ğŸ“ Building initial streaming: 427 chars
[Log] ğŸ“ Initial streaming update: 427 chars
[Log] ğŸ“ Building initial streaming: 472 chars
[Log] ğŸ“ Initial streaming update: 472 chars
[Log] ğŸ“ Building initial streaming: 509 chars
[Log] ğŸ“ Initial streaming update: 509 chars
[Log] ğŸ“ Building initial streaming: 522 chars
[Log] ğŸ“ Initial streaming update: 522 chars
[Log] ğŸ“ Building initial streaming: 577 chars
[Log] ğŸ“ Initial streaming update: 577 chars
[Log] ğŸ“ Building initial streaming: 615 chars
[Log] ğŸ“ Initial streaming update: 615 chars
[Log] ğŸ“ Building initial streaming: 654 chars
[Log] ğŸ“ Initial streaming update: 654 chars
[Log] ğŸ“ Building initial streaming: 691 chars
[Log] ğŸ“ Initial streaming update: 691 chars
[Log] ğŸ“ Building initial streaming: 730 chars
[Log] ğŸ“ Initial streaming update: 730 chars
[Log] ğŸ“ Building initial streaming: 774 chars
[Log] ğŸ“ Initial streaming update: 774 chars
[Log] ğŸ“ Building initial streaming: 813 chars
[Log] ğŸ“ Initial streaming update: 813 chars
[Log] ğŸ“ Building initial streaming: 841 chars
[Log] ğŸ“ Initial streaming update: 841 chars
[Log] ğŸ“ Building initial streaming: 874 chars
[Log] ğŸ“ Initial streaming update: 874 chars
[Log] ğŸ“ Building initial streaming: 901 chars
[Log] ğŸ“ Initial streaming update: 901 chars
[Log] ğŸ“ Building initial streaming: 930 chars
[Log] ğŸ“ Initial streaming update: 930 chars
[Log] ğŸ“ Building initial streaming: 974 chars
[Log] ğŸ“ Initial streaming update: 974 chars
[Log] ğŸ“ Building initial streaming: 986 chars
[Log] ğŸ“ Initial streaming update: 986 chars
[Log] ğŸ“ Building initial streaming: 1024 chars
[Log] ğŸ“ Initial streaming update: 1024 chars
[Log] ğŸ“ Building initial streaming: 1061 chars
[Log] ğŸ“ Initial streaming update: 1061 chars
[Log] ğŸ“ Building initial streaming: 1112 chars
[Log] ğŸ“ Initial streaming update: 1112 chars
[Log] ğŸ” State check on tool_start: â€“ {messagePhase: "initial", activeMessageId: "b52d3c0a-f53e-45e4-abec-944cf1e2138f", streamingMessageId: "b52d3c0a-f53e-45e4-abec-944cf1e2138f", â€¦}
{messagePhase: "initial", activeMessageId: "b52d3c0a-f53e-45e4-abec-944cf1e2138f", streamingMessageId: "b52d3c0a-f53e-45e4-abec-944cf1e2138f", phaseTransitions: 1}Object
[Log] ğŸ”§ Tool started: generate_graph_data in phase initial
[Log] âœ… Completing initial streaming message: 1112 chars
[Log] Streaming message update: â€“ {id: "b52d3c0a-f53e-45e4-abec-944cf1e2138f", sessionId: "7fa7703f-60ab-43f5-a6f8-1ac887d3aa20", timestamp: "2025-06-23T05:36:21.081Z", â€¦}
{id: "b52d3c0a-f53e-45e4-abec-944cf1e2138f", sessionId: "7fa7703f-60ab-43f5-a6f8-1ac887d3aa20", timestamp: "2025-06-23T05:36:21.081Z", role: "assistant", content: "Let me provide a comprehensive analysis of the loaâ€¦visualizations to better illustrate these trends.", â€¦}Object
[Log] ğŸ”§ Tool generate_graph_data (toolu_01MMUsEVq9qnMicmbNqwSoK2) in progress
[Log] Sending POST request to http://localhost:8000/api/conversation/7fa7703f-60ab-43f5-a6f8-1ac887d3aa20/generate-followups?limit=3
[Log] Sending POST request to http://localhost:8000/api/conversation/7fa7703f-60ab-43f5-a6f8-1ac887d3aa20/generate-followups?limit=3
[Log] Generated 3 follow-up questions for conversation 7fa7703f-60ab-43f5-a6f8-1ac887d3aa20 (x2)
[Log] ğŸ” State check on tool_start: â€“ {messagePhase: "tools", activeMessageId: "b52d3c0a-f53e-45e4-abec-944cf1e2138f", streamingMessageId: "b52d3c0a-f53e-45e4-abec-944cf1e2138f", â€¦}
{messagePhase: "tools", activeMessageId: "b52d3c0a-f53e-45e4-abec-944cf1e2138f", streamingMessageId: "b52d3c0a-f53e-45e4-abec-944cf1e2138f", phaseTransitions: 2}Object
[Log] ğŸ”§ Tool started: generate_table_data in phase tools
[Log] âš ï¸ Tool started in phase tools - not completing initial message
[Log] ğŸ”§ Tool generate_table_data (toolu_01E8X6KTDwMMXZW6Dn6qu3eA) in progress
[Log] ğŸ” State check on tool_start: â€“ {messagePhase: "tools", activeMessageId: "b52d3c0a-f53e-45e4-abec-944cf1e2138f", streamingMessageId: "b52d3c0a-f53e-45e4-abec-944cf1e2138f", â€¦}
{messagePhase: "tools", activeMessageId: "b52d3c0a-f53e-45e4-abec-944cf1e2138f", streamingMessageId: "b52d3c0a-f53e-45e4-abec-944cf1e2138f", phaseTransitions: 2}Object
[Log] ğŸ”§ Tool started: generate_financial_metric in phase tools
[Log] âš ï¸ Tool started in phase tools - not completing initial message
[Log] ğŸ”§ Tool generate_financial_metric (toolu_01VY4FEoSmyKdfaPxtS1V4M1) in progress
[Log] ğŸ” State check on tool_start: â€“ {messagePhase: "tools", activeMessageId: "b52d3c0a-f53e-45e4-abec-944cf1e2138f", streamingMessageId: "b52d3c0a-f53e-45e4-abec-944cf1e2138f", â€¦}
{messagePhase: "tools", activeMessageId: "b52d3c0a-f53e-45e4-abec-944cf1e2138f", streamingMessageId: "b52d3c0a-f53e-45e4-abec-944cf1e2138f", phaseTransitions: 2}Object
[Log] ğŸ”§ Tool started: generate_financial_metric in phase tools
[Log] âš ï¸ Tool started in phase tools - not completing initial message
[Log] ğŸ”§ Tool generate_financial_metric (toolu_01YCr1cHu5h8B8VB7R2fr3Bb) in progress
[Log] ğŸ“Š Transitioning to post-tools phase
[Log] ğŸ’¬ Building post-visualization content: 3 chars
[Log] ğŸ“Š Post-visualization content update: 3 chars
[Log] ğŸ’¬ Building post-visualization content: 40 chars
[Log] ğŸ“Š Post-visualization content update: 40 chars
[Log] ğŸ’¬ Building post-visualization content: 56 chars
[Log] ğŸ“Š Post-visualization content update: 56 chars
[Log] ğŸ’¬ Building post-visualization content: 78 chars
[Log] ğŸ“Š Post-visualization content update: 78 chars
[Log] ğŸ’¬ Building post-visualization content: 127 chars
[Log] ğŸ“Š Post-visualization content update: 127 chars
[Log] ğŸ’¬ Building post-visualization content: 159 chars
[Log] ğŸ“Š Post-visualization content update: 159 chars
[Log] ğŸ’¬ Building post-visualization content: 198 chars
[Log] ğŸ“Š Post-visualization content update: 198 chars
[Log] ğŸ’¬ Building post-visualization content: 246 chars
[Log] ğŸ“Š Post-visualization content update: 246 chars
[Log] ğŸ’¬ Building post-visualization content: 269 chars
[Log] ğŸ“Š Post-visualization content update: 269 chars
[Log] ğŸ’¬ Building post-visualization content: 286 chars
[Log] ğŸ“Š Post-visualization content update: 286 chars
[Log] ğŸ’¬ Building post-visualization content: 312 chars
[Log] ğŸ“Š Post-visualization content update: 312 chars
[Log] ğŸ’¬ Building post-visualization content: 326 chars
[Log] ğŸ“Š Post-visualization content update: 326 chars
[Log] ğŸ’¬ Building post-visualization content: 354 chars
[Log] ğŸ“Š Post-visualization content update: 354 chars
[Log] ğŸ’¬ Building post-visualization content: 384 chars
[Log] ğŸ“Š Post-visualization content update: 384 chars
[Log] ğŸ’¬ Building post-visualization content: 393 chars
[Log] ğŸ“Š Post-visualization content update: 393 chars
[Log] ğŸ’¬ Building post-visualization content: 402 chars
[Log] ğŸ“Š Post-visualization content update: 402 chars
[Log] ğŸ’¬ Building post-visualization content: 433 chars
[Log] ğŸ“Š Post-visualization content update: 433 chars
[Log] ğŸ’¬ Building post-visualization content: 461 chars
[Log] ğŸ“Š Post-visualization content update: 461 chars
[Log] ğŸ’¬ Building post-visualization content: 476 chars
[Log] ğŸ“Š Post-visualization content update: 476 chars
[Log] ğŸ’¬ Building post-visualization content: 528 chars
[Log] ğŸ“Š Post-visualization content update: 528 chars
[Log] ğŸ’¬ Building post-visualization content: 564 chars
[Log] ğŸ“Š Post-visualization content update: 564 chars
[Log] ğŸ’¬ Building post-visualization content: 602 chars
[Log] ğŸ“Š Post-visualization content update: 602 chars
[Log] ğŸ’¬ Building post-visualization content: 652 chars
[Log] ğŸ“Š Post-visualization content update: 652 chars
[Log] ğŸ’¬ Building post-visualization content: 700 chars
[Log] ğŸ“Š Post-visualization content update: 700 chars
[Log] ğŸ’¬ Building post-visualization content: 747 chars
[Log] ğŸ“Š Post-visualization content update: 747 chars
[Log] ğŸ’¬ Building post-visualization content: 789 chars
[Log] ğŸ“Š Post-visualization content update: 789 chars
[Log] ğŸ’¬ Building post-visualization content: 843 chars
[Log] ğŸ“Š Post-visualization content update: 843 chars
[Log] ğŸ’¬ Building post-visualization content: 883 chars
[Log] ğŸ“Š Post-visualization content update: 883 chars
[Log] ğŸ’¬ Building post-visualization content: 938 chars
[Log] ğŸ“Š Post-visualization content update: 938 chars
[Log] ğŸ’¬ Building post-visualization content: 992 chars
[Log] ğŸ“Š Post-visualization content update: 992 chars
[Log] ğŸ Message complete in phase: post-tools
[Log] Sending GET request to http://localhost:8000/api/conversation/message/b52d3c0a-f53e-45e4-abec-944cf1e2138f
[Log] ğŸ“Š DB Message: 0 visualizations
[Log] ğŸ’¬ Post-viz text: 992 chars
[Log] ğŸ“Š Local visualizations: 0 charts, 0 tables, 0 metrics
[Log] ğŸ“ Current phase: post-tools, Tools started: true
[Log] âš ï¸ Post-tools phase with text but no DB visualizations - creating messages anyway
[Log] ğŸ’¬ Creating standalone post-visualization message: 992 chars
[Log] Streaming message update: â€“ {id: "post_viz_1750657014040_m6kh7i863", sessionId: "7fa7703f-60ab-43f5-a6f8-1ac887d3aa20", timestamp: "2025-06-23T05:36:54.040Z", â€¦}
{id: "post_viz_1750657014040_m6kh7i863", sessionId: "7fa7703f-60ab-43f5-a6f8-1ac887d3aa20", timestamp: "2025-06-23T05:36:54.040Z", role: "assistant", content: "Key observations from the visualizations and metriâ€¦cates a balanced approach to portfolio expansion.", â€¦}Object
[Log] ğŸ§¹ Cleaning up after phase transitions: initial â†’ tools â†’ post-tools
[Log] Sending POST request to http://localhost:8000/api/conversation/7fa7703f-60ab-43f5-a6f8-1ac887d3aa20/generate-followups?limit=3
[Log] Sending POST request to http://localhost:8000/api/conversation/7fa7703f-60ab-43f5-a6f8-1ac887d3aa20/generate-followups?limit=3
[Log] Generated 3 follow-up questions for conversation 7fa7703f-60ab-43f5-a6f8-1ac887d3aa20 (x2)
[Log] Checking 4 messages for cumulative visualization data...
[Log] Examining assistant message 2: â€“ "ID: b52d3c0a-f53e-45e4-abec-944cf1e2138f" â€“ "Has 0 analysis blocks"
[Log] Examining assistant message 3: â€“ "ID: post_viz_1750657014040_m6kh7i863" â€“ "Has 0 analysis blocks"
[Log] No structured visualization data found in messages or analysis results, returning empty structure
[Log] Checking 4 messages for cumulative visualization data...
[Log] Examining assistant message 2: â€“ "ID: b52d3c0a-f53e-45e4-abec-944cf1e2138f" â€“ "Has 0 analysis blocks"
[Log] Examining assistant message 3: â€“ "ID: post_viz_1750657014040_m6kh7i863" â€“ "Has 0 analysis blocks"
[Log] No structured visualization data found in messages or analysis results, returning empty structure
[Log] PDFViewer unmounting, cleaning up resources
[Log] Checking 4 messages for cumulative visualization data...
[Log] Examining assistant message 2: â€“ "ID: b52d3c0a-f53e-45e4-abec-944cf1e2138f" â€“ "Has 0 analysis blocks"
[Log] Examining assistant message 3: â€“ "ID: post_viz_1750657014040_m6kh7i863" â€“ "Has 0 analysis blocks"
[Log] No structured visualization data found in messages or analysis results, returning empty structure
[Log] Checking 4 messages for cumulative visualization data...
[Log] Examining assistant message 2: â€“ "ID: b52d3c0a-f53e-45e4-abec-944cf1e2138f" â€“ "Has 0 analysis blocks"
[Log] Examining assistant message 3: â€“ "ID: post_viz_1750657014040_m6kh7i863" â€“ "Has 0 analysis blocks"
[Log] No structured visualization data found in messages or analysis results, returning empty structure
</JavaScript_Console_Output>

<Backend_Logs>
NFO:     127.0.0.1:62207 - "GET /api/documents/d9984972-809b-4490-9b0b-2881d94f309c/file HTTP/1.1" 200 OK
INFO:     127.0.0.1:62212 - "GET /api/documents/d9984972-809b-4490-9b0b-2881d94f309c/citations HTTP/1.1" 200 OK
INFO:app.routes.websocket:WEBSOCKET_FLOW: Created streaming session default-user_7fa7703f-60ab-43f5-a6f8-1ac887d3aa20_1750656909760_7fa7703f-60ab-43f5-a6f8-1ac887d3aa20 with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: Sent initial message_start event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: Starting conversation processing for conversation: 7fa7703f-60ab-43f5-a6f8-1ac887d3aa20
INFO:repositories.document_repository:Retrieving document content using file path: d9984972-809b-4490-9b0b-2881d94f309c.pdf
INFO:repositories.document_repository:Requesting file from storage service for document d9984972-809b-4490-9b0b-2881d94f309c
INFO:repositories.document_repository:Retrieved PDF content for document d9984972-809b-4490-9b0b-2881d94f309c: 29802 bytes
INFO:repositories.document_repository:Document d9984972-809b-4490-9b0b-2881d94f309c has claude_file_id: file_011CQQb1agffUpRHFFcadW74 (native PDF support available)
INFO:repositories.document_repository:PDF document d9984972-809b-4490-9b0b-2881d94f309c uses claude_file_id for native support - raw_text not required
INFO:repositories.document_repository:Extracted data available for document d9984972-809b-4490-9b0b-2881d94f309c: ['time_periods', 'balance_sheet', 'income_statement', 'credit_quality', 'claude_textual_output_accompanying_json', 'claude_file_id']
INFO:repositories.document_repository:Successfully retrieved content for document d9984972-809b-4490-9b0b-2881d94f309c
INFO:services.conversation_service:Retrieved content for document d9984972-809b-4490-9b0b-2881d94f309c: content size=29802, raw_text size=0
INFO:services.conversation_service:Document d9984972-809b-4490-9b0b-2881d94f309c available content types: content, extracted_data
INFO:services.conversation_service:Added document d9984972-809b-4490-9b0b-2881d94f309c to context for conversation 7fa7703f-60ab-43f5-a6f8-1ac887d3aa20
INFO:repositories.document_repository:Retrieving document content using file path: d9984972-809b-4490-9b0b-2881d94f309c.pdf
INFO:repositories.document_repository:Requesting file from storage service for document d9984972-809b-4490-9b0b-2881d94f309c
INFO:repositories.document_repository:Retrieved PDF content for document d9984972-809b-4490-9b0b-2881d94f309c: 29802 bytes
INFO:repositories.document_repository:Document d9984972-809b-4490-9b0b-2881d94f309c has claude_file_id: file_011CQQb1agffUpRHFFcadW74 (native PDF support available)
INFO:repositories.document_repository:PDF document d9984972-809b-4490-9b0b-2881d94f309c uses claude_file_id for native support - raw_text not required
INFO:repositories.document_repository:Extracted data available for document d9984972-809b-4490-9b0b-2881d94f309c: ['time_periods', 'balance_sheet', 'income_statement', 'credit_quality', 'claude_textual_output_accompanying_json', 'claude_file_id']
INFO:repositories.document_repository:Successfully retrieved content for document d9984972-809b-4490-9b0b-2881d94f309c
INFO:services.conversation_service:Added document d9984972-809b-4490-9b0b-2881d94f309c with Files API file_id: file_011CQQb1agffUpRHFFcadW74
INFO:services.conversation_service:Using unified streaming approach with tools available for conversation 7fa7703f-60ab-43f5-a6f8-1ac887d3aa20
INFO:services.conversation_service:Using Files API claude_file_id file_011CQQb1agffUpRHFFcadW74 for unified streaming analysis
INFO:pdf_processing.api_service:Starting streaming analyze_with_visualization_tools for query: 'How have loans performed?...'
INFO:pdf_processing.api_service:Streaming visualization analysis turn 1/5
INFO:pdf_processing.model_router:Using Sonnet for tools {'generate_comparative_period', 'generate_table_data', 'generate_graph_data', 'generate_financial_metric'} with 46 tokens (haiku_calls=2, sonnet_calls=6)
INFO:pdf_processing.api_service:Executing tool interaction turn with model_router selected model: claude-3-5-sonnet-20241022, 4 tools available, streaming: True
INFO:httpx:HTTP Request: POST https://api.anthropic.com/v1/messages/count_tokens "HTTP/1.1 200 OK"
INFO:pdf_processing.api_service:Anthropic SDK estimated input tokens (streaming): 4321 (Custom estimate: 39)
INFO:pdf_processing.api_service:Throttling based on token count: 4321 (SDK count: 4321, Custom estimate: 39)
INFO:httpx:HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
WARNING:app.routes.websocket:Correcting message_id from msg_01FAtbwTmfQtaBDhwvzZJfNm to b52d3c0a-f53e-45e4-abec-944cf1e2138f for message_start event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Filtering out duplicate message_start event for session default-user_7fa7703f-60ab-43f5-a6f8-1ac887d3aa20_1750656909760_7fa7703f-60ab-43f5-a6f8-1ac887d3aa20
WARNING:app.routes.websocket:Correcting message_id from msg_01FAtbwTmfQtaBDhwvzZJfNm to b52d3c0a-f53e-45e4-abec-944cf1e2138f for text_start event
WARNING:app.routes.websocket:Correcting message_id from msg_01FAtbwTmfQtaBDhwvzZJfNm to b52d3c0a-f53e-45e4-abec-944cf1e2138f for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 3 chars
INFO:repositories.conversation_repository:Updated and re-fetched message b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:repositories.conversation_repository:Message content length: 3
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 3 chars
INFO:services.conversation_service:ğŸ“ Content updated: 3 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 3 chars
WARNING:app.routes.websocket:Correcting message_id from msg_01FAtbwTmfQtaBDhwvzZJfNm to b52d3c0a-f53e-45e4-abec-944cf1e2138f for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 76 chars
INFO:repositories.conversation_repository:Updated and re-fetched message b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:repositories.conversation_repository:Message content length: 76
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 76 chars
INFO:services.conversation_service:ğŸ“ Content updated: 76 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 76 chars
WARNING:app.routes.websocket:Correcting message_id from msg_01FAtbwTmfQtaBDhwvzZJfNm to b52d3c0a-f53e-45e4-abec-944cf1e2138f for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 121 chars
INFO:repositories.conversation_repository:Updated and re-fetched message b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:repositories.conversation_repository:Message content length: 121
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 121 chars
INFO:services.conversation_service:ğŸ“ Content updated: 121 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 121 chars
WARNING:app.routes.websocket:Correcting message_id from msg_01FAtbwTmfQtaBDhwvzZJfNm to b52d3c0a-f53e-45e4-abec-944cf1e2138f for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 170 chars
INFO:repositories.conversation_repository:Updated and re-fetched message b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:repositories.conversation_repository:Message content length: 170
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 170 chars
INFO:services.conversation_service:ğŸ“ Content updated: 170 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 170 chars
WARNING:app.routes.websocket:Correcting message_id from msg_01FAtbwTmfQtaBDhwvzZJfNm to b52d3c0a-f53e-45e4-abec-944cf1e2138f for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 220 chars
INFO:repositories.conversation_repository:Updated and re-fetched message b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:repositories.conversation_repository:Message content length: 220
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 220 chars
INFO:services.conversation_service:ğŸ“ Content updated: 220 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 220 chars
WARNING:app.routes.websocket:Correcting message_id from msg_01FAtbwTmfQtaBDhwvzZJfNm to b52d3c0a-f53e-45e4-abec-944cf1e2138f for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 240 chars
INFO:repositories.conversation_repository:Updated and re-fetched message b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:repositories.conversation_repository:Message content length: 240
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 240 chars
INFO:services.conversation_service:ğŸ“ Content updated: 240 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 240 chars
WARNING:app.routes.websocket:Correcting message_id from msg_01FAtbwTmfQtaBDhwvzZJfNm to b52d3c0a-f53e-45e4-abec-944cf1e2138f for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 273 chars
INFO:repositories.conversation_repository:Updated and re-fetched message b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:repositories.conversation_repository:Message content length: 273
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 273 chars
INFO:services.conversation_service:ğŸ“ Content updated: 273 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 273 chars
WARNING:app.routes.websocket:Correcting message_id from msg_01FAtbwTmfQtaBDhwvzZJfNm to b52d3c0a-f53e-45e4-abec-944cf1e2138f for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 306 chars
INFO:repositories.conversation_repository:Updated and re-fetched message b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:repositories.conversation_repository:Message content length: 306
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 306 chars
INFO:services.conversation_service:ğŸ“ Content updated: 306 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 306 chars
WARNING:app.routes.websocket:Correcting message_id from msg_01FAtbwTmfQtaBDhwvzZJfNm to b52d3c0a-f53e-45e4-abec-944cf1e2138f for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 330 chars
INFO:repositories.conversation_repository:Updated and re-fetched message b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:repositories.conversation_repository:Message content length: 330
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 330 chars
INFO:services.conversation_service:ğŸ“ Content updated: 330 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 330 chars
WARNING:app.routes.websocket:Correcting message_id from msg_01FAtbwTmfQtaBDhwvzZJfNm to b52d3c0a-f53e-45e4-abec-944cf1e2138f for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 347 chars
INFO:repositories.conversation_repository:Updated and re-fetched message b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:repositories.conversation_repository:Message content length: 347
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 347 chars
INFO:services.conversation_service:ğŸ“ Content updated: 347 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 347 chars
WARNING:app.routes.websocket:Correcting message_id from msg_01FAtbwTmfQtaBDhwvzZJfNm to b52d3c0a-f53e-45e4-abec-944cf1e2138f for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 382 chars
INFO:repositories.conversation_repository:Updated and re-fetched message b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:repositories.conversation_repository:Message content length: 382
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 382 chars
INFO:services.conversation_service:ğŸ“ Content updated: 382 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 382 chars
WARNING:app.routes.websocket:Correcting message_id from msg_01FAtbwTmfQtaBDhwvzZJfNm to b52d3c0a-f53e-45e4-abec-944cf1e2138f for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 427 chars
INFO:repositories.conversation_repository:Updated and re-fetched message b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:repositories.conversation_repository:Message content length: 427
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 427 chars
INFO:services.conversation_service:ğŸ“ Content updated: 427 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 427 chars
WARNING:app.routes.websocket:Correcting message_id from msg_01FAtbwTmfQtaBDhwvzZJfNm to b52d3c0a-f53e-45e4-abec-944cf1e2138f for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 472 chars
INFO:repositories.conversation_repository:Updated and re-fetched message b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:repositories.conversation_repository:Message content length: 472
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 472 chars
INFO:services.conversation_service:ğŸ“ Content updated: 472 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 472 chars
WARNING:app.routes.websocket:Correcting message_id from msg_01FAtbwTmfQtaBDhwvzZJfNm to b52d3c0a-f53e-45e4-abec-944cf1e2138f for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 509 chars
INFO:repositories.conversation_repository:Updated and re-fetched message b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:repositories.conversation_repository:Message content length: 509
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 509 chars
INFO:services.conversation_service:ğŸ“ Content updated: 509 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 509 chars
WARNING:app.routes.websocket:Correcting message_id from msg_01FAtbwTmfQtaBDhwvzZJfNm to b52d3c0a-f53e-45e4-abec-944cf1e2138f for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 522 chars
INFO:repositories.conversation_repository:Updated and re-fetched message b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:repositories.conversation_repository:Message content length: 522
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 522 chars
INFO:services.conversation_service:ğŸ“ Content updated: 522 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 522 chars
WARNING:app.routes.websocket:Correcting message_id from msg_01FAtbwTmfQtaBDhwvzZJfNm to b52d3c0a-f53e-45e4-abec-944cf1e2138f for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 577 chars
INFO:repositories.conversation_repository:Updated and re-fetched message b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:repositories.conversation_repository:Message content length: 577
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 577 chars
INFO:services.conversation_service:ğŸ“ Content updated: 577 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 577 chars
WARNING:app.routes.websocket:Correcting message_id from msg_01FAtbwTmfQtaBDhwvzZJfNm to b52d3c0a-f53e-45e4-abec-944cf1e2138f for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 615 chars
INFO:repositories.conversation_repository:Updated and re-fetched message b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:repositories.conversation_repository:Message content length: 615
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 615 chars
INFO:services.conversation_service:ğŸ“ Content updated: 615 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 615 chars
WARNING:app.routes.websocket:Correcting message_id from msg_01FAtbwTmfQtaBDhwvzZJfNm to b52d3c0a-f53e-45e4-abec-944cf1e2138f for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 654 chars
INFO:repositories.conversation_repository:Updated and re-fetched message b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:repositories.conversation_repository:Message content length: 654
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 654 chars
INFO:services.conversation_service:ğŸ“ Content updated: 654 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 654 chars
WARNING:app.routes.websocket:Correcting message_id from msg_01FAtbwTmfQtaBDhwvzZJfNm to b52d3c0a-f53e-45e4-abec-944cf1e2138f for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 691 chars
INFO:repositories.conversation_repository:Updated and re-fetched message b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:repositories.conversation_repository:Message content length: 691
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 691 chars
INFO:services.conversation_service:ğŸ“ Content updated: 691 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 691 chars
WARNING:app.routes.websocket:Correcting message_id from msg_01FAtbwTmfQtaBDhwvzZJfNm to b52d3c0a-f53e-45e4-abec-944cf1e2138f for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 730 chars
INFO:repositories.conversation_repository:Updated and re-fetched message b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:repositories.conversation_repository:Message content length: 730
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 730 chars
INFO:services.conversation_service:ğŸ“ Content updated: 730 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 730 chars
WARNING:app.routes.websocket:Correcting message_id from msg_01FAtbwTmfQtaBDhwvzZJfNm to b52d3c0a-f53e-45e4-abec-944cf1e2138f for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 774 chars
INFO:repositories.conversation_repository:Updated and re-fetched message b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:repositories.conversation_repository:Message content length: 774
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 774 chars
INFO:services.conversation_service:ğŸ“ Content updated: 774 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 774 chars
WARNING:app.routes.websocket:Correcting message_id from msg_01FAtbwTmfQtaBDhwvzZJfNm to b52d3c0a-f53e-45e4-abec-944cf1e2138f for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 813 chars
INFO:repositories.conversation_repository:Updated and re-fetched message b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:repositories.conversation_repository:Message content length: 813
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 813 chars
INFO:services.conversation_service:ğŸ“ Content updated: 813 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 813 chars
WARNING:app.routes.websocket:Correcting message_id from msg_01FAtbwTmfQtaBDhwvzZJfNm to b52d3c0a-f53e-45e4-abec-944cf1e2138f for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 841 chars
INFO:repositories.conversation_repository:Updated and re-fetched message b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:repositories.conversation_repository:Message content length: 841
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 841 chars
INFO:services.conversation_service:ğŸ“ Content updated: 841 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 841 chars
WARNING:app.routes.websocket:Correcting message_id from msg_01FAtbwTmfQtaBDhwvzZJfNm to b52d3c0a-f53e-45e4-abec-944cf1e2138f for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 874 chars
INFO:repositories.conversation_repository:Updated and re-fetched message b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:repositories.conversation_repository:Message content length: 874
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 874 chars
INFO:services.conversation_service:ğŸ“ Content updated: 874 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 874 chars
WARNING:app.routes.websocket:Correcting message_id from msg_01FAtbwTmfQtaBDhwvzZJfNm to b52d3c0a-f53e-45e4-abec-944cf1e2138f for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 901 chars
INFO:repositories.conversation_repository:Updated and re-fetched message b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:repositories.conversation_repository:Message content length: 901
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 901 chars
INFO:services.conversation_service:ğŸ“ Content updated: 901 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 901 chars
WARNING:app.routes.websocket:Correcting message_id from msg_01FAtbwTmfQtaBDhwvzZJfNm to b52d3c0a-f53e-45e4-abec-944cf1e2138f for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 930 chars
INFO:repositories.conversation_repository:Updated and re-fetched message b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:repositories.conversation_repository:Message content length: 930
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 930 chars
INFO:services.conversation_service:ğŸ“ Content updated: 930 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 930 chars
WARNING:app.routes.websocket:Correcting message_id from msg_01FAtbwTmfQtaBDhwvzZJfNm to b52d3c0a-f53e-45e4-abec-944cf1e2138f for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 974 chars
INFO:repositories.conversation_repository:Updated and re-fetched message b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:repositories.conversation_repository:Message content length: 974
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 974 chars
INFO:services.conversation_service:ğŸ“ Content updated: 974 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 974 chars
WARNING:app.routes.websocket:Correcting message_id from msg_01FAtbwTmfQtaBDhwvzZJfNm to b52d3c0a-f53e-45e4-abec-944cf1e2138f for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 986 chars
INFO:repositories.conversation_repository:Updated and re-fetched message b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:repositories.conversation_repository:Message content length: 986
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 986 chars
INFO:services.conversation_service:ğŸ“ Content updated: 986 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 986 chars
WARNING:app.routes.websocket:Correcting message_id from msg_01FAtbwTmfQtaBDhwvzZJfNm to b52d3c0a-f53e-45e4-abec-944cf1e2138f for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 1024 chars
INFO:repositories.conversation_repository:Updated and re-fetched message b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:repositories.conversation_repository:Message content length: 1024
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 1024 chars
INFO:services.conversation_service:ğŸ“ Content updated: 1024 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 1024 chars
WARNING:app.routes.websocket:Correcting message_id from msg_01FAtbwTmfQtaBDhwvzZJfNm to b52d3c0a-f53e-45e4-abec-944cf1e2138f for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 1061 chars
INFO:repositories.conversation_repository:Updated and re-fetched message b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:repositories.conversation_repository:Message content length: 1061
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 1061 chars
INFO:services.conversation_service:ğŸ“ Content updated: 1061 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 1061 chars
WARNING:app.routes.websocket:Correcting message_id from msg_01FAtbwTmfQtaBDhwvzZJfNm to b52d3c0a-f53e-45e4-abec-944cf1e2138f for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 1112 chars
INFO:repositories.conversation_repository:Updated and re-fetched message b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:repositories.conversation_repository:Message content length: 1112
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 1112 chars
INFO:services.conversation_service:ğŸ“ Content updated: 1112 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 1112 chars
WARNING:app.routes.websocket:Correcting message_id from msg_01FAtbwTmfQtaBDhwvzZJfNm to b52d3c0a-f53e-45e4-abec-944cf1e2138f for content_block_stop event
WARNING:app.routes.websocket:Correcting message_id from msg_01FAtbwTmfQtaBDhwvzZJfNm to b52d3c0a-f53e-45e4-abec-944cf1e2138f for tool_start event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting tool_start event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: tool_start - tool_id=toolu_01MMUsEVq9qnMicmbNqwSoK2, tool_name=generate_graph_data
INFO:services.conversation_service:Found ANTHROPIC_API_KEY in environment variables: sk-ant-a...TQAA
INFO:pdf_processing.api_service:ClaudeService initialized with model: claude-3-5-sonnet-20241022, PDF support, timeout=90s, max_retries=5, headers: {'anthropic-beta': 'token-efficient-tools-2025-02-19,files-api-2025-04-14,fine-grained-tool-streaming-2025-05-14'}
INFO:pdf_processing.langgraph_service:LangGraphService initialized with model: claude-3-5-sonnet-20241022
INFO:pdf_processing.api_service:LangGraph service successfully initialized
INFO:services.conversation_service:Found ANTHROPIC_API_KEY in environment variables: sk-ant-a...TQAA
INFO:pdf_processing.api_service:ClaudeService initialized with model: claude-3-5-sonnet-20241022, PDF support, timeout=90s, max_retries=5, headers: {'anthropic-beta': 'token-efficient-tools-2025-02-19,files-api-2025-04-14,fine-grained-tool-streaming-2025-05-14'}
INFO:pdf_processing.langgraph_service:LangGraphService initialized with model: claude-3-5-sonnet-20241022
INFO:pdf_processing.api_service:LangGraph service successfully initialized
INFO:pdf_processing.api_service:Sending request to Claude API with 1 messages, streaming: False
INFO:pdf_processing.api_service:Sending request to Claude API with 1 messages, streaming: False
INFO:httpx:HTTP Request: POST https://api.anthropic.com/v1/messages/count_tokens "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST https://api.anthropic.com/v1/messages/count_tokens "HTTP/1.1 200 OK"
INFO:pdf_processing.api_service:Anthropic SDK estimated input tokens (generate_response non-streaming): 495
INFO:pdf_processing.api_service:Anthropic SDK estimated input tokens (generate_response non-streaming): 495
INFO:httpx:HTTP Request: POST https://api.anthropic.com/v1/messages/count_tokens "HTTP/1.1 200 OK"
INFO:pdf_processing.api_service:Anthropic SDK estimated input tokens (non-streaming): 495 (Custom estimate: 511)
INFO:pdf_processing.api_service:Throttling based on token count: 495 (SDK count: 495, Custom estimate: 511)
INFO:httpx:HTTP Request: POST https://api.anthropic.com/v1/messages/count_tokens "HTTP/1.1 200 OK"
INFO:pdf_processing.api_service:Anthropic SDK estimated input tokens (non-streaming): 495 (Custom estimate: 511)
INFO:pdf_processing.api_service:Throttling based on token count: 495 (SDK count: 495, Custom estimate: 511)
INFO:httpx:HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
INFO:     127.0.0.1:62219 - "POST /api/conversation/7fa7703f-60ab-43f5-a6f8-1ac887d3aa20/generate-followups?limit=3 HTTP/1.1" 200 OK
INFO:httpx:HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
INFO:     127.0.0.1:62220 - "POST /api/conversation/7fa7703f-60ab-43f5-a6f8-1ac887d3aa20/generate-followups?limit=3 HTTP/1.1" 200 OK
WARNING:app.routes.websocket:Correcting message_id from msg_01FAtbwTmfQtaBDhwvzZJfNm to b52d3c0a-f53e-45e4-abec-944cf1e2138f for content_block_stop event
WARNING:app.routes.websocket:Correcting message_id from msg_01FAtbwTmfQtaBDhwvzZJfNm to b52d3c0a-f53e-45e4-abec-944cf1e2138f for message_delta event
WARNING:app.routes.websocket:Correcting message_id from msg_01FAtbwTmfQtaBDhwvzZJfNm to b52d3c0a-f53e-45e4-abec-944cf1e2138f for message_stop event
INFO:pdf_processing.api_service:Raw tool input from Claude for generate_graph_data: type=<class 'dict'>
WARNING:app.routes.websocket:Correcting message_id from msg_01FAtbwTmfQtaBDhwvzZJfNm to b52d3c0a-f53e-45e4-abec-944cf1e2138f for tool_complete event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting tool_complete event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: tool_complete - tool_id=toolu_01MMUsEVq9qnMicmbNqwSoK2, tool_name=generate_graph_data
INFO:pdf_processing.api_service:Turn 1: Initial streaming text preserved (1112 chars)
INFO:pdf_processing.api_service:Received 1 tool calls from streaming response
INFO:pdf_processing.api_service:Tool call: generate_graph_data (ID: toolu_01MMUsEVq9qnMicmbNqwSoK2)
INFO:pdf_processing.api_service:Processing streaming tool generate_graph_data (ID: toolu_01MMUsEVq9qnMicmbNqwSoK2)
INFO:pdf_processing.api_service:Tool generate_graph_data (ID: toolu_01MMUsEVq9qnMicmbNqwSoK2) - input type: <class 'dict'>
INFO:pdf_processing.api_service:Tool generate_graph_data (ID: toolu_01MMUsEVq9qnMicmbNqwSoK2) - dict input keys: ['chartType', 'config', 'data', 'chartConfig']
INFO:utils.tool_processing:Processing generate_graph_data (ID: toolu_01MMUsEVq9qnMicmbNqwSoK2) - input type: <class 'dict'>
INFO:utils.tool_processing:Starting process_chart_input with input type: <class 'dict'>
INFO:utils.tool_processing:Chart input keys: ['chartType', 'config', 'data', 'chartConfig']
INFO:utils.tool_processing:Chart config type: <class 'str'>
INFO:utils.tool_processing:Chart data type: <class 'list'>, length: 5
INFO:utils.tool_processing:Chart chartConfig type: <class 'dict'>
WARNING:utils.tool_processing:Chart config is a JSON string, parsing it
INFO:utils.tool_processing:Successfully parsed config JSON string
INFO:utils.tool_processing:Chart config keys: ['title', 'xAxisKey', 'xAxisLabel', 'yAxisLabel', 'description']
INFO:utils.tool_processing:Successfully got original_data: type=<class 'list'>
INFO:utils.tool_processing:Chart type: line
INFO:utils.tool_processing:Chart config settings type: <class 'dict'>
INFO:utils.tool_processing:x_axis_key: period
INFO:utils.tool_processing:Transforming chart data to {x, y} format required by ChartDataItem model
INFO:utils.tool_processing:Line chart with multiple series (['ci', 'cre', 'residential', 'consumer']) - keeping flat format
INFO:utils.tool_processing:Successfully processed chart: Loan Portfolio Composition Trends
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting tool_complete event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: tool_complete - tool_id=toolu_01MMUsEVq9qnMicmbNqwSoK2, tool_name=generate_graph_data
INFO:pdf_processing.api_service:Streaming visualization analysis turn 2/5
INFO:pdf_processing.model_router:Using Sonnet for tools {'generate_comparative_period', 'generate_table_data', 'generate_graph_data', 'generate_financial_metric'} with 981 tokens (haiku_calls=2, sonnet_calls=7)
INFO:pdf_processing.api_service:Executing tool interaction turn with model_router selected model: claude-3-5-sonnet-20241022, 4 tools available, streaming: True
INFO:httpx:HTTP Request: POST https://api.anthropic.com/v1/messages/count_tokens "HTTP/1.1 200 OK"
INFO:pdf_processing.api_service:Anthropic SDK estimated input tokens (streaming): 5543 (Custom estimate: 317)
INFO:pdf_processing.api_service:Throttling based on token count: 5543 (SDK count: 5543, Custom estimate: 317)
INFO:httpx:HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
WARNING:app.routes.websocket:Correcting message_id from msg_015fBqsjdNVfAij5A5K5AWWA to b52d3c0a-f53e-45e4-abec-944cf1e2138f for message_start event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Filtering out duplicate message_start event for session default-user_7fa7703f-60ab-43f5-a6f8-1ac887d3aa20_1750656909760_7fa7703f-60ab-43f5-a6f8-1ac887d3aa20
WARNING:app.routes.websocket:Correcting message_id from msg_015fBqsjdNVfAij5A5K5AWWA to b52d3c0a-f53e-45e4-abec-944cf1e2138f for tool_start event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting tool_start event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: tool_start - tool_id=toolu_01E8X6KTDwMMXZW6Dn6qu3eA, tool_name=generate_table_data
WARNING:app.routes.websocket:Correcting message_id from msg_015fBqsjdNVfAij5A5K5AWWA to b52d3c0a-f53e-45e4-abec-944cf1e2138f for content_block_stop event
WARNING:app.routes.websocket:Correcting message_id from msg_015fBqsjdNVfAij5A5K5AWWA to b52d3c0a-f53e-45e4-abec-944cf1e2138f for message_delta event
WARNING:app.routes.websocket:Correcting message_id from msg_015fBqsjdNVfAij5A5K5AWWA to b52d3c0a-f53e-45e4-abec-944cf1e2138f for message_stop event
INFO:pdf_processing.api_service:Raw tool input from Claude for generate_table_data: type=<class 'dict'>
WARNING:app.routes.websocket:Correcting message_id from msg_015fBqsjdNVfAij5A5K5AWWA to b52d3c0a-f53e-45e4-abec-944cf1e2138f for tool_complete event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting tool_complete event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: tool_complete - tool_id=toolu_01E8X6KTDwMMXZW6Dn6qu3eA, tool_name=generate_table_data
INFO:pdf_processing.api_service:Received 1 tool calls from streaming response
INFO:pdf_processing.api_service:Tool call: generate_table_data (ID: toolu_01E8X6KTDwMMXZW6Dn6qu3eA)
INFO:pdf_processing.api_service:Processing streaming tool generate_table_data (ID: toolu_01E8X6KTDwMMXZW6Dn6qu3eA)
INFO:pdf_processing.api_service:Tool generate_table_data (ID: toolu_01E8X6KTDwMMXZW6Dn6qu3eA) - input type: <class 'dict'>
INFO:pdf_processing.api_service:Tool generate_table_data (ID: toolu_01E8X6KTDwMMXZW6Dn6qu3eA) - dict input keys: ['tableType', 'config', 'data']
INFO:utils.tool_processing:Processing generate_table_data (ID: toolu_01E8X6KTDwMMXZW6Dn6qu3eA) - input type: <class 'dict'>
INFO:utils.tool_processing:Starting process_table_input with input type: <class 'dict'>
INFO:utils.tool_processing:Table input keys: ['tableType', 'config', 'data']
INFO:utils.tool_processing:Table config type: <class 'str'>
INFO:utils.tool_processing:Table data type: <class 'list'>, length: 4
WARNING:utils.tool_processing:Table config is a JSON string, parsing it
INFO:utils.tool_processing:Successfully parsed table config JSON string
INFO:utils.tool_processing:Successfully processed table: Credit Quality Metrics
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting tool_complete event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: tool_complete - tool_id=toolu_01E8X6KTDwMMXZW6Dn6qu3eA, tool_name=generate_table_data
INFO:pdf_processing.api_service:Streaming visualization analysis turn 3/5
INFO:pdf_processing.model_router:Using Sonnet for tools {'generate_comparative_period', 'generate_table_data', 'generate_graph_data', 'generate_financial_metric'} with 1584 tokens (haiku_calls=2, sonnet_calls=8)
INFO:pdf_processing.api_service:Executing tool interaction turn with model_router selected model: claude-3-5-sonnet-20241022, 4 tools available, streaming: True
INFO:httpx:HTTP Request: POST https://api.anthropic.com/v1/messages/count_tokens "HTTP/1.1 200 OK"
INFO:pdf_processing.api_service:Anthropic SDK estimated input tokens (streaming): 6483 (Custom estimate: 317)
INFO:pdf_processing.api_service:Throttling based on token count: 6483 (SDK count: 6483, Custom estimate: 317)
INFO:httpx:HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
WARNING:app.routes.websocket:Correcting message_id from msg_01UGWme53Qt5QLiYBRJZwn1Z to b52d3c0a-f53e-45e4-abec-944cf1e2138f for message_start event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Filtering out duplicate message_start event for session default-user_7fa7703f-60ab-43f5-a6f8-1ac887d3aa20_1750656909760_7fa7703f-60ab-43f5-a6f8-1ac887d3aa20
WARNING:app.routes.websocket:Correcting message_id from msg_01UGWme53Qt5QLiYBRJZwn1Z to b52d3c0a-f53e-45e4-abec-944cf1e2138f for tool_start event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting tool_start event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: tool_start - tool_id=toolu_01VY4FEoSmyKdfaPxtS1V4M1, tool_name=generate_financial_metric
WARNING:app.routes.websocket:Correcting message_id from msg_01UGWme53Qt5QLiYBRJZwn1Z to b52d3c0a-f53e-45e4-abec-944cf1e2138f for content_block_stop event
WARNING:app.routes.websocket:Correcting message_id from msg_01UGWme53Qt5QLiYBRJZwn1Z to b52d3c0a-f53e-45e4-abec-944cf1e2138f for message_delta event
WARNING:app.routes.websocket:Correcting message_id from msg_01UGWme53Qt5QLiYBRJZwn1Z to b52d3c0a-f53e-45e4-abec-944cf1e2138f for message_stop event
INFO:pdf_processing.api_service:Raw tool input from Claude for generate_financial_metric: type=<class 'dict'>
WARNING:app.routes.websocket:Correcting message_id from msg_01UGWme53Qt5QLiYBRJZwn1Z to b52d3c0a-f53e-45e4-abec-944cf1e2138f for tool_complete event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting tool_complete event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: tool_complete - tool_id=toolu_01VY4FEoSmyKdfaPxtS1V4M1, tool_name=generate_financial_metric
INFO:pdf_processing.api_service:Received 1 tool calls from streaming response
INFO:pdf_processing.api_service:Tool call: generate_financial_metric (ID: toolu_01VY4FEoSmyKdfaPxtS1V4M1)
INFO:pdf_processing.api_service:Processing streaming tool generate_financial_metric (ID: toolu_01VY4FEoSmyKdfaPxtS1V4M1)
INFO:pdf_processing.api_service:Tool generate_financial_metric (ID: toolu_01VY4FEoSmyKdfaPxtS1V4M1) - input type: <class 'dict'>
INFO:pdf_processing.api_service:Tool generate_financial_metric (ID: toolu_01VY4FEoSmyKdfaPxtS1V4M1) - dict input keys: ['category', 'name', 'period', 'value', 'unit', 'isEstimated']
INFO:utils.tool_processing:Processing generate_financial_metric (ID: toolu_01VY4FEoSmyKdfaPxtS1V4M1) - input type: <class 'dict'>
INFO:utils.tool_processing:Successfully processed financial metric: Non-Performing Assets to Total Loans Ratio
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting tool_complete event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: tool_complete - tool_id=toolu_01VY4FEoSmyKdfaPxtS1V4M1, tool_name=generate_financial_metric
INFO:pdf_processing.api_service:Streaming visualization analysis turn 4/5
INFO:pdf_processing.model_router:Using Sonnet for tools {'generate_comparative_period', 'generate_table_data', 'generate_graph_data', 'generate_financial_metric'} with 1711 tokens (haiku_calls=2, sonnet_calls=9)
INFO:pdf_processing.api_service:Executing tool interaction turn with model_router selected model: claude-3-5-sonnet-20241022, 4 tools available, streaming: True
INFO:httpx:HTTP Request: POST https://api.anthropic.com/v1/messages/count_tokens "HTTP/1.1 200 OK"
INFO:pdf_processing.api_service:Anthropic SDK estimated input tokens (streaming): 6706 (Custom estimate: 317)
INFO:pdf_processing.api_service:Throttling based on token count: 6706 (SDK count: 6706, Custom estimate: 317)
INFO:httpx:HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
WARNING:app.routes.websocket:Correcting message_id from msg_014XRQJEzp8AC2Zjhm1sFMXx to b52d3c0a-f53e-45e4-abec-944cf1e2138f for message_start event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Filtering out duplicate message_start event for session default-user_7fa7703f-60ab-43f5-a6f8-1ac887d3aa20_1750656909760_7fa7703f-60ab-43f5-a6f8-1ac887d3aa20
WARNING:app.routes.websocket:Correcting message_id from msg_014XRQJEzp8AC2Zjhm1sFMXx to b52d3c0a-f53e-45e4-abec-944cf1e2138f for tool_start event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting tool_start event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: tool_start - tool_id=toolu_01YCr1cHu5h8B8VB7R2fr3Bb, tool_name=generate_financial_metric
WARNING:app.routes.websocket:Correcting message_id from msg_014XRQJEzp8AC2Zjhm1sFMXx to b52d3c0a-f53e-45e4-abec-944cf1e2138f for content_block_stop event
WARNING:app.routes.websocket:Correcting message_id from msg_014XRQJEzp8AC2Zjhm1sFMXx to b52d3c0a-f53e-45e4-abec-944cf1e2138f for message_delta event
WARNING:app.routes.websocket:Correcting message_id from msg_014XRQJEzp8AC2Zjhm1sFMXx to b52d3c0a-f53e-45e4-abec-944cf1e2138f for message_stop event
INFO:pdf_processing.api_service:Raw tool input from Claude for generate_financial_metric: type=<class 'dict'>
WARNING:app.routes.websocket:Correcting message_id from msg_014XRQJEzp8AC2Zjhm1sFMXx to b52d3c0a-f53e-45e4-abec-944cf1e2138f for tool_complete event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting tool_complete event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: tool_complete - tool_id=toolu_01YCr1cHu5h8B8VB7R2fr3Bb, tool_name=generate_financial_metric
INFO:pdf_processing.api_service:Received 1 tool calls from streaming response
INFO:pdf_processing.api_service:Tool call: generate_financial_metric (ID: toolu_01YCr1cHu5h8B8VB7R2fr3Bb)
INFO:pdf_processing.api_service:Processing streaming tool generate_financial_metric (ID: toolu_01YCr1cHu5h8B8VB7R2fr3Bb)
INFO:pdf_processing.api_service:Tool generate_financial_metric (ID: toolu_01YCr1cHu5h8B8VB7R2fr3Bb) - input type: <class 'dict'>
INFO:pdf_processing.api_service:Tool generate_financial_metric (ID: toolu_01YCr1cHu5h8B8VB7R2fr3Bb) - dict input keys: ['category', 'name', 'period', 'value', 'unit', 'isEstimated']
INFO:utils.tool_processing:Processing generate_financial_metric (ID: toolu_01YCr1cHu5h8B8VB7R2fr3Bb) - input type: <class 'dict'>
INFO:utils.tool_processing:Successfully processed financial metric: Quarter-over-Quarter Loan Growth Rate
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting tool_complete event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: tool_complete - tool_id=toolu_01YCr1cHu5h8B8VB7R2fr3Bb, tool_name=generate_financial_metric
INFO:pdf_processing.api_service:Streaming visualization analysis turn 5/5
INFO:pdf_processing.model_router:Using Sonnet for tools {'generate_comparative_period', 'generate_table_data', 'generate_graph_data', 'generate_financial_metric'} with 1831 tokens (haiku_calls=2, sonnet_calls=10)
INFO:pdf_processing.api_service:Executing tool interaction turn with model_router selected model: claude-3-5-sonnet-20241022, 4 tools available, streaming: True
INFO:httpx:HTTP Request: POST https://api.anthropic.com/v1/messages/count_tokens "HTTP/1.1 200 OK"
INFO:pdf_processing.api_service:Anthropic SDK estimated input tokens (streaming): 6923 (Custom estimate: 317)
INFO:pdf_processing.api_service:Throttling based on token count: 6923 (SDK count: 6923, Custom estimate: 317)
INFO:httpx:HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
WARNING:app.routes.websocket:Correcting message_id from msg_01GXaAyqZhqsFwBKJ6MCWRX2 to b52d3c0a-f53e-45e4-abec-944cf1e2138f for message_start event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Filtering out duplicate message_start event for session default-user_7fa7703f-60ab-43f5-a6f8-1ac887d3aa20_1750656909760_7fa7703f-60ab-43f5-a6f8-1ac887d3aa20
WARNING:app.routes.websocket:Correcting message_id from msg_01GXaAyqZhqsFwBKJ6MCWRX2 to b52d3c0a-f53e-45e4-abec-944cf1e2138f for text_start event
WARNING:app.routes.websocket:Correcting message_id from msg_01GXaAyqZhqsFwBKJ6MCWRX2 to b52d3c0a-f53e-45e4-abec-944cf1e2138f for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 3 chars
INFO:repositories.conversation_repository:Updated and re-fetched message b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:repositories.conversation_repository:Message content length: 3
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 3 chars
INFO:services.conversation_service:ğŸ“ Content updated: 3 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 3 chars
WARNING:app.routes.websocket:Correcting message_id from msg_01GXaAyqZhqsFwBKJ6MCWRX2 to b52d3c0a-f53e-45e4-abec-944cf1e2138f for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 40 chars
INFO:repositories.conversation_repository:Updated and re-fetched message b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:repositories.conversation_repository:Message content length: 40
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 40 chars
INFO:services.conversation_service:ğŸ“ Content updated: 40 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 40 chars
WARNING:app.routes.websocket:Correcting message_id from msg_01GXaAyqZhqsFwBKJ6MCWRX2 to b52d3c0a-f53e-45e4-abec-944cf1e2138f for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 56 chars
INFO:repositories.conversation_repository:Updated and re-fetched message b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:repositories.conversation_repository:Message content length: 56
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 56 chars
INFO:services.conversation_service:ğŸ“ Content updated: 56 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 56 chars
WARNING:app.routes.websocket:Correcting message_id from msg_01GXaAyqZhqsFwBKJ6MCWRX2 to b52d3c0a-f53e-45e4-abec-944cf1e2138f for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 78 chars
INFO:repositories.conversation_repository:Updated and re-fetched message b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:repositories.conversation_repository:Message content length: 78
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 78 chars
INFO:services.conversation_service:ğŸ“ Content updated: 78 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 78 chars
WARNING:app.routes.websocket:Correcting message_id from msg_01GXaAyqZhqsFwBKJ6MCWRX2 to b52d3c0a-f53e-45e4-abec-944cf1e2138f for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 127 chars
INFO:repositories.conversation_repository:Updated and re-fetched message b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:repositories.conversation_repository:Message content length: 127
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 127 chars
INFO:services.conversation_service:ğŸ“ Content updated: 127 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 127 chars
WARNING:app.routes.websocket:Correcting message_id from msg_01GXaAyqZhqsFwBKJ6MCWRX2 to b52d3c0a-f53e-45e4-abec-944cf1e2138f for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 159 chars
INFO:repositories.conversation_repository:Updated and re-fetched message b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:repositories.conversation_repository:Message content length: 159
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 159 chars
INFO:services.conversation_service:ğŸ“ Content updated: 159 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 159 chars
WARNING:app.routes.websocket:Correcting message_id from msg_01GXaAyqZhqsFwBKJ6MCWRX2 to b52d3c0a-f53e-45e4-abec-944cf1e2138f for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 198 chars
INFO:repositories.conversation_repository:Updated and re-fetched message b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:repositories.conversation_repository:Message content length: 198
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 198 chars
INFO:services.conversation_service:ğŸ“ Content updated: 198 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 198 chars
WARNING:app.routes.websocket:Correcting message_id from msg_01GXaAyqZhqsFwBKJ6MCWRX2 to b52d3c0a-f53e-45e4-abec-944cf1e2138f for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 246 chars
INFO:repositories.conversation_repository:Updated and re-fetched message b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:repositories.conversation_repository:Message content length: 246
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 246 chars
INFO:services.conversation_service:ğŸ“ Content updated: 246 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 246 chars
WARNING:app.routes.websocket:Correcting message_id from msg_01GXaAyqZhqsFwBKJ6MCWRX2 to b52d3c0a-f53e-45e4-abec-944cf1e2138f for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 269 chars
INFO:repositories.conversation_repository:Updated and re-fetched message b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:repositories.conversation_repository:Message content length: 269
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 269 chars
INFO:services.conversation_service:ğŸ“ Content updated: 269 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 269 chars
WARNING:app.routes.websocket:Correcting message_id from msg_01GXaAyqZhqsFwBKJ6MCWRX2 to b52d3c0a-f53e-45e4-abec-944cf1e2138f for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 286 chars
INFO:repositories.conversation_repository:Updated and re-fetched message b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:repositories.conversation_repository:Message content length: 286
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 286 chars
INFO:services.conversation_service:ğŸ“ Content updated: 286 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 286 chars
WARNING:app.routes.websocket:Correcting message_id from msg_01GXaAyqZhqsFwBKJ6MCWRX2 to b52d3c0a-f53e-45e4-abec-944cf1e2138f for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 312 chars
INFO:repositories.conversation_repository:Updated and re-fetched message b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:repositories.conversation_repository:Message content length: 312
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 312 chars
INFO:services.conversation_service:ğŸ“ Content updated: 312 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 312 chars
WARNING:app.routes.websocket:Correcting message_id from msg_01GXaAyqZhqsFwBKJ6MCWRX2 to b52d3c0a-f53e-45e4-abec-944cf1e2138f for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 326 chars
INFO:repositories.conversation_repository:Updated and re-fetched message b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:repositories.conversation_repository:Message content length: 326
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 326 chars
INFO:services.conversation_service:ğŸ“ Content updated: 326 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 326 chars
WARNING:app.routes.websocket:Correcting message_id from msg_01GXaAyqZhqsFwBKJ6MCWRX2 to b52d3c0a-f53e-45e4-abec-944cf1e2138f for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 354 chars
INFO:repositories.conversation_repository:Updated and re-fetched message b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:repositories.conversation_repository:Message content length: 354
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 354 chars
INFO:services.conversation_service:ğŸ“ Content updated: 354 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 354 chars
WARNING:app.routes.websocket:Correcting message_id from msg_01GXaAyqZhqsFwBKJ6MCWRX2 to b52d3c0a-f53e-45e4-abec-944cf1e2138f for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 384 chars
INFO:repositories.conversation_repository:Updated and re-fetched message b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:repositories.conversation_repository:Message content length: 384
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 384 chars
INFO:services.conversation_service:ğŸ“ Content updated: 384 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 384 chars
WARNING:app.routes.websocket:Correcting message_id from msg_01GXaAyqZhqsFwBKJ6MCWRX2 to b52d3c0a-f53e-45e4-abec-944cf1e2138f for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 393 chars
INFO:repositories.conversation_repository:Updated and re-fetched message b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:repositories.conversation_repository:Message content length: 393
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 393 chars
INFO:services.conversation_service:ğŸ“ Content updated: 393 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 393 chars
WARNING:app.routes.websocket:Correcting message_id from msg_01GXaAyqZhqsFwBKJ6MCWRX2 to b52d3c0a-f53e-45e4-abec-944cf1e2138f for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 402 chars
INFO:repositories.conversation_repository:Updated and re-fetched message b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:repositories.conversation_repository:Message content length: 402
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 402 chars
INFO:services.conversation_service:ğŸ“ Content updated: 402 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 402 chars
WARNING:app.routes.websocket:Correcting message_id from msg_01GXaAyqZhqsFwBKJ6MCWRX2 to b52d3c0a-f53e-45e4-abec-944cf1e2138f for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 433 chars
INFO:repositories.conversation_repository:Updated and re-fetched message b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:repositories.conversation_repository:Message content length: 433
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 433 chars
INFO:services.conversation_service:ğŸ“ Content updated: 433 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 433 chars
WARNING:app.routes.websocket:Correcting message_id from msg_01GXaAyqZhqsFwBKJ6MCWRX2 to b52d3c0a-f53e-45e4-abec-944cf1e2138f for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 461 chars
INFO:repositories.conversation_repository:Updated and re-fetched message b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:repositories.conversation_repository:Message content length: 461
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 461 chars
INFO:services.conversation_service:ğŸ“ Content updated: 461 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 461 chars
WARNING:app.routes.websocket:Correcting message_id from msg_01GXaAyqZhqsFwBKJ6MCWRX2 to b52d3c0a-f53e-45e4-abec-944cf1e2138f for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 476 chars
INFO:repositories.conversation_repository:Updated and re-fetched message b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:repositories.conversation_repository:Message content length: 476
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 476 chars
INFO:services.conversation_service:ğŸ“ Content updated: 476 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 476 chars
WARNING:app.routes.websocket:Correcting message_id from msg_01GXaAyqZhqsFwBKJ6MCWRX2 to b52d3c0a-f53e-45e4-abec-944cf1e2138f for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 528 chars
INFO:repositories.conversation_repository:Updated and re-fetched message b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:repositories.conversation_repository:Message content length: 528
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 528 chars
INFO:services.conversation_service:ğŸ“ Content updated: 528 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 528 chars
WARNING:app.routes.websocket:Correcting message_id from msg_01GXaAyqZhqsFwBKJ6MCWRX2 to b52d3c0a-f53e-45e4-abec-944cf1e2138f for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 564 chars
INFO:repositories.conversation_repository:Updated and re-fetched message b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:repositories.conversation_repository:Message content length: 564
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 564 chars
INFO:services.conversation_service:ğŸ“ Content updated: 564 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 564 chars
WARNING:app.routes.websocket:Correcting message_id from msg_01GXaAyqZhqsFwBKJ6MCWRX2 to b52d3c0a-f53e-45e4-abec-944cf1e2138f for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 602 chars
INFO:repositories.conversation_repository:Updated and re-fetched message b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:repositories.conversation_repository:Message content length: 602
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 602 chars
INFO:services.conversation_service:ğŸ“ Content updated: 602 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 602 chars
WARNING:app.routes.websocket:Correcting message_id from msg_01GXaAyqZhqsFwBKJ6MCWRX2 to b52d3c0a-f53e-45e4-abec-944cf1e2138f for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 652 chars
INFO:repositories.conversation_repository:Updated and re-fetched message b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:repositories.conversation_repository:Message content length: 652
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 652 chars
INFO:services.conversation_service:ğŸ“ Content updated: 652 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 652 chars
WARNING:app.routes.websocket:Correcting message_id from msg_01GXaAyqZhqsFwBKJ6MCWRX2 to b52d3c0a-f53e-45e4-abec-944cf1e2138f for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 700 chars
INFO:repositories.conversation_repository:Updated and re-fetched message b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:repositories.conversation_repository:Message content length: 700
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 700 chars
INFO:services.conversation_service:ğŸ“ Content updated: 700 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 700 chars
WARNING:app.routes.websocket:Correcting message_id from msg_01GXaAyqZhqsFwBKJ6MCWRX2 to b52d3c0a-f53e-45e4-abec-944cf1e2138f for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 747 chars
INFO:repositories.conversation_repository:Updated and re-fetched message b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:repositories.conversation_repository:Message content length: 747
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 747 chars
INFO:services.conversation_service:ğŸ“ Content updated: 747 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 747 chars
WARNING:app.routes.websocket:Correcting message_id from msg_01GXaAyqZhqsFwBKJ6MCWRX2 to b52d3c0a-f53e-45e4-abec-944cf1e2138f for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 789 chars
INFO:repositories.conversation_repository:Updated and re-fetched message b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:repositories.conversation_repository:Message content length: 789
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 789 chars
INFO:services.conversation_service:ğŸ“ Content updated: 789 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 789 chars
WARNING:app.routes.websocket:Correcting message_id from msg_01GXaAyqZhqsFwBKJ6MCWRX2 to b52d3c0a-f53e-45e4-abec-944cf1e2138f for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 843 chars
INFO:repositories.conversation_repository:Updated and re-fetched message b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:repositories.conversation_repository:Message content length: 843
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 843 chars
INFO:services.conversation_service:ğŸ“ Content updated: 843 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 843 chars
WARNING:app.routes.websocket:Correcting message_id from msg_01GXaAyqZhqsFwBKJ6MCWRX2 to b52d3c0a-f53e-45e4-abec-944cf1e2138f for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 883 chars
INFO:repositories.conversation_repository:Updated and re-fetched message b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:repositories.conversation_repository:Message content length: 883
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 883 chars
INFO:services.conversation_service:ğŸ“ Content updated: 883 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 883 chars
WARNING:app.routes.websocket:Correcting message_id from msg_01GXaAyqZhqsFwBKJ6MCWRX2 to b52d3c0a-f53e-45e4-abec-944cf1e2138f for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 938 chars
INFO:repositories.conversation_repository:Updated and re-fetched message b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:repositories.conversation_repository:Message content length: 938
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 938 chars
INFO:services.conversation_service:ğŸ“ Content updated: 938 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 938 chars
WARNING:app.routes.websocket:Correcting message_id from msg_01GXaAyqZhqsFwBKJ6MCWRX2 to b52d3c0a-f53e-45e4-abec-944cf1e2138f for text_delta event
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting text_delta event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: text_delta content length: 992 chars
INFO:repositories.conversation_repository:Updated and re-fetched message b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:repositories.conversation_repository:Message content length: 992
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 992 chars
INFO:services.conversation_service:ğŸ“ Content updated: 992 chars
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting content_update event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: content_update content length: 992 chars
WARNING:app.routes.websocket:Correcting message_id from msg_01GXaAyqZhqsFwBKJ6MCWRX2 to b52d3c0a-f53e-45e4-abec-944cf1e2138f for content_block_stop event
WARNING:app.routes.websocket:Correcting message_id from msg_01GXaAyqZhqsFwBKJ6MCWRX2 to b52d3c0a-f53e-45e4-abec-944cf1e2138f for message_delta event
WARNING:app.routes.websocket:Correcting message_id from msg_01GXaAyqZhqsFwBKJ6MCWRX2 to b52d3c0a-f53e-45e4-abec-944cf1e2138f for message_stop event
INFO:pdf_processing.api_service:Turn 5: Adding new content (992 chars)
INFO:pdf_processing.api_service:Streaming visualization analysis completed: no more tools
INFO:pdf_processing.api_service:Streaming visualization analysis completed: 1 charts, 1 tables, 2 metrics. Analysis text length: 2106
INFO:services.conversation_service:Current assistant message content length: 992
INFO:services.conversation_service:Analysis text length: 2106
INFO:services.conversation_service:ğŸ“ Using streaming content (992 chars)
INFO:repositories.conversation_repository:Updated and re-fetched message b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:repositories.conversation_repository:Message content length: 992
INFO:repositories.conversation_repository:Analysis blocks count: 0
INFO:repositories.conversation_repository:Content update verified: 992 chars
INFO:services.conversation_service:âœ… Database updated with final content: 992 chars
INFO:services.conversation_service:Sent message_update event for b52d3c0a-f53e-45e4-abec-944cf1e2138f after streaming complete
INFO:services.conversation_service:DEBUG: result.get('metrics'): [{'category': 'Credit Quality', 'name': 'Non-Performing Assets to Total Loans Ratio', 'period': '2025Q1', 'value': 0.867, 'unit': '%', 'isEstimated': False}, {'category': 'Growth', 'name': 'Quarter-over-Quarter Loan Growth Rate', 'period': '2025Q1', 'value': 2.27, 'unit': '%', 'isEstimated': False}]
INFO:services.conversation_service:DEBUG: accumulated_metrics: [{'category': 'Credit Quality', 'name': 'Non-Performing Assets to Total Loans Ratio', 'period': '2025Q1', 'value': 0.867, 'unit': '%', 'isEstimated': False}, {'category': 'Growth', 'name': 'Quarter-over-Quarter Loan Growth Rate', 'period': '2025Q1', 'value': 2.27, 'unit': '%', 'isEstimated': False}]
INFO:services.conversation_service:Processing visualizations for conversation 7fa7703f-60ab-43f5-a6f8-1ac887d3aa20: charts=1, tables=1, metrics=2
INFO:services.conversation_service:Processing chart: Loan Portfolio Composition Trends
INFO:services.conversation_service:Processing table: Credit Quality Metrics
INFO:services.conversation_service:Processing metric: Non-Performing Assets to Total Loans Ratio
INFO:services.conversation_service:Processing metric: Quarter-over-Quarter Loan Growth Rate
INFO:services.conversation_service:Storing 4 analysis blocks for streaming message b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:services.conversation_service:ATOMIC: Using existing transaction for message b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:services.conversation_service:ATOMIC: Refreshed message b52d3c0a-f53e-45e4-abec-944cf1e2138f content length: 992 chars
INFO:repositories.conversation_repository:Added analysis block 'Loan Portfolio Composition Trends' (type: chart) to message b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:services.conversation_service:ATOMIC: Stored analysis block 1/4: Loan Portfolio Composition Trends
INFO:repositories.conversation_repository:Added analysis block 'Credit Quality Metrics' (type: table) to message b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:services.conversation_service:ATOMIC: Stored analysis block 2/4: Credit Quality Metrics
INFO:repositories.conversation_repository:Added analysis block 'Non-Performing Assets to Total Loans Ratio' (type: metric) to message b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:services.conversation_service:ATOMIC: Stored analysis block 3/4: Non-Performing Assets to Total Loans Ratio
INFO:repositories.conversation_repository:Added analysis block 'Quarter-over-Quarter Loan Growth Rate' (type: metric) to message b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:services.conversation_service:ATOMIC: Stored analysis block 4/4: Quarter-over-Quarter Loan Growth Rate
INFO:services.conversation_service:ATOMIC: Transaction complete - message b52d3c0a-f53e-45e4-abec-944cf1e2138f has 4 analysis blocks
INFO:services.conversation_service:Sending message_complete event for conversation 7fa7703f-60ab-43f5-a6f8-1ac887d3aa20 after analysis blocks stored
INFO:app.routes.websocket:WEBSOCKET_FLOW: Emitting message_complete event with message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: Marking session default-user_7fa7703f-60ab-43f5-a6f8-1ac887d3aa20_1750656909760_7fa7703f-60ab-43f5-a6f8-1ac887d3aa20 as inactive after message_complete
INFO:services.conversation_service:message_complete event sent for conversation 7fa7703f-60ab-43f5-a6f8-1ac887d3aa20 after analysis blocks
INFO:app.routes.websocket:WEBSOCKET_FLOW: Streaming message processing completed for message_id: b52d3c0a-f53e-45e4-abec-944cf1e2138f
INFO:app.routes.websocket:WEBSOCKET_FLOW: Conversation 7fa7703f-60ab-43f5-a6f8-1ac887d3aa20 processing finished successfully
INFO:app.routes.websocket:WEBSOCKET_FLOW: Cleaning up session default-user_7fa7703f-60ab-43f5-a6f8-1ac887d3aa20_1750656909760_7fa7703f-60ab-43f5-a6f8-1ac887d3aa20
INFO:services.conversation_service:Found ANTHROPIC_API_KEY in environment variables: sk-ant-a...TQAA
INFO:pdf_processing.api_service:ClaudeService initialized with model: claude-3-5-sonnet-20241022, PDF support, timeout=90s, max_retries=5, headers: {'anthropic-beta': 'token-efficient-tools-2025-02-19,files-api-2025-04-14,fine-grained-tool-streaming-2025-05-14'}
INFO:pdf_processing.langgraph_service:LangGraphService initialized with model: claude-3-5-sonnet-20241022
INFO:pdf_processing.api_service:LangGraph service successfully initialized
INFO:     127.0.0.1:62226 - "GET /api/conversation/message/b52d3c0a-f53e-45e4-abec-944cf1e2138f HTTP/1.1" 200 OK
INFO:services.conversation_service:Found ANTHROPIC_API_KEY in environment variables: sk-ant-a...TQAA
INFO:pdf_processing.api_service:ClaudeService initialized with model: claude-3-5-sonnet-20241022, PDF support, timeout=90s, max_retries=5, headers: {'anthropic-beta': 'token-efficient-tools-2025-02-19,files-api-2025-04-14,fine-grained-tool-streaming-2025-05-14'}
INFO:pdf_processing.langgraph_service:LangGraphService initialized with model: claude-3-5-sonnet-20241022
INFO:pdf_processing.api_service:LangGraph service successfully initialized
INFO:services.conversation_service:Found ANTHROPIC_API_KEY in environment variables: sk-ant-a...TQAA
INFO:pdf_processing.api_service:ClaudeService initialized with model: claude-3-5-sonnet-20241022, PDF support, timeout=90s, max_retries=5, headers: {'anthropic-beta': 'token-efficient-tools-2025-02-19,files-api-2025-04-14,fine-grained-tool-streaming-2025-05-14'}
INFO:pdf_processing.langgraph_service:LangGraphService initialized with model: claude-3-5-sonnet-20241022
INFO:pdf_processing.api_service:LangGraph service successfully initialized
INFO:pdf_processing.api_service:Sending request to Claude API with 1 messages, streaming: False
INFO:pdf_processing.api_service:Sending request to Claude API with 1 messages, streaming: False
INFO:httpx:HTTP Request: POST https://api.anthropic.com/v1/messages/count_tokens "HTTP/1.1 200 OK"
INFO:pdf_processing.api_service:Anthropic SDK estimated input tokens (generate_response non-streaming): 448
INFO:httpx:HTTP Request: POST https://api.anthropic.com/v1/messages/count_tokens "HTTP/1.1 200 OK"
INFO:pdf_processing.api_service:Anthropic SDK estimated input tokens (generate_response non-streaming): 448
INFO:httpx:HTTP Request: POST https://api.anthropic.com/v1/messages/count_tokens "HTTP/1.1 200 OK"
INFO:pdf_processing.api_service:Anthropic SDK estimated input tokens (non-streaming): 448 (Custom estimate: 481)
INFO:pdf_processing.api_service:Throttling based on token count: 448 (SDK count: 448, Custom estimate: 481)
INFO:httpx:HTTP Request: POST https://api.anthropic.com/v1/messages/count_tokens "HTTP/1.1 200 OK"
INFO:pdf_processing.api_service:Anthropic SDK estimated input tokens (non-streaming): 448 (Custom estimate: 481)
INFO:pdf_processing.api_service:Throttling based on token count: 448 (SDK count: 448, Custom estimate: 481)
INFO:httpx:HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
INFO:     127.0.0.1:62226 - "POST /api/conversation/7fa7703f-60ab-43f5-a6f8-1ac887d3aa20/generate-followups?limit=3 HTTP/1.1" 200 OK
INFO:httpx:HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
INFO:     127.0.0.1:62227 - "POST /api/conversation/7fa7703f-60ab-43f5-a6f8-1ac887d3aa20/generate-followups?limit=3 HTTP/1.1" 200 OK
</Backend_Logs>